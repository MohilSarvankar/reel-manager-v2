import{E,F as P,G as L,H as T,I as m,J as o,K as s,L as _,M as c,N as d,P as R,Q as V,S as y,T as n,U as f,W as F,X as I,a as b,aa as B,ca as A,da as N,ea as j,fa as W,ga as H,ha as U,i as h,ia as G,ja as Z,ka as $,la as Y,o as M,p as z,t as a,x as g,y as l,z as u}from"./chunk-XAPAY5T4.js";var v=class e{constructor(t){this.router=t}reel=null;handleClick(){this.router.navigate(["/reel",this.reel.id],{queryParams:{movie:this.reel.movie,category:this.reel.category,scene:this.reel.scene,status:this.reel.status}})}static \u0275fac=function(i){return new(i||e)(g(N))};static \u0275cmp=l({type:e,selectors:[["app-reel-box"]],inputs:{reel:"reel"},decls:9,vars:10,consts:[[1,"box",3,"click"],[1,"category"],[1,"status"]],template:function(i,r){i&1&&(c(0,"div",0),V("click",function(){return r.handleClick()}),c(1,"h3"),n(2),d(),c(3,"div",1),n(4),d(),c(5,"p"),n(6),d(),c(7,"div",2),n(8),d()()),i&2&&(a(2),f(r.reel.movie),a(2),f(r.reel.category),a(2),f(r.reel.scene),a(),y("status-uploaded",r.reel.status==="Uploaded")("status-created",r.reel.status==="Created")("status-idea",r.reel.status==="Idea"),a(),f(r.reel.status))},styles:[".box[_ngcontent-%COMP%]{box-sizing:border-box;position:relative;width:100%;max-width:520px;margin:10px auto;padding:12px 60px 12px 16px;border-radius:14px;background:var(--card-bg);border:1px solid var(--card-border);box-shadow:var(--card-shadow);display:flex;flex-direction:column;gap:8px}.box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:1.05rem;line-height:1.2;color:var(--text)}.box[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{font-size:.9rem;font-weight:600;color:var(--muted);display:block;margin:-5px 0}.box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--text)}.status[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;font-size:.82rem;padding:6px 10px;border-radius:999px;line-height:1;white-space:nowrap;background:var(--status-bg);color:var(--text);font-weight:600}.status-uploaded[_ngcontent-%COMP%]{color:var(--status-uploaded)}.status-created[_ngcontent-%COMP%]{color:var(--status-created)}.status-idea[_ngcontent-%COMP%]{color:var(--status-idea)}@media (min-width: 700px){.box[_ngcontent-%COMP%]{max-width:700px;padding:14px 18px}}"],changeDetection:0})};var D=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=u({type:e});static \u0275inj=h({})}return e})();var K=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=u({type:e});static \u0275inj=h({})}return e})(),Q=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=u({type:e});static \u0275inj=h({imports:[D,K,D,K]})}return e})();var ie=(e,t)=>t.id;function re(e,t){if(e&1&&_(0,"app-reel-box",9),e&2){let i=t.$implicit;m("reel",i)}}function ne(e,t){e&1&&(o(0,"div",10),n(1," No reels to load. "),s())}function oe(e,t){e&1&&(o(0,"div",11),n(1," Loading more reels... "),s())}var C=class e{constructor(t){this.reelService=t}reelList=[];pageSize=10;isLoading=!1;noReels=!1;lastDoc=null;currentStatus="All";ngOnInit(){this.loadReels()}loadReels(){this.isLoading=!0,this.reelService.getReelsFirstPage(this.pageSize,this.currentStatus).then(t=>{this.reelList=t.docs.map(i=>b({id:i.id},i.data())),this.noReels=this.reelList.length===0,this.isLoading=!1,this.lastDoc=t.docs[t.docs.length-1]}).catch(t=>{console.error("Error fetching reels: ",t)})}loadMoreReels(){this.isLoading=!0,this.reelService.getReelsNextPage(this.lastDoc,this.pageSize,this.currentStatus).then(t=>{let i=t.docs.map(r=>b({id:r.id},r.data()));this.reelList.push(...i),this.lastDoc=t.docs[t.docs.length-1],this.isLoading=!1}).catch(t=>{console.error("Error fetching more reels: ",t)})}onScroll(t){t.target.scrollHeight-t.target.scrollTop-t.target.clientHeight<1&&!this.isLoading&&this.lastDoc&&this.loadMoreReels()}statusChangeHandle(t){let i=t.target.value;this.currentStatus=i,this.loadReels()}static \u0275fac=function(i){return new(i||e)(g(Y))};static \u0275cmp=l({type:e,selectors:[["app-reel-list"]],decls:18,vars:1,consts:[[1,"reel-list-wrapper"],[1,"filter-section"],["for","statusSelect"],["id","statusSelect",3,"change"],["value","All"],["value","Idea"],["value","Created"],["value","Uploaded"],[1,"reel-list-container",3,"scroll"],[3,"reel"],[1,"end-indicator"],[1,"loading-indicator"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"label",2),n(3,"Filter by Status:"),s(),o(4,"select",3),R("change",function(S){return r.statusChangeHandle(S)}),o(5,"option",4),n(6,"All"),s(),o(7,"option",5),n(8,"Idea"),s(),o(9,"option",6),n(10,"Created"),s(),o(11,"option",7),n(12,"Uploaded"),s()()(),o(13,"div",8),R("scroll",function(S){return r.onScroll(S)}),L(14,re,1,1,"app-reel-box",9,ie),E(16,ne,2,0,"div",10)(17,oe,2,0,"div",11),s()()),i&2&&(a(14),T(r.reelList),a(2),P(r.noReels?16:r.isLoading?17:-1))},dependencies:[v,Q],styles:[".reel-list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 60px);max-width:1200px;margin:0 auto;width:100%}.reel-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;background:var(--bg);overflow-y:auto;flex:1}.filter-section[_ngcontent-%COMP%]{position:sticky;top:0;z-index:99;display:flex;align-items:center;gap:12px;padding:5px 16px;background:var(--card-bg);border:1px solid var(--card-border);border-bottom:2px solid var(--border);border-radius:0}.filter-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text);font-weight:600;font-size:.95rem;white-space:nowrap}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 12px;background:var(--surface);color:var(--text);border:1px solid var(--border);border-radius:6px;font-size:.95rem;font-family:inherit;cursor:pointer;transition:border-color .15s ease,background .15s ease;color-scheme:dark}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#ffffff26}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff3;background:#ffffff0a}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:var(--surface);color:var(--text)}.loading-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:24px 16px;color:var(--muted);font-weight:500;text-align:center;animation:_ngcontent-%COMP%_pulse 1.5s cubic-bezier(.4,0,.6,1) infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.6}}.end-indicator[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:32px 16px;color:var(--subtle);font-size:1rem;text-align:center;background:#ffffff05;border:1px solid var(--border);border-radius:12px;margin-top:16px}@media (max-width: 600px){.reel-list-container[_ngcontent-%COMP%]{padding:12px;gap:10px}.loading-indicator[_ngcontent-%COMP%], .end-indicator[_ngcontent-%COMP%]{padding:20px 12px;font-size:.9rem}.end-indicator[_ngcontent-%COMP%]{border-radius:8px}}.reel-list-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.reel-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.reel-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#ffffff1a;border-radius:4px}.reel-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff3}"]})};var q=[{path:"",component:C},{path:"create",loadComponent:()=>import("./chunk-CHNN3Q33.js").then(e=>e.ReelForm)},{path:"reel/:id",loadComponent:()=>import("./chunk-CHNN3Q33.js").then(e=>e.ReelForm)},{path:"**",redirectTo:""}];var X={apiKey:"AIzaSyDl1prT3AhRlae_gvr5Km51-yRdiig-0lY",authDomain:"reel-manager.firebaseapp.com",projectId:"reel-manager",storageBucket:"reel-manager.firebasestorage.app",messagingSenderId:"117237623692",appId:"1:117237623692:web:cbb59b2678c479445844a9",measurementId:"G-9VKSL4HB27"};var J={providers:[M(),I({eventCoalescing:!0}),H(q),U(()=>G(X)),Z(()=>$())]};var se=()=>({exact:!0}),x=class e{static \u0275fac=function(i){return new(i||e)};static \u0275cmp=l({type:e,selectors:[["app-navbar"]],decls:10,vars:2,consts:[[1,"logo"],["routerLink","/","routerLinkActive","active",3,"routerLinkActiveOptions"],["routerLink","/create","routerLinkActive","active"]],template:function(i,r){i&1&&(o(0,"nav")(1,"div",0),n(2,"Reel Manager"),s(),o(3,"ul")(4,"li")(5,"a",1),n(6,"Home"),s()(),o(7,"li")(8,"a",2),n(9,"Create Reel"),s()()()()),i&2&&(a(5),m("routerLinkActiveOptions",F(1,se)))},dependencies:[j,W],styles:["nav[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 16px;background:var(--surface);border-bottom:1px solid var(--border)}.logo[_ngcontent-%COMP%]{font-weight:700;color:var(--text);font-size:1.1rem;letter-spacing:.2px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;gap:10px;align-items:center}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;transition:background .12s ease,color .12s ease;font-weight:600;font-size:.95rem}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--text);background:#ffffff1a}nav[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--text)}"]})};var w=class e{title=z("reel-manager-v2");static \u0275fac=function(i){return new(i||e)};static \u0275cmp=l({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,r){i&1&&_(0,"app-navbar")(1,"router-outlet")},dependencies:[A,x],encapsulation:2})};B(w,J).catch(e=>console.error(e));
