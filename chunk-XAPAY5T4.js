var hP=Object.defineProperty,fP=Object.defineProperties;var pP=Object.getOwnPropertyDescriptors;var xE=Object.getOwnPropertySymbols;var gP=Object.prototype.hasOwnProperty,mP=Object.prototype.propertyIsEnumerable;var kE=(t,e,n)=>e in t?hP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})gP.call(e,n)&&kE(t,n,e[n]);if(xE)for(var n of xE(e))mP.call(e,n)&&kE(t,n,e[n]);return t},ye=(t,e)=>fP(t,pP(e));var D=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});var Mf;function ou(){return Mf}function on(t){let e=Mf;return Mf=t,e}var OE=Symbol("NotFound");function Qi(t){return t===OE||t?.name==="\u0275NotFound"}var at=null,su=!1,xf=1,yP=null,mt=Symbol("SIGNAL");function K(t){let e=at;return at=t,e}function lu(){return at}var Yi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ji(t){if(su)throw new Error("");if(at===null)return;at.consumerOnSignalRead(t);let e=at.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=at.recomputing;if(r&&(n=e!==void 0?e.nextProducer:at.producers,n!==void 0&&n.producer===t)){at.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===at&&(!r||_P(i,at)))return;let o=Xi(at),s={producer:t,consumer:at,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};at.producersTail=s,e!==void 0?e.nextProducer=s:at.producers=s,o&&jE(t,s)}function LE(){xf++}function du(t){if(!(Xi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===xf)){if(!t.producerMustRecompute(t)&&!ea(t)){uu(t);return}t.producerRecomputeValue(t),uu(t)}}function kf(t){if(t.consumers===void 0)return;let e=su;su=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||vP(r)}}finally{su=e}}function Of(){return at?.consumerAllowSignalWrites!==!1}function vP(t){t.dirty=!0,kf(t),t.consumerMarkedDirty?.(t)}function uu(t){t.dirty=!1,t.lastCleanEpoch=xf}function Zi(t){return t&&FE(t),K(t)}function FE(t){t.producersTail=void 0,t.recomputing=!0}function Xs(t,e){K(e),t&&VE(t)}function VE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Xi(t))do n=Lf(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ea(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(du(n),r!==n.version))return!0}return!1}function ta(t){if(Xi(t)){let e=t.producers;for(;e!==void 0;)e=Lf(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function jE(t,e){let n=t.consumersTail,r=Xi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)jE(i.producer,i)}function Lf(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Xi(e)){let o=e.producers;for(;o!==void 0;)o=Lf(o)}return n}function Xi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function hu(t){yP?.(t)}function _P(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function fu(t,e){return Object.is(t,e)}function pu(t,e){let n=Object.create(IP);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(du(n),Ji(n),n.value===Zs)throw n.error;return n.value};return r[mt]=n,hu(n),r}var au=Symbol("UNSET"),cu=Symbol("COMPUTING"),Zs=Symbol("ERRORED"),IP=ye(V({},Yi),{value:au,dirty:!0,error:null,equal:fu,kind:"computed",producerMustRecompute(t){return t.value===au||t.value===cu},producerRecomputeValue(t){if(t.value===cu)throw new Error("");let e=t.value;t.value=cu;let n=Zi(t),r,i=!1;try{r=t.computation(),K(null),i=e!==au&&e!==Zs&&r!==Zs&&t.equal(e,r)}catch(o){r=Zs,t.error=o}finally{Xs(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function EP(){throw new Error}var UE=EP;function $E(t){UE(t)}function Ff(t){UE=t}var wP=null;function Vf(t,e){let n=Object.create(gu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>BE(n);return r[mt]=n,hu(n),[r,s=>eo(n,s),s=>jf(n,s)]}function BE(t){return Ji(t),t.value}function eo(t,e){Of()||$E(t),t.equal(t.value,e)||(t.value=e,TP(t))}function jf(t,e){Of()||$E(t),eo(t,e(t.value))}var gu=ye(V({},Yi),{equal:fu,value:void 0,kind:"signal"});function TP(t){t.version++,LE(),kf(t),wP?.(t)}function Z(t){return typeof t=="function"}function to(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var mu=to(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Z(r))try{r()}catch(o){e=o instanceof mu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{HE(o)}catch(s){e=e??[],s instanceof mu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new mu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)HE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qr(n,e)}remove(e){let{_finalizers:n}=this;n&&qr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var Uf=Ce.EMPTY;function yu(t){return t instanceof Ce||t&&"closed"in t&&Z(t.remove)&&Z(t.add)&&Z(t.unsubscribe)}function HE(t){Z(t)?t():t.unsubscribe()}var qt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var no={setTimeout(t,e,...n){let{delegate:r}=no;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=no;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function vu(t){no.setTimeout(()=>{let{onUnhandledError:e}=qt;if(e)e(t);else throw t})}function na(){}var qE=$f("C",void 0,void 0);function zE(t){return $f("E",void 0,t)}function WE(t){return $f("N",t,void 0)}function $f(t,e,n){return{kind:t,value:e,error:n}}var zr=null;function ro(t){if(qt.useDeprecatedSynchronousErrorHandling){let e=!zr;if(e&&(zr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=zr;if(zr=null,n)throw r}}else t()}function GE(t){qt.useDeprecatedSynchronousErrorHandling&&zr&&(zr.errorThrown=!0,zr.error=t)}var Wr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,yu(e)&&e.add(this)):this.destination=CP}static create(e,n,r){return new io(e,n,r)}next(e){this.isStopped?Hf(WE(e),this):this._next(e)}error(e){this.isStopped?Hf(zE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Hf(qE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bP=Function.prototype.bind;function Bf(t,e){return bP.call(t,e)}var qf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_u(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_u(r)}else _u(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_u(n)}}},io=class extends Wr{constructor(e,n,r){super();let i;if(Z(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&qt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bf(e.next,o),error:e.error&&Bf(e.error,o),complete:e.complete&&Bf(e.complete,o)}):i=e}this.destination=new qf(i)}};function _u(t){qt.useDeprecatedSynchronousErrorHandling?GE(t):vu(t)}function SP(t){throw t}function Hf(t,e){let{onStoppedNotification:n}=qt;n&&no.setTimeout(()=>n(t,e))}var CP={closed:!0,next:na,error:SP,complete:na};var oo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function St(t){return t}function zf(...t){return Wf(t)}function Wf(t){return t.length===0?St:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var te=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=AP(n)?n:new io(n,r,i);return ro(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=KE(r),new r((i,o)=>{let s=new io({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[oo](){return this}pipe(...n){return Wf(n)(this)}toPromise(n){return n=KE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function KE(t){var e;return(e=t??qt.Promise)!==null&&e!==void 0?e:Promise}function DP(t){return t&&Z(t.next)&&Z(t.error)&&Z(t.complete)}function AP(t){return t&&t instanceof Wr||DP(t)&&yu(t)}function Gf(t){return Z(t?.lift)}function ce(t){return e=>{if(Gf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,r,i){return new Kf(t,e,n,r,i)}var Kf=class extends Wr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function so(){return ce((t,e)=>{let n=null;t._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ao=class extends te{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Gf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return so()(this)}};var QE=to(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class t extends te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Iu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new QE}next(n){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ro(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Uf:(this.currentObservers=null,o.push(n),new Ce(()=>{this.currentObservers=null,qr(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new te;return n.source=this,n}}return t.create=(e,n)=>new Iu(e,n),t})(),Iu=class extends $e{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Uf}};var Je=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qf={now(){return(Qf.delegate||Date).now()},delegate:void 0};var Eu=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var ra={setInterval(t,e,...n){let{delegate:r}=ra;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ra;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var co=class extends Eu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return ra.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ra.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,qr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var uo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};uo.now=Qf.now;var lo=class extends uo{constructor(e,n=uo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Yf=new lo(co);var wu=class extends co{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Tu=class extends lo{};var Jf=new Tu(wu);var It=new te(t=>t.complete());function YE(t){return t&&Z(t.schedule)}function JE(t){return t[t.length-1]}function bu(t){return Z(JE(t))?t.pop():void 0}function ur(t){return YE(JE(t))?t.pop():void 0}function Zf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function XE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function ZE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gr(t){return this instanceof Gr?(this.v=t,this):new Gr(t)}function ew(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(N){return new Promise(function(R,k){o.push([y,N,R,k])>1||u(y,N)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(N){m(o[0][3],N)}}function l(y){y.value instanceof Gr?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function tw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ZE=="function"?ZE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Su=t=>t&&typeof t.length=="number"&&typeof t!="function";function Cu(t){return Z(t?.then)}function Du(t){return Z(t[oo])}function Au(t){return Symbol.asyncIterator&&Z(t?.[Symbol.asyncIterator])}function Ru(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function RP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Nu=RP();function Pu(t){return Z(t?.[Nu])}function Mu(t){return ew(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Gr(n.read());if(i)return yield Gr(void 0);yield yield Gr(r)}}finally{n.releaseLock()}})}function xu(t){return Z(t?.getReader)}function xe(t){if(t instanceof te)return t;if(t!=null){if(Du(t))return NP(t);if(Su(t))return PP(t);if(Cu(t))return MP(t);if(Au(t))return nw(t);if(Pu(t))return xP(t);if(xu(t))return kP(t)}throw Ru(t)}function NP(t){return new te(e=>{let n=t[oo]();if(Z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PP(t){return new te(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function MP(t){return new te(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,vu)})}function xP(t){return new te(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function nw(t){return new te(e=>{OP(t,e).catch(n=>e.error(n))})}function kP(t){return nw(Mu(t))}function OP(t,e){var n,r,i,o;return XE(this,void 0,void 0,function*(){try{for(n=tw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Et(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function lr(t,e=0){return ce((n,r)=>{n.subscribe(oe(r,i=>Et(r,t,()=>r.next(i),e),()=>Et(r,t,()=>r.complete(),e),i=>Et(r,t,()=>r.error(i),e)))})}function dr(t,e=0){return ce((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function rw(t,e){return xe(t).pipe(dr(e),lr(e))}function iw(t,e){return xe(t).pipe(dr(e),lr(e))}function ow(t,e){return new te(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function sw(t,e){return new te(n=>{let r;return Et(n,e,()=>{r=t[Nu](),Et(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Z(r?.return)&&r.return()})}function ku(t,e){if(!t)throw new Error("Iterable cannot be null");return new te(n=>{Et(n,e,()=>{let r=t[Symbol.asyncIterator]();Et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function aw(t,e){return ku(Mu(t),e)}function cw(t,e){if(t!=null){if(Du(t))return rw(t,e);if(Su(t))return ow(t,e);if(Cu(t))return iw(t,e);if(Au(t))return ku(t,e);if(Pu(t))return sw(t,e);if(xu(t))return aw(t,e)}throw Ru(t)}function Ne(t,e){return e?cw(t,e):xe(t)}function W(...t){let e=ur(t);return Ne(t,e)}function ho(t,e){let n=Z(t)?t:()=>t,r=i=>i.error(n());return new te(e?i=>e.schedule(r,0,i):r)}function Xf(t){return!!t&&(t instanceof te||Z(t.lift)&&Z(t.subscribe))}var An=to(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ue(t,e){return ce((n,r)=>{let i=0;n.subscribe(oe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:LP}=Array;function FP(t,e){return LP(e)?t(...e):t(e)}function Ou(t){return ue(e=>FP(t,e))}var{isArray:VP}=Array,{getPrototypeOf:jP,prototype:UP,keys:$P}=Object;function Lu(t){if(t.length===1){let e=t[0];if(VP(e))return{args:e,keys:null};if(BP(e)){let n=$P(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function BP(t){return t&&typeof t=="object"&&jP(t)===UP}function Fu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Vu(...t){let e=ur(t),n=bu(t),{args:r,keys:i}=Lu(t);if(r.length===0)return Ne([],e);let o=new te(HP(r,e,i?s=>Fu(i,s):St));return n?o.pipe(Ou(n)):o}function HP(t,e,n=St){return r=>{uw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)uw(e,()=>{let l=Ne(t[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function uw(t,e,n){t?Et(n,t,e):e()}function lw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=N=>l<r?S(N):u.push(N),S=N=>{o&&e.next(N),l++;let R=!1;xe(n(N,h++)).subscribe(oe(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let k=u.shift();s?Et(e,s,()=>S(k)):S(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function ke(t,e,n=1/0){return Z(e)?ke((r,i)=>ue((o,s)=>e(r,o,i,s))(xe(t(r,i))),n):(typeof e=="number"&&(n=e),ce((r,i)=>lw(r,i,t,n)))}function fo(t=1/0){return ke(St,t)}function dw(){return fo(1)}function po(...t){return dw()(Ne(t,ur(t)))}function ia(t){return new te(e=>{xe(t()).subscribe(e)})}function qP(...t){let e=bu(t),{args:n,keys:r}=Lu(t),i=new te(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;xe(n[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Fu(r,a):a),o.complete())}))}});return e?i.pipe(Ou(e)):i}function Ct(t,e){return ce((n,r)=>{let i=0;n.subscribe(oe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Rn(t){return ce((e,n)=>{let r=null,i=!1,o;r=e.subscribe(oe(n,void 0,void 0,s=>{o=xe(t(s,Rn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function hw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Kr(t,e){return Z(e)?ke(t,e,1):ke(t,1)}function hr(t){return ce((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Nn(t){return t<=0?()=>It:ce((e,n)=>{let r=0;e.subscribe(oe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function ju(t=zP){return ce((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function zP(){return new An}function oa(t){return ce((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Pn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,o)=>t(i,o,r)):St,Nn(1),n?hr(e):ju(()=>new An))}function go(t){return t<=0?()=>It:ce((e,n)=>{let r=[];e.subscribe(oe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function ep(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Ct((i,o)=>t(i,o,r)):St,go(1),n?hr(e):ju(()=>new An))}function tp(t,e){return ce(hw(t,e,arguments.length>=2,!0))}function np(...t){let e=ur(t);return ce((n,r)=>{(e?po(t,n,e):po(t,n)).subscribe(r)})}function wt(t,e){return ce((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;xe(t(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Uu(t){return ce((e,n)=>{xe(t).subscribe(oe(n,()=>n.complete(),na)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let r=Z(t)||e||n?{next:t,error:e,complete:n}:t;return r?ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):St}function fw(t){let e=K(null);try{return t()}finally{K(e)}}var yo=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gp=new yo("20.3.15");var qu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(ua(e,n)),this.code=e}};function WP(t){return`NG0${Math.abs(t)}`}function ua(t,e){return`${WP(t)}${e?": "+e:""}`}var la=globalThis;function pe(t){for(let e in t)if(t[e]===pe)return e;throw Error("")}function mw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function xn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(xn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function mp(t,e){return t?e?`${t} ${e}`:t:e||""}var GP=pe({__forward_ref__:pe});function zu(t){return t.__forward_ref__=zu,t.toString=function(){return xn(this())},t}function Ze(t){return yp(t)?t():t}function yp(t){return typeof t=="function"&&t.hasOwnProperty(GP)&&t.__forward_ref__===zu}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function da(t){return{providers:t.providers||[],imports:t.imports||[]}}function ha(t){return KP(t,Wu)}function vp(t){return ha(t)!==null}function KP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function QP(t){let e=t?.[Wu]??null;return e||null}function ip(t){return t&&t.hasOwnProperty(Bu)?t[Bu]:null}var Wu=pe({\u0275prov:pe}),Bu=pe({\u0275inj:pe}),H=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function _p(t){return t&&!!t.\u0275providers}var Ip=pe({\u0275cmp:pe}),Ep=pe({\u0275dir:pe}),wp=pe({\u0275pipe:pe}),Tp=pe({\u0275mod:pe}),aa=pe({\u0275fac:pe}),ei=pe({__NG_ELEMENT_ID__:pe}),pw=pe({__NG_ENV_ID__:pe});function fa(t){return typeof t=="string"?t:t==null?"":String(t)}function yw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():fa(t)}var vw=pe({ngErrorCode:pe}),YP=pe({ngErrorMessage:pe}),JP=pe({ngTokenPath:pe});function bp(t,e){return _w("",-200,e)}function Gu(t,e){throw new j(-201,!1)}function _w(t,e,n){let r=new j(e,t);return r[vw]=e,r[YP]=t,n&&(r[JP]=n),r}function ZP(t){return t[vw]}var op;function Iw(){return op}function Dt(t){let e=op;return op=t,e}function Sp(t,e,n){let r=ha(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Gu(t,"Injector")}var XP={},Qr=XP,sp="__NG_DI_FLAG__",ap=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Yr(n)||0;try{return this.injector.get(e,r&8?null:Qr,r)}catch(i){if(Qi(i))return i;throw i}}};function e0(t,e=0){let n=ou();if(n===void 0)throw new j(-203,!1);if(n===null)return Sp(t,void 0,e);{let r=t0(e),i=n.retrieve(t,r);if(Qi(i)){if(r.optional)return null;throw i}return i}}function ee(t,e=0){return(Iw()||e0)(Ze(t),e)}function M(t,e){return ee(t,Yr(e))}function Yr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function t0(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function cp(t){let e=[];for(let n=0;n<t.length;n++){let r=Ze(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=n0(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ee(i,o))}else e.push(ee(r))}return e}function Ew(t,e){return t[sp]=e,t.prototype[sp]=e,t}function n0(t){return t[sp]}function Jr(t,e){let n=t.hasOwnProperty(aa);return n?t[aa]:null}function ww(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Tw(t){return t.flat(Number.POSITIVE_INFINITY)}function Ku(t,e){t.forEach(n=>Array.isArray(n)?Ku(n,e):e(n))}function Cp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function bw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Sw(t,e,n){let r=vo(t,e);return r>=0?t[r|1]=n:(r=~r,bw(t,r,e,n)),r}function Qu(t,e){let n=vo(t,e);if(n>=0)return t[n|1]}function vo(t,e){return r0(t,e,1)}function r0(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var pr={},At=[],On=new H(""),Dp=new H("",-1),Ap=new H(""),ca=class{get(e,n=Qr){if(n===Qr){let i=_w("",-201);throw i.name="\u0275NotFound",i}return n}};function Rp(t){return t[Tp]||null}function gr(t){return t[Ip]||null}function Np(t){return t[Ep]||null}function Cw(t){return t[wp]||null}function Wt(t){return{\u0275providers:t}}function Dw(t){return Wt([{provide:On,multi:!0,useValue:t}])}function Aw(...t){return{\u0275providers:Pp(!0,t),\u0275fromNgModule:!0}}function Pp(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Ku(e,s=>{let a=s;Hu(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Rw(i,o),n}function Rw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Mp(i,o=>{e(o,r)})}}function Hu(t,e,n,r){if(t=Ze(t),!t)return!1;let i=null,o=ip(t),s=!o&&gr(t);if(!o&&!s){let u=t.ngModule;if(o=ip(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Hu(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Ku(o.imports,h=>{Hu(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&Rw(l,e)}if(!a){let l=Jr(i)||(()=>new i);e({provide:i,useFactory:l,deps:At},i),e({provide:Ap,useValue:i,multi:!0},i),e({provide:On,useValue:()=>ee(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Mp(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Mp(t,e){for(let n of t)_p(n)&&(n=n.\u0275providers),Array.isArray(n)?Mp(n,e):e(n)}var i0=pe({provide:String,useValue:pe});function Nw(t){return t!==null&&typeof t=="object"&&i0 in t}function o0(t){return!!(t&&t.useExisting)}function s0(t){return!!(t&&t.useFactory)}function Zr(t){return typeof t=="function"}function Pw(t){return!!t.useClass}var ga=new H(""),$u={},gw={},rp;function ma(){return rp===void 0&&(rp=new ca),rp}var Oe=class{},Xr=class extends Oe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,lp(e,s=>this.processProvider(s)),this.records.set(Dp,mo(void 0,this)),i.has("environment")&&this.records.set(Oe,mo(void 0,this));let o=this.records.get(ga);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ap,At,{self:!0}))}retrieve(e,n){let r=Yr(n)||0;try{return this.get(e,Qr,r)}catch(i){if(Qi(i))return i;throw i}}destroy(){sa(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return sa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){sa(this);let n=on(this),r=Dt(void 0),i;try{return e()}finally{on(n),Dt(r)}}get(e,n=Qr,r){if(sa(this),e.hasOwnProperty(pw))return e[pw](this);let i=Yr(r),o,s=on(this),a=Dt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=d0(e)&&ha(e);h&&this.injectableDefInScope(h)?l=mo(up(e),$u):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?ma():this.parent;return n=i&8&&n===Qr?null:n,u.get(e,n)}catch(u){let l=ZP(u);throw l===-200||l===-201?new j(l,null):u}finally{Dt(a),on(s)}}resolveInjectorInitializers(){let e=K(null),n=on(this),r=Dt(void 0),i;try{let o=this.get(On,At,{self:!0});for(let s of o)s()}finally{on(n),Dt(r),K(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(xn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ze(e);let n=Zr(e)?e:Ze(e&&e.provide),r=c0(e);if(!Zr(e)&&e.multi===!0){let i=this.records.get(n);i||(i=mo(void 0,$u,!0),i.factory=()=>cp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=K(null);try{if(n.value===gw)throw bp(xn(e));return n.value===$u&&(n.value=gw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&l0(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ze(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function up(t){let e=ha(t),n=e!==null?e.factory:Jr(t);if(n!==null)return n;if(t instanceof H)throw new j(204,!1);if(t instanceof Function)return a0(t);throw new j(204,!1)}function a0(t){if(t.length>0)throw new j(204,!1);let n=QP(t);return n!==null?()=>n.factory(t):()=>new t}function c0(t){if(Nw(t))return mo(void 0,t.useValue);{let e=xp(t);return mo(e,$u)}}function xp(t,e,n){let r;if(Zr(t)){let i=Ze(t);return Jr(i)||up(i)}else if(Nw(t))r=()=>Ze(t.useValue);else if(s0(t))r=()=>t.useFactory(...cp(t.deps||[]));else if(o0(t))r=(i,o)=>ee(Ze(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ze(t&&(t.useClass||t.provide));if(u0(t))r=()=>new i(...cp(t.deps));else return Jr(i)||up(i)}return r}function sa(t){if(t.destroyed)throw new j(205,!1)}function mo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function u0(t){return!!t.deps}function l0(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function d0(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function lp(t,e){for(let n of t)Array.isArray(n)?lp(n,e):n&&_p(n)?lp(n.\u0275providers,e):e(n)}function He(t,e){let n;t instanceof Xr?(sa(t),n=t):n=new ap(t);let r,i=on(n),o=Dt(void 0);try{return e()}finally{on(i),Dt(o)}}function Mw(){return Iw()!==void 0||ou()!=null}var Gt=0,q=1,Q=2,Be=3,Lt=4,Ft=5,_o=6,Io=7,Pe=8,Ln=9,sn=10,De=11,Eo=12,kp=13,ti=14,Rt=15,mr=16,ni=17,an=18,ya=19,Op=20,Mn=21,Yu=22,va=23,Nt=24,ri=25,ii=26,et=27,xw=1,Lp=6,yr=7,_a=8,oi=9,Ae=10;function cn(t){return Array.isArray(t)&&typeof t[xw]=="object"}function Kt(t){return Array.isArray(t)&&t[xw]===!0}function Fp(t){return(t.flags&4)!==0}function vr(t){return t.componentOffset>-1}function Ju(t){return(t.flags&1)===1}function un(t){return!!t.template}function wo(t){return(t[Q]&512)!==0}function si(t){return(t[Q]&256)===256}var kw="svg",Ow="math";function Vt(t){for(;Array.isArray(t);)t=t[Gt];return t}function Vp(t,e){return Vt(e[t])}function Qt(t,e){return Vt(e[t.index])}function Ia(t,e){return t.data[e]}function jt(t,e){let n=e[t];return cn(n)?n:n[Gt]}function Lw(t){return(t[Q]&4)===4}function Zu(t){return(t[Q]&128)===128}function Fw(t){return Kt(t[Be])}function ln(t,e){return e==null?null:t[e]}function jp(t){t[ni]=0}function Up(t){t[Q]&1024||(t[Q]|=1024,Zu(t)&&To(t))}function Vw(t,e){for(;t>0;)e=e[ti],t--;return e}function Ea(t){return!!(t[Q]&9216||t[Nt]?.dirty)}function Xu(t){t[sn].changeDetectionScheduler?.notify(8),t[Q]&64&&(t[Q]|=1024),Ea(t)&&To(t)}function To(t){t[sn].changeDetectionScheduler?.notify(0);let e=fr(t);for(;e!==null&&!(e[Q]&8192||(e[Q]|=8192,!Zu(e)));)e=fr(e)}function $p(t,e){if(si(t))throw new j(911,!1);t[Mn]===null&&(t[Mn]=[]),t[Mn].push(e)}function jw(t,e){if(t[Mn]===null)return;let n=t[Mn].indexOf(e);n!==-1&&t[Mn].splice(n,1)}function fr(t){let e=t[Be];return Kt(e)?e[Be]:e}function Bp(t){return t[Io]??=[]}function Hp(t){return t.cleanup??=[]}function Uw(t,e,n,r){let i=Bp(e);i.push(n),t.firstCreatePass&&Hp(t).push(r,i.length-1)}var re={lFrame:rT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var dp=!1;function $w(){return re.lFrame.elementDepthCount}function Bw(){re.lFrame.elementDepthCount++}function qp(){re.lFrame.elementDepthCount--}function Hw(){return re.bindingsEnabled}function qw(){return re.skipHydrationRootTNode!==null}function zp(t){return re.skipHydrationRootTNode===t}function Wp(){re.skipHydrationRootTNode=null}function se(){return re.lFrame.lView}function ct(){return re.lFrame.tView}function zw(t){return re.lFrame.contextLView=t,t[Pe]}function Ww(t){return re.lFrame.contextLView=null,t}function ze(){let t=Gp();for(;t!==null&&t.type===64;)t=t.parent;return t}function Gp(){return re.lFrame.currentTNode}function Gw(){let t=re.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function bo(t,e){let n=re.lFrame;n.currentTNode=t,n.isParent=e}function Kp(){return re.lFrame.isParent}function Kw(){re.lFrame.isParent=!1}function Qp(){return dp}function Yp(t){let e=dp;return dp=t,e}function Qw(){let t=re.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Yw(t){return re.lFrame.bindingIndex=t}function So(){return re.lFrame.bindingIndex++}function Jw(t){let e=re.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Zw(){return re.lFrame.inI18n}function Xw(t,e){let n=re.lFrame;n.bindingIndex=n.bindingRootIndex=t,el(e)}function eT(){return re.lFrame.currentDirectiveIndex}function el(t){re.lFrame.currentDirectiveIndex=t}function tT(t){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Jp(){return re.lFrame.currentQueryIndex}function tl(t){re.lFrame.currentQueryIndex=t}function h0(t){let e=t[q];return e.type===2?e.declTNode:e.type===1?t[Ft]:null}function Zp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=h0(o),i===null||(o=o[ti],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=re.lFrame=nT();return r.currentTNode=e,r.lView=t,!0}function nl(t){let e=nT(),n=t[q];re.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function nT(){let t=re.lFrame,e=t===null?null:t.child;return e===null?rT(t):e}function rT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function iT(){let t=re.lFrame;return re.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Xp=iT;function rl(){let t=iT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function oT(t){return(re.lFrame.contextLView=Vw(t,re.lFrame.contextLView))[Pe]}function _r(){return re.lFrame.selectedIndex}function Ir(t){re.lFrame.selectedIndex=t}function eg(){let t=re.lFrame;return Ia(t.tView,t.selectedIndex)}function sT(){return re.lFrame.currentNamespace}var aT=!0;function il(){return aT}function ol(t){aT=t}function hp(t,e=null,n=null,r){let i=tg(t,e,n,r);return i.resolveInjectorInitializers(),i}function tg(t,e=null,n=null,r,i=new Set){let o=[n||At,Aw(t)];return r=r||(typeof t=="object"?void 0:xn(t)),new Xr(o,e||ma(),r||null,i)}var Xe=class t{static THROW_IF_NOT_FOUND=Qr;static NULL=new ca;static create(e,n){if(Array.isArray(e))return hp({name:""},n,e,"");{let r=e.name??"";return hp({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:t,providedIn:"any",factory:()=>ee(Dp)});static __NG_ELEMENT_ID__=-1},We=new H(""),Fn=(()=>{class t{static __NG_ELEMENT_ID__=f0;static __NG_ENV_ID__=n=>n}return t})(),fp=class extends Fn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return si(this._lView)}onDestroy(e){let n=this._lView;return $p(n,e),()=>jw(n,e)}};function f0(){return new fp(se())}var zt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Tt=new H("",{providedIn:"root",factory:()=>{let t=M(Oe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(zt),e.handleError(n))}}}),cT={provide:On,useValue:()=>void M(zt),multi:!0},p0=new H("",{providedIn:"root",factory:()=>{let t=M(We).defaultView;if(!t)return;let e=M(Tt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Fn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function g0(){return Wt([Dw(()=>void M(p0))])}function ai(t,e){let[n,r,i]=Vf(t,e?.equal),o=n,s=o[mt];return o.set=r,o.update=i,o.asReadonly=uT.bind(o),o}function uT(){let t=this[mt];if(t.readonlyFn===void 0){let e=()=>this();e[mt]=t,t.readonlyFn=e}return t.readonlyFn}var sl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=m0}return t})();function m0(){return new sl(se(),ze())}var kn=class{},wa=new H("",{providedIn:"root",factory:()=>!1});var ng=new H(""),rg=new H(""),dn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Je(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new te(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Co=(()=>{class t{internalPendingTasks=M(dn);scheduler=M(kn);errorHandler=M(Tt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})();function Ta(...t){}var ig=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>new pp})}return t})(),pp=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function ko(t){return{toString:t}.toString()}var al="__parameters__";function C0(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function D0(t,e,n){return ko(()=>{let r=C0(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(al)?u[al]:Object.defineProperty(u,al,{value:[]})[al];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Un=Ew(D0("Optional"),8);function A0(t){return typeof t=="function"}var gl=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function $T(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Oo=(()=>{let t=()=>BT;return t.ngInherit=!0,t})();function BT(t){return t.type.prototype.ngOnChanges&&(t.setInput=N0),R0}function R0(){let t=qT(this),e=t?.current;if(e){let n=t.previous;if(n===pr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function N0(t,e,n,r,i){let o=this.declaredInputs[r],s=qT(t)||P0(t,{previous:pr,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new gl(l&&l.currentValue,n,u===pr),$T(t,e,i,n)}var HT="__ngSimpleChanges__";function qT(t){return t[HT]||null}function P0(t,e){return t[HT]=e}var lT=[];var ve=function(t,e=null,n){for(let r=0;r<lT.length;r++){let i=lT[r];i(t,e,n)}};function M0(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=BT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function x0(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function ll(t,e,n){zT(t,e,3,n)}function dl(t,e,n,r){(t[Q]&3)===n&&zT(t,e,n,r)}function og(t,e){let n=t[Q];(n&3)===e&&(n&=16383,n+=1,t[Q]=n)}function zT(t,e,n,r){let i=r!==void 0?t[ni]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[ni]+=65536),(a<o||o==-1)&&(k0(t,n,e,u),t[ni]=(t[ni]&4294901760)+u+2),u++}function dT(t,e){ve(4,t,e);let n=K(null);try{e.call(t)}finally{K(n),ve(5,t,e)}}function k0(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Q]>>14<t[ni]>>16&&(t[Q]&3)===e&&(t[Q]+=16384,dT(a,o)):dT(a,o)}var Ao=-1,ui=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function O0(t){return(t.flags&8)!==0}function L0(t){return(t.flags&16)!==0}function F0(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];V0(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function WT(t){return t===3||t===4||t===6}function V0(t){return t.charCodeAt(0)===64}function Ro(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?hT(t,n,i,null,e[++r]):hT(t,n,i,null,null))}}return t}function hT(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function GT(t){return t!==Ao}function ml(t){return t&32767}function j0(t){return t>>16}function yl(t,e){let n=j0(t),r=e;for(;n>0;)r=r[ti],n--;return r}var gg=!0;function fT(t){let e=gg;return gg=t,e}var U0=256,KT=U0-1,QT=5,$0=0,hn={};function B0(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ei)&&(r=n[ei]),r==null&&(r=n[ei]=$0++);let i=r&KT,o=1<<i;e.data[t+(i>>QT)]|=o}function vl(t,e){let n=YT(t,e);if(n!==-1)return n;let r=e[q];r.firstCreatePass&&(t.injectorIndex=e.length,sg(r.data,t),sg(e,null),sg(r.blueprint,null));let i=Wg(t,e),o=t.injectorIndex;if(GT(i)){let s=ml(i),a=yl(i,e),u=a[q].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function sg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function YT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Wg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=tb(i),r===null)return Ao;if(n++,i=i[ti],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ao}function mg(t,e,n){B0(t,e,n)}function H0(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(WT(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function JT(t,e,n){if(n&8||t!==void 0)return t;Gu(e,"NodeInjector")}function ZT(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Ln],o=Dt(void 0);try{return i?i.get(e,r,n&8):Sp(e,r,n&8)}finally{Dt(o)}}return JT(r,e,n)}function XT(t,e,n,r=0,i){if(t!==null){if(e[Q]&2048&&!(r&2)){let s=G0(t,e,n,r,hn);if(s!==hn)return s}let o=eb(t,e,n,r,hn);if(o!==hn)return o}return ZT(e,n,r,i)}function eb(t,e,n,r,i){let o=z0(n);if(typeof o=="function"){if(!Zp(e,t,r))return r&1?JT(i,n,r):ZT(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Gu(n);else return s}finally{Xp()}}else if(typeof o=="number"){let s=null,a=YT(t,e),u=Ao,l=r&1?e[Rt][Ft]:null;for((a===-1||r&4)&&(u=a===-1?Wg(t,e):e[a+8],u===Ao||!gT(r,!1)?a=-1:(s=e[q],a=ml(u),e=yl(u,e)));a!==-1;){let h=e[q];if(pT(o,a,h.data)){let p=q0(a,e,n,s,r,l);if(p!==hn)return p}u=e[a+8],u!==Ao&&gT(r,e[q].data[a+8]===l)&&pT(o,a,e)?(s=h,a=ml(u),e=yl(u,e)):a=-1}}return i}function q0(t,e,n,r,i,o){let s=e[q],a=s.data[t+8],u=r==null?vr(a)&&gg:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=hl(a,s,n,u,l);return h!==null?Ca(e,s,h,a,i):hn}function hl(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&n===S||y>=u&&S.type===n)return y}if(i){let y=s[u];if(y&&un(y)&&y.type===n)return u}return null}function Ca(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ui){let a=o;if(a.resolving){let y=yw(s[n]);throw bp(y)}let u=fT(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],h,p=a.injectImpl?Dt(a.injectImpl):null,m=Zp(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&M0(n,s[n],e)}finally{p!==null&&Dt(p),fT(u),a.resolving=!1,Xp()}}return o}function z0(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ei)?t[ei]:void 0;return typeof e=="number"?e>=0?e&KT:W0:e}function pT(t,e,n){let r=1<<t;return!!(n[e+(t>>QT)]&r)}function gT(t,e){return!(t&2)&&!(t&1&&e)}var ci=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return XT(this._tNode,this._lView,e,Yr(r),n)}};function W0(){return new ci(ze(),se())}function Ol(t){return ko(()=>{let e=t.prototype.constructor,n=e[aa]||yg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[aa]||yg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yg(t){return yp(t)?()=>{let e=yg(Ze(t));return e&&e()}:Jr(t)}function G0(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Q]&2048&&!wo(s);){let a=eb(o,s,n,r|2,hn);if(a!==hn)return a;let u=o.parent;if(!u){let l=s[Op];if(l){let h=l.get(n,hn,r);if(h!==hn)return h}u=tb(s),s=s[ti]}o=u}return i}function tb(t){let e=t[q],n=e.type;return n===2?e.declTNode:n===1?t[Ft]:null}function Ll(t){return H0(ze(),t)}function K0(){return Lo(ze(),se())}function Lo(t,e){return new wr(Qt(t,e))}var wr=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=K0}return t})();function Q0(t){return t instanceof wr?t.nativeElement:t}function Y0(){return this._results[Symbol.iterator]()}var _l=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new $e}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Tw(e);(this._changesDetected=!ww(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Y0};function nb(t){return(t.flags&128)===128}var Gg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Gg||{}),rb=new Map,J0=0;function Z0(){return J0++}function X0(t){rb.set(t[ya],t)}function vg(t){rb.delete(t[ya])}var mT="__ngContext__";function No(t,e){cn(e)?(t[mT]=e[ya],X0(e)):t[mT]=e}function ib(t){return sb(t[Eo])}function ob(t){return sb(t[Lt])}function sb(t){for(;t!==null&&!Kt(t);)t=t[Lt];return t}var _g;function Kg(t){_g=t}function ab(){if(_g!==void 0)return _g;if(typeof document<"u")return document;throw new j(210,!1)}var Fl=new H("",{providedIn:"root",factory:()=>eM}),eM="ng",Vl=new H(""),fi=new H("",{providedIn:"platform",factory:()=>"unknown"});var jl=new H("",{providedIn:"root",factory:()=>ab().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tM="h",nM="b";var cb="r";var ub="di";var lb=!1,db=new H("",{providedIn:"root",factory:()=>lb});var rM=(t,e,n,r)=>{};function iM(t,e,n,r){rM(t,e,n,r)}function Qg(t){return(t.flags&32)===32}var oM=()=>null;function hb(t,e,n=!1){return oM(t,e,n)}function fb(t,e){let n=t.contentQueries;if(n!==null){let r=K(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];tl(o),a.contentQueries(2,e[s],s)}}}finally{K(r)}}}function Ig(t,e,n){tl(0);let r=K(null);try{e(t,n)}finally{K(r)}}function pb(t,e,n){if(Fp(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{K(r)}}}var Vn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(Vn||{});var cl;function sM(){if(cl===void 0&&(cl=null,la.trustedTypes))try{cl=la.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return cl}function yT(t){return sM()?.createScriptURL(t)||t}var Il=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qu})`}};function Ul(t){return t instanceof Il?t.changingThisBreaksApplicationSecurity:t}function Yg(t,e){let n=gb(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${qu})`)}return n===e}function gb(t){return t instanceof Il&&t.getTypeName()||null}var aM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mb(t){return t=String(t),t.match(aM)?t:"unsafe:"+t}function cM(t,e){return t.createText(e)}function uM(t,e,n){t.setValue(e,n)}function yb(t,e,n){return t.createElement(e,n)}function El(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vb(t,e,n){t.appendChild(e,n)}function vT(t,e,n,r,i){r!==null?El(t,e,n,r,i):vb(t,e,n)}function _b(t,e,n,r){t.removeChild(null,e,n,r)}function lM(t,e,n){t.setAttribute(e,"style",n)}function dM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ib(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&F0(t,e,r),i!==null&&dM(t,e,i),o!==null&&lM(t,e,o)}var $l=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})($l||{});function Eb(t){let e=Tb();return e?e.sanitize($l.URL,t)||"":Yg(t,"URL")?Ul(t):mb(fa(t))}function wb(t){let e=Tb();if(e)return yT(e.sanitize($l.RESOURCE_URL,t)||"");if(Yg(t,"ResourceURL"))return yT(Ul(t));throw new j(904,!1)}function hM(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?wb:Eb}function Jg(t,e,n){return hM(e,n)(t)}function Tb(){let t=se();return t&&t[sn].sanitizer}function bb(t){return t instanceof Function?t():t}function fM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var Sb="ng-template";function pM(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Zg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Zg(t){return t.type===4&&t.value!==Sb}function gM(t,e,n){let r=t.type===4&&!n?Sb:t.value;return e===r}function mM(t,e,n){let r=4,i=t.attrs,o=i!==null?_M(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Yt(r)&&!Yt(u))return!1;if(s&&Yt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!gM(t,u,n)||u===""&&e.length===1){if(Yt(r))return!1;s=!0}}else if(r&8){if(i===null||!pM(t,i,u,n)){if(Yt(r))return!1;s=!0}}else{let l=e[++a],h=yM(u,i,Zg(t),n);if(h===-1){if(Yt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Yt(r))return!1;s=!0}}}}return Yt(r)||s}function Yt(t){return(t&1)===0}function yM(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return IM(e,t)}function vM(t,e,n=!1){for(let r=0;r<e.length;r++)if(mM(t,e[r],n))return!0;return!1}function _M(t){for(let e=0;e<t.length;e++){let n=t[e];if(WT(n))return e}return t.length}function IM(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function _T(t,e){return t?":not("+e.trim()+")":e}function EM(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Yt(s)&&(e+=_T(o,i),i=""),r=s,o=o||!Yt(r);n++}return i!==""&&(e+=_T(o,i)),e}function wM(t){return t.map(EM).join(",")}function TM(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Yt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var fn={};function Xg(t,e,n,r,i,o,s,a,u,l,h){let p=et+r,m=p+i,y=bM(p,m),S=typeof l=="function"?l():l;return y[q]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function bM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:fn);return n}function SM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Xg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function em(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Gt]=i,p[Q]=r|4|128|8|64|1024,(l!==null||t&&t[Q]&2048)&&(p[Q]|=2048),jp(p),p[Be]=p[ti]=t,p[Pe]=n,p[sn]=s||t&&t[sn],p[De]=a||t&&t[De],p[Ln]=u||t&&t[Ln]||null,p[Ft]=o,p[ya]=Z0(),p[_o]=h,p[Op]=l,p[Rt]=e.type==2?t[Rt]:p,p}function CM(t,e,n){let r=Qt(e,t),i=SM(n),o=t[sn].rendererFactory,s=tm(t,em(t,i,null,Cb(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function Cb(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Db(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function tm(t,e){return t[Eo]?t[kp][Lt]=e:t[Eo]=e,t[kp]=e,e}function DM(t=1){Ab(ct(),se(),_r()+t,!1)}function Ab(t,e,n,r){if(!r)if((e[Q]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ll(e,o,n)}else{let o=t.preOrderHooks;o!==null&&dl(e,o,0,n)}Ir(n)}var Bl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Bl||{});function Eg(t,e,n,r){let i=K(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Bl.SignalBased)!==0&&(u=e[o][mt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):$T(e,u,o,r)}finally{K(i)}}var jn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(jn||{}),AM;function nm(t,e){return AM(t,e)}var li=new Set,Hl=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Hl||{}),pi=new H(""),IT=new Set;function $n(t){IT.has(t)||(IT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Rb=!1,wg=class extends $e{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Mw()&&(this.destroyRef=M(Fn,{optional:!0})??void 0,this.pendingTasks=M(dn,{optional:!0})??void 0)}emit(e){let n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ce&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ut=wg;function Nb(t){let e,n;function r(){t=Ta;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function ET(t){return queueMicrotask(()=>t()),()=>{t=Ta}}var rm="isAngularZone",wl=rm+"_ID",RM=0,_e=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ut(!1);onMicrotaskEmpty=new ut(!1);onStable=new ut(!1);onError=new ut(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Rb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,MM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(rm)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,NM,Ta,Ta);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},NM={};function im(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function PM(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Nb(()=>{t.callbackScheduled=!1,Tg(t),t.isCheckStableRunning=!0,im(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Tg(t)}function MM(t){let e=()=>{PM(t)},n=RM++;t._inner=t._inner.fork({name:"angular",properties:{[rm]:!0,[wl]:n,[wl+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(xM(u))return r.invokeTask(o,s,a,u);try{return wT(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),TT(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return wT(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!kM(u)&&e(),TT(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Tg(t),im(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Tg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function wT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TT(t){t._nesting--,im(t)}var Tl=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ut;onMicrotaskEmpty=new ut;onStable=new ut;onError=new ut;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function xM(t){return Pb(t,"__ignore_ng_zone__")}function kM(t){return Pb(t,"__scheduler_tick__")}function Pb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var om=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),Mb=[0,1,2,3],xb=(()=>{class t{ngZone=M(_e);scheduler=M(kn);errorHandler=M(zt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(pi,{optional:!0})}execute(){let n=this.sequences.size>0;n&&ve(16),this.executing=!0;for(let r of Mb)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ve(17)}register(n){let{view:r}=n;r!==void 0?((r[ri]??=[]).push(n),To(r),r[Q]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Hl.AFTER_NEXT_RENDER,n):n()}static \u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}return t})(),bl=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ri];e&&(this.view[ri]=e.filter(n=>n!==this))}};function kb(t,e){let n=e?.injector??M(Xe);return $n("NgAfterNextRender"),LM(t,n,e,!0)}function OM(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function LM(t,e,n,r){let i=e.get(om);i.impl??=e.get(xb);let o=e.get(pi,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Fn):null,a=e.get(sl,null,{optional:!0}),u=new bl(i.impl,OM(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var Ob=new H("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Lb(t,e,n){let r=t.get(Ob);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function FM(t,e){let n=t.get(Ob);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function VM(t,e){for(let[n,r]of e)Lb(t,r.animateFns)}function bT(t,e,n,r){let i=t?.[ii]?.enter;e!==null&&i&&i.has(n.index)&&VM(r,i)}function Do(t,e,n,r,i,o,s,a){if(i!=null){let u,l=!1;Kt(i)?u=i:cn(i)&&(l=!0,i=i[Gt]);let h=Vt(i);t===0&&r!==null?(bT(a,r,o,n),s==null?vb(e,r,h):El(e,r,h,s||null,!0)):t===1&&r!==null?(bT(a,r,o,n),El(e,r,h,s||null,!0)):t===2?ST(a,o,n,p=>{_b(e,h,l,p)}):t===3&&ST(a,o,n,()=>{e.destroyNode(h)}),u!=null&&JM(e,t,n,u,o,r,s)}}function jM(t,e){Fb(t,e),e[Gt]=null,e[Ft]=null}function UM(t,e,n,r,i,o){r[Gt]=i,r[Ft]=e,zl(t,r,n,1,i,o)}function Fb(t,e){e[sn].changeDetectionScheduler?.notify(9),zl(t,e,e[De],2,null,null)}function $M(t){let e=t[Eo];if(!e)return ag(t[q],t);for(;e;){let n=null;if(cn(e))n=e[Eo];else{let r=e[Ae];r&&(n=r)}if(!n){for(;e&&!e[Lt]&&e!==t;)cn(e)&&ag(e[q],e),e=e[Be];e===null&&(e=t),cn(e)&&ag(e[q],e),n=e&&e[Lt]}e=n}}function sm(t,e){let n=t[oi],r=n.indexOf(e);n.splice(r,1)}function ql(t,e){if(si(e))return;let n=e[De];n.destroyNode&&zl(t,e,n,3,null,null),$M(e)}function ag(t,e){if(si(e))return;let n=K(null);try{e[Q]&=-129,e[Q]|=256,e[Nt]&&ta(e[Nt]),qM(t,e),HM(t,e),e[q].type===1&&e[De].destroy();let r=e[mr];if(r!==null&&Kt(e[Be])){r!==e[Be]&&sm(r,e);let i=e[an];i!==null&&i.detachView(t)}vg(e)}finally{K(n)}}function ST(t,e,n,r){let i=t?.[ii];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&li.add(t),Lb(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),BM(t,r)}else t&&li.delete(t),r(!1)},i)}function BM(t,e){let n=t[ii]?.running;if(n){n.then(()=>{t[ii].running=void 0,li.delete(t),e(!0)});return}e(!1)}function HM(t,e){let n=t.cleanup,r=e[Io];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Io]=null);let i=e[Mn];if(i!==null){e[Mn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[va];if(o!==null){e[va]=null;for(let s of o)s.destroy()}}function qM(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ui)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];ve(4,a,u);try{u.call(a)}finally{ve(5,a,u)}}else{ve(4,i,o);try{o.call(i)}finally{ve(5,i,o)}}}}}function zM(t,e,n){return WM(t,e.parent,n)}function WM(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Gt];if(vr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===Vn.None||i===Vn.Emulated)return null}return Qt(r,n)}function GM(t,e,n){return QM(t,e,n)}function KM(t,e,n){return t.type&40?Qt(t,n):null}var QM=KM,CT;function am(t,e,n,r){let i=zM(t,r,e),o=e[De],s=r.parent||e[Ft],a=GM(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)vT(o,i,n[u],a,!1);else vT(o,i,n,a,!1);CT!==void 0&&CT(o,r,e,n,i)}function ba(t,e){if(e!==null){let n=e.type;if(n&3)return Qt(e,t);if(n&4)return bg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ba(t,r);{let i=t[e.index];return Kt(i)?bg(-1,i):Vt(i)}}else{if(n&128)return ba(t,e.next);if(n&32)return nm(e,t)()||Vt(t[e.index]);{let r=Vb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fr(t[Rt]);return ba(i,r)}else return ba(t,e.next)}}}return null}function Vb(t,e){if(e!==null){let r=t[Rt][Ft],i=e.projection;return r.projection[i]}return null}function bg(t,e){let n=Ae+t+1;if(n<e.length){let r=e[n],i=r[q].firstChild;if(i!==null)return ba(r,i)}return e[yr]}function cm(t,e,n,r,i,o,s){for(;n!=null;){let a=r[Ln];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&No(Vt(u),r),n.flags|=2),!Qg(n))if(l&8)cm(t,e,n.child,r,i,o,!1),Do(e,t,a,i,u,n,o,r);else if(l&32){let h=nm(n,r),p;for(;p=h();)Do(e,t,a,i,p,n,o,r);Do(e,t,a,i,u,n,o,r)}else l&16?YM(t,e,r,n,i,o):Do(e,t,a,i,u,n,o,r);n=s?n.projectionNext:n.next}}function zl(t,e,n,r,i,o){cm(n,r,t.firstChild,e,i,o,!1)}function YM(t,e,n,r,i,o){let s=n[Rt],u=s[Ft].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Do(e,t,n[Ln],i,h,r,o,n)}else{let l=u,h=s[Be];nb(r)&&(l.flags|=128),cm(t,e,l,h,i,o,!0)}}function JM(t,e,n,r,i,o,s){let a=r[yr],u=Vt(r);a!==u&&Do(e,t,n,o,a,i,s);for(let l=Ae;l<r.length;l++){let h=r[l];zl(h[q],h,t,e,o,a)}}function ZM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:jn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=jn.Important),t.setStyle(n,r,i,o))}}function jb(t,e,n,r,i){let o=_r(),s=r&2;try{Ir(-1),s&&e.length>et&&Ab(t,e,et,!1),ve(s?2:0,i,n),n(r,i)}finally{Ir(o),ve(s?3:1,i,n)}}function Ub(t,e,n){sx(t,e,n),(n.flags&64)===64&&ax(t,e,n)}function um(t,e,n=Qt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function XM(t,e,n,r){let o=r.get(db,lb)||n===Vn.ShadowDom,s=t.selectRootElement(e,o);return ex(s),s}function ex(t){tx(t)}var tx=()=>null;function nx(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function rx(t,e,n,r,i,o){let s=e[q];if(lm(t,s,e,n,r)){vr(t)&&ox(e,t.index);return}t.type&3&&(n=nx(n)),ix(t,e,n,r,i,o)}function ix(t,e,n,r,i,o){if(t.type&3){let s=Qt(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function ox(t,e){let n=jt(e,t);n[Q]&16||(n[Q]|=64)}function sx(t,e,n){let r=n.directiveStart,i=n.directiveEnd;vr(n)&&CM(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||vl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=Ca(e,t,s,n);if(No(u,e),o!==null&&hx(e,s-r,u,a,n,o),un(a)){let l=jt(n.index,e);l[Pe]=Ca(e,t,s,n)}}}function ax(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=eT();try{Ir(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];el(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cx(u,l)}}finally{Ir(-1),el(s)}}function cx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ux(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];vM(e,o.selectors,!1)&&(r??=[],un(o)?r.unshift(o):r.push(o))}return r}function lx(t,e,n,r,i,o){let s=Qt(t,e);dx(e[De],s,o,t.value,n,r,i)}function dx(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?fa(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function hx(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Eg(r,n,u,l)}}function $b(t,e,n,r,i){let o=et+n,s=e[q],a=i(s,e,t,r,n);e[o]=a,bo(t,!0);let u=t.type===2;return u?(Ib(e[De],a,t),($w()===0||Ju(t))&&No(a,e),Bw()):No(a,e),il()&&(!u||!Qg(t))&&am(s,e,a,t),t}function Bb(t){let e=t;return Kp()?Kw():(e=e.parent,bo(e,!1)),e}function fx(t,e){let n=t[Ln];if(!n)return;let r;try{r=n.get(Tt,null)}catch{r=null}r?.(e)}function lm(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Eg(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Eg(h,l,r,i),a=!0}return a}function px(t,e){let n=jt(e,t),r=n[q];gx(r,n);let i=n[Gt];i!==null&&n[_o]===null&&(n[_o]=hb(i,n[Ln])),ve(18),dm(r,n,n[Pe]),ve(19,n[Pe])}function gx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function dm(t,e,n){nl(e);try{let r=t.viewQuery;r!==null&&Ig(1,r,n);let i=t.template;i!==null&&jb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[an]?.finishViewCreation(t),t.staticContentQueries&&fb(t,e),t.staticViewQueries&&Ig(2,t.viewQuery,n);let o=t.components;o!==null&&mx(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Q]&=-5,rl()}}function mx(t,e){for(let n=0;n<e.length;n++)px(t,e[n])}function Wl(t,e,n,r){let i=K(null);try{let o=e.tView,a=t[Q]&4096?4096:16,u=em(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[mr]=l;let h=t[an];return h!==null&&(u[an]=h.createEmbeddedView(o)),dm(o,u,n),u}finally{K(i)}}function Da(t,e){return!e||e.firstChild===null||nb(t)}function Aa(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Vt(o)),Kt(o)&&Hb(o,r);let s=n.type;if(s&8)Aa(t,e,n.child,r);else if(s&32){let a=nm(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=Vb(e,n);if(Array.isArray(a))r.push(...a);else{let u=fr(e[Rt]);Aa(u[q],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Hb(t,e){for(let n=Ae;n<t.length;n++){let r=t[n],i=r[q].firstChild;i!==null&&Aa(r[q],r,i,e)}t[yr]!==t[Gt]&&e.push(t[yr])}function qb(t){if(t[ri]!==null){for(let e of t[ri])e.impl.addSequence(e);t[ri].length=0}}var zb=[];function yx(t){return t[Nt]??vx(t)}function vx(t){let e=zb.pop()??Object.create(Ix);return e.lView=t,e}function _x(t){t.lView[Nt]!==t&&(t.lView=null,zb.push(t))}var Ix=ye(V({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{To(t.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function Ex(t){let e=t[Nt]??Object.create(wx);return e.lView=t,e}var wx=ye(V({},Yi),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=fr(t.lView);for(;e&&!Wb(e[q]);)e=fr(e);e&&Up(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function Wb(t){return t.type!==2}function Gb(t){if(t[va]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[va])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Q]&8192)}}var Tx=100;function Kb(t,e=0){let r=t[sn].rendererFactory,i=!1;i||r.begin?.();try{bx(t,e)}finally{i||r.end?.()}}function bx(t,e){let n=Qp();try{Yp(!0),Sg(t,e);let r=0;for(;Ea(t);){if(r===Tx)throw new j(103,!1);r++,Sg(t,1)}}finally{Yp(n)}}function Sx(t,e,n,r){if(si(e))return;let i=e[Q],o=!1,s=!1;nl(e);let a=!0,u=null,l=null;o||(Wb(t)?(l=yx(e),u=Zi(l)):lu()===null?(a=!1,l=Ex(e),u=Zi(l)):e[Nt]&&(ta(e[Nt]),e[Nt]=null));try{jp(e),Yw(t.bindingStartIndex),n!==null&&jb(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&ll(e,y,null)}else{let y=t.preOrderHooks;y!==null&&dl(e,y,0,null),og(e,0)}if(s||Cx(e),Gb(e),Qb(e,0),t.contentQueries!==null&&fb(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&ll(e,y)}else{let y=t.contentHooks;y!==null&&dl(e,y,1),og(e,1)}Ax(t,e);let p=t.components;p!==null&&Jb(e,p,0);let m=t.viewQuery;if(m!==null&&Ig(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&ll(e,y)}else{let y=t.viewHooks;y!==null&&dl(e,y,2),og(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Yu]){for(let y of e[Yu])y();e[Yu]=null}o||(qb(e),e[Q]&=-73)}catch(h){throw o||To(e),h}finally{l!==null&&(Xs(l,u),a&&_x(l)),rl()}}function Qb(t,e){for(let n=ib(t);n!==null;n=ob(n))for(let r=Ae;r<n.length;r++){let i=n[r];Yb(i,e)}}function Cx(t){for(let e=ib(t);e!==null;e=ob(e)){if(!(e[Q]&2))continue;let n=e[oi];for(let r=0;r<n.length;r++){let i=n[r];Up(i)}}}function Dx(t,e,n){ve(18);let r=jt(e,t);Yb(r,n),ve(19,r[Pe])}function Yb(t,e){Zu(t)&&Sg(t,e)}function Sg(t,e){let r=t[q],i=t[Q],o=t[Nt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ea(o)),s||=!1,o&&(o.dirty=!1),t[Q]&=-9217,s)Sx(r,t,r.template,t[Pe]);else if(i&8192){let a=K(null);try{Gb(t),Qb(t,1);let u=r.components;u!==null&&Jb(t,u,1),qb(t)}finally{K(a)}}}function Jb(t,e,n){for(let r=0;r<e.length;r++)Dx(t,e[r],n)}function Ax(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ir(~i);else{let o=i,s=n[++r],a=n[++r];Xw(s,o);let u=e[o];ve(24,u),a(2,u),ve(25,u)}}}finally{Ir(-1)}}function hm(t,e){let n=Qp()?64:1088;for(t[sn].changeDetectionScheduler?.notify(e);t;){t[Q]|=n;let r=fr(t);if(wo(t)&&!r)return t;t=r}return null}function Zb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Xb(t,e){let n=Ae+e;if(n<t.length)return t[n]}function Gl(t,e,n,r=!0){let i=e[q];if(Rx(i,e,t,n),r){let s=bg(n,t),a=e[De],u=a.parentNode(t[yr]);u!==null&&UM(i,t[Ft],a,e,u,s)}let o=e[_o];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function eS(t,e){let n=Ra(t,e);return n!==void 0&&ql(n[q],n),n}function Ra(t,e){if(t.length<=Ae)return;let n=Ae+e,r=t[n];if(r){let i=r[mr];i!==null&&i!==t&&sm(i,r),e>0&&(t[n-1][Lt]=r[Lt]);let o=pa(t,Ae+e);jM(r[q],r);let s=o[an];s!==null&&s.detachView(o[q]),r[Be]=null,r[Lt]=null,r[Q]&=-129}return r}function Rx(t,e,n,r){let i=Ae+r,o=n.length;r>0&&(n[i-1][Lt]=e),r<o-Ae?(e[Lt]=n[i],Cp(n,Ae+r,e)):(n.push(e),e[Lt]=null),e[Be]=n;let s=e[mr];s!==null&&n!==s&&tS(s,e);let a=e[an];a!==null&&a.insertView(t),Xu(e),e[Q]|=128}function tS(t,e){let n=t[oi],r=e[Be];if(cn(r))t[Q]|=2;else{let i=r[Be][Rt];e[Rt]!==i&&(t[Q]|=2)}n===null?t[oi]=[e]:n.push(e)}var Er=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[q];return Aa(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Pe]}set context(e){this._lView[Pe]=e}get destroyed(){return si(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Kt(e)){let n=e[_a],r=n?n.indexOf(this):-1;r>-1&&(Ra(e,r),pa(n,r))}this._attachedToViewContainer=!1}ql(this._lView[q],this._lView)}onDestroy(e){$p(this._lView,e)}markForCheck(){hm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Q]&=-129}reattach(){Xu(this._lView),this._lView[Q]|=128}detectChanges(){this._lView[Q]|=1024,Kb(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wo(this._lView),n=this._lView[mr];n!==null&&!e&&sm(n,this._lView),Fb(this._lView[q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=wo(this._lView),r=this._lView[mr];r!==null&&!n&&tS(r,this._lView),Xu(this._lView)}};var Na=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Nx;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Wl(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Er(o)}}return t})();function Nx(){return fm(ze(),se())}function fm(t,e){return t.type&4?new Na(e,t,Lo(t,e)):null}function Kl(t,e,n,r,i){let o=t.data[e];if(o===null)o=Px(t,e,n,r,i),Zw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Gw();o.injectorIndex=s===null?-1:s.injectorIndex}return bo(o,!0),o}function Px(t,e,n,r,i){let o=Gp(),s=Kp(),a=s?o:o&&o.parent,u=t.data[e]=xx(t,a,n,e,r,i);return Mx(t,u,o,s),u}function Mx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function xx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return qw()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var L6=new RegExp(`^(\\d+)*(${nM}|${tM})*(.*)`);function kx(t){let e=t[Lp]??[],r=t[Be][De],i=[];for(let o of e)o.data[ub]!==void 0?i.push(o):Ox(o,r);t[Lp]=i}function Ox(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[cb];for(;n<i;){let o=r.nextSibling;_b(e,r,!1),r=o,n++}}}var Lx=()=>null,Fx=()=>null;function Cg(t,e){return Lx(t,e)}function nS(t,e,n){return Fx(t,e,n)}var rS=class{},Ql=class{},Dg=class{resolveComponentFactory(e){throw new j(917,!1)}},xa=class{static NULL=new Dg},di=class{},Yl=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Vx()}return t})();function Vx(){let t=se(),e=ze(),n=jt(e.index,t);return(cn(n)?n:t)[De]}var iS=(()=>{class t{static \u0275prov=$({token:t,providedIn:"root",factory:()=>null})}return t})();var fl={},Ag=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,fl,r);return i!==fl||n===fl?i:this.parentInjector.get(e,n,r)}};function Sl(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=mp(i,a);else if(o==2){let u=a,l=e[++s];r=mp(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function yt(t,e=0){let n=se();if(n===null)return ee(t,e);let r=ze();return XT(r,n,Ze(t),e)}function jx(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}Bx(t,e,n,a,o,u,l)}o!==null&&r!==null&&Ux(n,r,o)}function Ux(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function $x(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Bx(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&un(y)&&(u=!0,$x(t,n,m)),mg(vl(n,e),t,y.type)}Kx(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=Db(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=Ro(n.mergedAttrs,y.hostAttrs),qx(t,n,e,p,y),Gx(p,y,i),s!==null&&s.has(y)){let[N,R]=s.get(y);n.directiveToIndex.set(y.type,[p,N+n.directiveStart,R+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}Hx(t,n,o)}function Hx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))DT(0,e,i,r),DT(1,e,i,r),RT(e,r,!1);else{let o=n.get(i);AT(0,e,o,r),AT(1,e,o,r),RT(e,r,!0)}}}function DT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),oS(e,o)}}function AT(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),oS(e,s)}}function oS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function RT(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Zg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function qx(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Jr(i.type,!0)),s=new ui(o,un(i),yt,null);t.blueprint[r]=s,n[r]=s,zx(t,e,r,Db(t,n,i.hostVars,fn),i)}function zx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Wx(s)!=a&&s.push(a),s.push(n,r,o)}}function Wx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Gx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;un(e)&&(n[""]=t)}}function Kx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function sS(t,e,n,r,i,o,s,a){let u=e[q],l=u.consts,h=ln(l,s),p=Kl(u,t,n,r,h);return o&&jx(u,e,p,ln(l,a),i),p.mergedAttrs=Ro(p.mergedAttrs,p.attrs),p.attrs!==null&&Sl(p,p.attrs,!1),p.mergedAttrs!==null&&Sl(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function aS(t,e){x0(t,e),Fp(e)&&t.queries.elementEnd(e)}function Qx(t,e,n,r,i,o){let s=e.consts,a=ln(s,i),u=Kl(e,t,n,r,a);if(u.mergedAttrs=Ro(u.mergedAttrs,u.attrs),o!=null){let l=ln(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Sl(u,u.attrs,!1),u.mergedAttrs!==null&&Sl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Yx(t,e,n){return t[e]=n}function Jx(t,e){return t[e]}function Fo(t,e,n){if(n===fn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function pl(t,e,n){return function r(i){let o=vr(t)?jt(t.index,e):e;hm(o,5);let s=e[Pe],a=NT(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=NT(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function NT(t,e,n,r){let i=K(null);try{return ve(6,e,n),n(r)!==!1}catch(o){return fx(t,o),!1}finally{ve(7,e,n),K(i)}}function cS(t,e,n,r,i,o,s,a){let u=Ju(t),l=!1,h=null;if(!r&&u&&(h=Xx(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Qt(t,n),m=r?r(p):p;iM(n,m,o,a);let y=i.listen(m,o,a);if(!Zx(o)){let S=r?N=>r(Vt(N[t.index])):t.index;uS(S,e,n,o,a,y,!1)}}return l}function Zx(t){return t.startsWith("animation")||t.startsWith("transition")}function Xx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Io],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function uS(t,e,n,r,i,o,s){let a=e.firstCreatePass?Hp(e):null,u=Bp(n),l=u.length;u.push(i,o),a&&a.push(r,t,l,(l+1)*(s?-1:1))}function PT(t,e,n,r,i,o){let s=e[n],a=e[q],l=a.data[n].outputs[r],p=s[l].subscribe(o);uS(t.index,a,e,i,o,p,!0)}var Rg=Symbol("BINDING");var Cl=class extends xa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=gr(e);return new Po(n,this.ngModule)}};function ek(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Bl.SignalBased)!==0};return i&&(o.transform=i),o})}function tk(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function nk(t,e,n){let r=e instanceof Oe?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Ag(n,r):n}function rk(t){let e=t.get(di,null);if(e===null)throw new j(407,!1);let n=t.get(iS,null),r=t.get(kn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function ik(t,e){let n=lS(t);return yb(e,n,n==="svg"?kw:n==="math"?Ow:null)}function lS(t){return(t.selectors[0][0]||"div").toLowerCase()}var Po=class extends Ql{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=ek(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=tk(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=wM(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){ve(22);let a=K(null);try{let u=this.componentDef,l=ok(r,u,s,o),h=nk(u,i||this.ngModule,e),p=rk(h),m=p.rendererFactory.createRenderer(null,u),y=r?XM(m,r,u.encapsulation,h):ik(u,m),S=s?.some(MT)||o?.some(k=>typeof k!="function"&&k.bindings.some(MT)),N=em(null,l,null,512|Cb(u),null,null,p,m,h,null,hb(y,h,!0));N[et]=y,nl(N);let R=null;try{let k=sS(et,N,2,"#host",()=>l.directiveRegistry,!0,0);Ib(m,y,k),No(y,N),Ub(l,N,k),pb(l,k,N),aS(l,k),n!==void 0&&ak(k,this.ngContentSelectors,n),R=jt(k.index,N),N[Pe]=R[Pe],dm(l,N,null)}catch(k){throw R!==null&&vg(R),vg(N),k}finally{ve(23),rl()}return new Dl(this.componentType,N,!!S)}finally{K(a)}}};function ok(t,e,n,r){let i=t?["ng-version","20.3.15"]:TM(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Rg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Rg].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Np(p);u.push(m)}return Xg(0,null,sk(o,s),1,a,u,null,null,null,[i],null)}function sk(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function MT(t){let e=t[Rg].kind;return e==="input"||e==="twoWay"}var Dl=class extends rS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Ia(n[q],et),this.location=Lo(this._tNode,n),this.instance=jt(this._tNode.index,n)[Pe],this.hostView=this.changeDetectorRef=new Er(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=lm(r,i[q],i,e,n);this.previousInputValues.set(e,n);let s=jt(r.index,i);hm(s,1)}get injector(){return new ci(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ak(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Vo=(()=>{class t{static __NG_ELEMENT_ID__=ck}return t})();function ck(){let t=ze();return hS(t,se())}var uk=Vo,dS=class extends uk{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Lo(this._hostTNode,this._hostLView)}get injector(){return new ci(this._hostTNode,this._hostLView)}get parentInjector(){let e=Wg(this._hostTNode,this._hostLView);if(GT(e)){let n=yl(e,this._hostLView),r=ml(e),i=n[q].data[r+8];return new ci(i,n)}else return new ci(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=xT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ae}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Cg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,Da(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let u=e&&!A0(e),l;if(u)l=n;else{let R=n||{};l=R.index,r=R.injector,i=R.projectableNodes,o=R.environmentInjector||R.ngModuleRef,s=R.directives,a=R.bindings}let h=u?e:new Po(gr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let k=(u?p:this.parentInjector).get(Oe,null);k&&(o=k)}let m=gr(h.componentType??{}),y=Cg(this._lContainer,m?.id??null),S=y?.firstChild??null,N=h.create(p,i,S,o,s,a);return this.insertImpl(N.hostView,l,Da(this._hostTNode,y)),N}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Fw(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Be],l=new dS(u,u[Ft],u[Be]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Gl(s,i,o,r),e.attachToViewContainerRef(),Cp(cg(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=xT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ra(this._lContainer,n);r&&(pa(cg(this._lContainer),n),ql(r[q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ra(this._lContainer,n);return r&&pa(cg(this._lContainer),n)!=null?new Er(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function xT(t){return t[_a]}function cg(t){return t[_a]||(t[_a]=[])}function hS(t,e){let n,r=e[t.index];return Kt(r)?n=r:(n=Zb(r,e,null,t),e[t.index]=n,tm(e,n)),dk(n,e,t,r),new dS(n,t,e)}function lk(t,e){let n=t[De],r=n.createComment(""),i=Qt(e,t),o=n.parentNode(i);return El(n,o,r,n.nextSibling(i),!1),r}var dk=pk,hk=()=>!1;function fk(t,e,n){return hk(t,e,n)}function pk(t,e,n,r){if(t[yr])return;let i;n.type&8?i=Vt(r):i=lk(e,n),t[yr]=i}var Ng=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Pg=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)pm(e,n).matches!==null&&this.queries[n].setDirty()}},Mg=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=wk(e):this.predicate=e}},xg=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},kg=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,gk(n,o)),this.matchTNodeWithReadOption(e,n,hl(n,e,o,!1,!1))}else r===Na?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,hl(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===wr||i===Vo||i===Na&&n.type&4)this.addMatch(n.index,-2);else{let o=hl(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function gk(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function mk(t,e){return t.type&11?Lo(t,e):t.type&4?fm(t,e):null}function yk(t,e,n,r){return n===-1?mk(e,t):n===-2?vk(t,e,r):Ca(t,t[q],n,e)}function vk(t,e,n){if(n===wr)return Lo(e,t);if(n===Na)return fm(e,t);if(n===Vo)return hS(e,t)}function fS(t,e,n,r){let i=e[an].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let u=0;s!==null&&u<s.length;u+=2){let l=s[u];if(l<0)a.push(null);else{let h=o[l];a.push(yk(e,h,s[u+1],n.metadata.read))}}i.matches=a}return i.matches}function Og(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=fS(t,e,i,n);for(let a=0;a<o.length;a+=2){let u=o[a];if(u>0)r.push(s[a/2]);else{let l=o[a+1],h=e[-u];for(let p=Ae;p<h.length;p++){let m=h[p];m[mr]===m[Be]&&Og(m[q],m,l,r)}if(h[oi]!==null){let p=h[oi];for(let m=0;m<p.length;m++){let y=p[m];Og(y[q],y,l,r)}}}}}return r}function _k(t,e){return t[an].queries[e].queryList}function Ik(t,e,n){let r=new _l((n&4)===4);return Uw(t,e,r,r.destroy),(e[an]??=new Pg).queries.push(new Ng(r))-1}function Ek(t,e,n,r){let i=ct();if(i.firstCreatePass){let o=ze();Tk(i,new Mg(e,n,r),o.index),bk(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return Ik(i,se(),n)}function wk(t){return t.split(",").map(e=>e.trim())}function Tk(t,e,n){t.queries===null&&(t.queries=new xg),t.queries.track(new kg(e,n))}function bk(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function pm(t,e){return t.queries.getByIndex(e)}function Sk(t,e){let n=t[q],r=pm(n,e);return r.crossesNgTemplate?Og(n,t,e,[]):fS(n,t,r,e)}var Mo=class{},Jl=class{};var Al=class extends Mo{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Rp(e);this._bootstrapComponents=bb(o.bootstrap),this._r3Injector=tg(e,n,[{provide:Mo,useValue:this},{provide:xa,useValue:this.componentFactoryResolver},...r],xn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Rl=class extends Jl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Al(this.moduleType,e,[])}};var Pa=class extends Mo{injector;componentFactoryResolver=new Cl(this);instance=null;constructor(e){super();let n=new Xr([...e.providers,{provide:Mo,useValue:this},{provide:xa,useValue:this.componentFactoryResolver}],e.parent||ma(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ka(t,e,n=null){return new Pa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Ck=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Pp(!1,n.type),i=r.length>0?ka([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(ee(Oe))})}return t})();function gm(t){return ko(()=>{let e=pS(t),n=ye(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Ck).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vn.Emulated,styles:t.styles||At,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&$n("NgStandalone"),gS(n);let r=t.dependencies;return n.directiveDefs=kT(r,Dk),n.pipeDefs=kT(r,Cw),n.id=Nk(n),n})}function Dk(t){return gr(t)||Np(t)}function Zl(t){return ko(()=>({type:t.type,bootstrap:t.bootstrap||At,declarations:t.declarations||At,imports:t.imports||At,exports:t.exports||At,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ak(t,e){if(t==null)return pr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Bl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function Rk(t){if(t==null)return pr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function jo(t){return ko(()=>{let e=pS(t);return gS(e),e})}function pS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||pr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||At,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Ak(t.inputs,e),outputs:Rk(t.outputs),debugInfo:null}}function gS(t){t.features?.forEach(e=>e(t))}function kT(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function Nk(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Pk(t){return Object.getPrototypeOf(t.prototype).constructor}function mS(t){let e=Pk(t.type),n=!0,r=[t];for(;e;){let i;if(un(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=ug(t.inputs),s.declaredInputs=ug(t.declaredInputs),s.outputs=ug(t.outputs);let a=i.hostBindings;a&&Lk(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&kk(t,u),l&&Ok(t,l),Mk(t,i),mw(t.outputs,i.outputs),un(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===mS&&(n=!1)}}e=Object.getPrototypeOf(e)}xk(r)}function Mk(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function xk(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ro(i.hostAttrs,n=Ro(n,i.hostAttrs))}}function ug(t){return t===pr?{}:t===At?[]:t}function kk(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Ok(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function Lk(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Fk(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ro(t.mergedAttrs,t.attrs);let h=t.tView=Xg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),bo(t,!1);let u=Vk(n,e,t,r);il()&&am(n,e,u,t),No(u,e);let l=Zb(u,e,u,t);e[r+et]=l,tm(e,l),fk(l,t,e)}function Nl(t,e,n,r,i,o,s,a,u,l,h){let p=n+et,m;if(e.firstCreatePass){if(m=Kl(e,p,4,s||null,a||null),l!=null){let y=ln(e.consts,l);m.localNames=[];for(let S=0;S<y.length;S+=2)m.localNames.push(y[S],-1)}}else m=e.data[p];return Fk(m,t,e,n,r,i,o,u),l!=null&&um(t,m,h),m}var Vk=jk;function jk(t,e,n,r){return ol(!0),e[De].createComment("")}var mm=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var ym=new H("");function Oa(t){return!!t&&typeof t.then=="function"}function yS(t){return!!t&&typeof t.subscribe=="function"}var vS=new H("");var vm=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=M(vS,{optional:!0})??[];injector=M(Xe);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=He(this.injector,i);if(Oa(o))n.push(o);else if(yS(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xl=new H("");function _S(){Ff(()=>{let t="";throw new j(600,t)})}function IS(t){return t.isBoundToModule}var Uk=10;var gi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Tt);afterRenderManager=M(om);zonelessEnabled=M(wa);rootEffectScheduler=M(ig);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new $e;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(dn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ue(n=>!n))}constructor(){M(pi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=M(Oe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=Xe.NULL){return this._injector.get(_e).run(()=>{ve(10);let s=n instanceof Ql;if(!this._injector.get(vm).done){let S="";throw new j(405,S)}let u;s?u=n:u=this._injector.get(xa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=IS(u)?void 0:this._injector.get(Mo),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(ym,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Sa(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ve(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ve(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Hl.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(n),this.afterTick.next(),ve(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(di,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<Uk;)ve(14),this.synchronizeOnce(),ve(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ea(i))continue;let o=r&&!this.zonelessEnabled?0:1;Kb(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ea(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Sa(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Xl,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Sa(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sa(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function ed(t,e,n,r){let i=se(),o=So();if(Fo(i,o,e)){let s=ct(),a=eg();lx(a,i,t,e,n,r)}return ed}var H6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Lg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function lg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function $k(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=lg(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],S=lg(s,m,u,y,n);if(S!==0){S<0&&t.updateValue(s,y),s--,u--;continue}let N=n(o,l),R=n(s,m),k=n(o,h);if(Object.is(k,R)){let B=n(u,y);Object.is(B,N)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new Pl,i??=LT(t,o,s,n),Fg(t,r,o,k))t.updateValue(o,h),o++,s++;else if(i.has(k))r.set(N,t.detach(o)),s--;else{let B=t.create(o,e[o]);t.attach(o,B),o++,s++}}for(;o<=u;)OT(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=lg(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new Pl,i??=LT(t,o,s,n);let y=n(o,p);if(Fg(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let S=n(o,h);r.set(S,t.detach(o)),s--}}}for(;!l.done;)OT(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function Fg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function OT(t,e,n,r,i){if(Fg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function LT(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Pl=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Bk(t,e,n,r,i,o,s,a){$n("NgControlFlow");let u=se(),l=ct(),h=ln(l.consts,o);return Nl(u,l,t,e,n,r,i,h,256,s,a),_m}function _m(t,e,n,r,i,o,s,a){$n("NgControlFlow");let u=se(),l=ct(),h=ln(l.consts,o);return Nl(u,l,t,e,n,r,i,h,512,s,a),_m}function Hk(t,e){$n("NgControlFlow");let n=se(),r=So(),i=n[r]!==fn?n[r]:-1,o=i!==-1?Ml(n,et+i):void 0,s=0;if(Fo(n,r,t)){let a=K(null);try{if(o!==void 0&&eS(o,s),t!==-1){let u=et+t,l=Ml(n,u),h=$g(n[q],u),p=nS(l,h,n),m=Wl(n,h,e,{dehydratedView:p});Gl(l,m,s,Da(h,p))}}finally{K(a)}}else if(o!==void 0){let a=Xb(o,s);a!==void 0&&(a[Pe]=e)}}var Vg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ae}};var jg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function qk(t,e,n,r,i,o,s,a,u,l,h,p,m){$n("NgControlFlow");let y=se(),S=ct(),N=u!==void 0,R=se(),k=a?s.bind(R[Rt][Pe]):s,B=new jg(N,k);R[et+t]=B,Nl(y,S,t+1,e,n,r,i,ln(S.consts,o),256),N&&Nl(y,S,t+2,u,l,h,p,ln(S.consts,m),512)}var Ug=class extends Lg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ae}at(e){return this.getLView(e)[Pe].$implicit}attach(e,n){let r=n[_o];this.needsIndexUpdate||=e!==this.length,Gl(this.lContainer,n,e,Da(this.templateTNode,r)),Wk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,Gk(this.lContainer,e),Kk(this.lContainer,e)}create(e,n){let r=Cg(this.lContainer,this.templateTNode.tView.ssrId),i=Wl(this.hostLView,this.templateTNode,new Vg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){ql(e[q],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Pe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Pe].$index=e}getLView(e){return Qk(this.lContainer,e)}};function zk(t){let e=K(null),n=_r();try{let r=se(),i=r[q],o=r[n],s=n+1,a=Ml(r,s);if(o.liveCollection===void 0){let l=$g(i,s);o.liveCollection=new Ug(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if($k(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=So(),h=u.length===0;if(Fo(r,l,h)){let p=n+2,m=Ml(r,p);if(h){let y=$g(i,p),S=nS(m,y,r),N=Wl(r,y,void 0,{dehydratedView:S});Gl(m,N,0,Da(y,S))}else i.firstUpdatePass&&kx(m),eS(m,0)}}}finally{K(e)}}function Ml(t,e){return t[e]}function Wk(t,e){if(t.length<=Ae)return;let n=Ae+e,r=t[n],i=r?r[ii]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Ln];FM(o,i),li.delete(r),i.detachedLeaveAnimationFns=void 0}}function Gk(t,e){if(t.length<=Ae)return;let n=Ae+e,r=t[n],i=r?r[ii]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Kk(t,e){return Ra(t,e)}function Qk(t,e){return Xb(t,e)}function $g(t,e){return Ia(t,e)}function ES(t,e,n){let r=se(),i=So();if(Fo(r,i,e)){let o=ct(),s=eg();rx(s,r,t,e,r[De],n)}return ES}function FT(t,e,n,r,i){lm(e,t,n,i?"class":"style",r)}function Im(t,e,n,r){let i=se(),o=i[q],s=t+et,a=o.firstCreatePass?sS(s,i,2,e,ux,Hw(),n,r):o.data[s];if($b(a,i,t,e,bS),Ju(a)){let u=i[q];Ub(u,i,a),pb(u,a,i)}return r!=null&&um(i,a),Im}function Em(){let t=ct(),e=ze(),n=Bb(e);return t.firstCreatePass&&aS(t,n),zp(n)&&Wp(),qp(),n.classesWithoutHost!=null&&O0(n)&&FT(t,n,se(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&L0(n)&&FT(t,n,se(),n.stylesWithoutHost,!1),Em}function td(t,e,n,r){return Im(t,e,n,r),Em(),td}function wS(t,e,n,r){let i=se(),o=i[q],s=t+et,a=o.firstCreatePass?Qx(s,o,2,e,n,r):o.data[s];return $b(a,i,t,e,bS),r!=null&&um(i,a),wS}function TS(){let t=ze(),e=Bb(t);return zp(e)&&Wp(),qp(),TS}var bS=(t,e,n,r,i)=>(ol(!0),yb(e[De],r,sT()));function Yk(){return se()}var La="en-US";var Jk=La;function SS(t){typeof t=="string"&&(Jk=t.toLowerCase().replace(/_/g,"-"))}function nd(t,e,n){let r=se(),i=ct(),o=ze();return Zk(i,r,r[De],o,t,e,n),nd}function CS(t,e,n){let r=se(),i=ct(),o=ze();return(o.type&3||n)&&cS(o,i,r,n,r[De],t,e,pl(o,r,e)),CS}function Zk(t,e,n,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=pl(r,e,o),cS(r,t,e,s,n,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=pl(r,e,o),PT(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=pl(r,e,o),PT(r,e,p,i,i,u)}}function Xk(t=1){return oT(t)}function wm(t,e,n,r){Ek(t,e,n,r)}function Tm(t){let e=se(),n=ct(),r=Jp();tl(r+1);let i=pm(n,r);if(t.dirty&&Lw(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=Sk(e,r);t.reset(o,Q0),t.notifyOnChanges()}return!0}return!1}function bm(){return _k(se(),Jp())}function ul(t,e){return t<<17|e<<2}function hi(t){return t>>17&32767}function eO(t){return(t&2)==2}function tO(t,e){return t&131071|e<<17}function Bg(t){return t|2}function xo(t){return(t&131068)>>2}function dg(t,e){return t&-131069|e<<2}function nO(t){return(t&1)===1}function Hg(t){return t|1}function rO(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=hi(s),u=xo(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||vo(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=hi(t[a+1]);t[r+1]=ul(m,a),m!==0&&(t[m+1]=dg(t[m+1],r)),t[a+1]=tO(t[a+1],r)}else t[r+1]=ul(a,0),a!==0&&(t[a+1]=dg(t[a+1],r)),a=r;else t[r+1]=ul(u,0),a===0?a=r:t[u+1]=dg(t[u+1],r),u=r;l&&(t[r+1]=Bg(t[r+1])),VT(t,h,r,!0),VT(t,h,r,!1),iO(e,h,t,r,o),s=ul(a,u),o?e.classBindings=s:e.styleBindings=s}function iO(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&vo(o,e)>=0&&(n[r+1]=Hg(n[r+1]))}function VT(t,e,n,r){let i=t[n+1],o=e===null,s=r?hi(i):xo(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];oO(u,e)&&(a=!0,t[s+1]=r?Hg(l):Bg(l)),s=r?hi(l):xo(l)}a&&(t[n+1]=r?Bg(i):Hg(i))}function oO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?vo(t,e)>=0:!1}function DS(t,e){return sO(t,e,null,!0),DS}function sO(t,e,n,r){let i=se(),o=ct(),s=Jw(2);if(o.firstUpdatePass&&cO(o,t,s,r),e!==fn&&Fo(i,s,e)){let a=o.data[_r()];fO(o,a,i,i[De],t,i[s+1]=pO(e,n),r,s)}}function aO(t,e){return e>=t.expandoStartIndex}function cO(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[_r()],s=aO(t,n);gO(o,r)&&e===null&&!s&&(e=!1),e=uO(i,o,e,r),rO(i,o,e,n,s,r)}}function uO(t,e,n,r){let i=tT(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=hg(null,t,e,n,r),n=Ma(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=hg(i,t,e,n,r),o===null){let u=lO(t,e,r);u!==void 0&&Array.isArray(u)&&(u=hg(null,t,e,u[1],r),u=Ma(u,e.attrs,r),dO(t,e,r,u))}else o=hO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function lO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(xo(r)!==0)return t[hi(r)]}function dO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[hi(i)]=r}function hO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ma(r,s,n)}return Ma(r,e.attrs,n)}function hg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ma(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Ma(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Sw(t,s,n?!0:e[++o]))}return t===void 0?null:t}function fO(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=nO(l)?jT(u,e,n,i,xo(l),s):void 0;if(!xl(h)){xl(o)||eO(l)&&(o=jT(u,null,n,i,a,s));let p=Vp(_r(),n);ZM(r,s,p,i,o)}}function jT(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===fn&&(m=p?At:void 0);let y=p?Qu(m,r):h===r?m:void 0;if(l&&!xl(y)&&(y=Qu(u,r)),xl(y)&&(a=y,s))return a;let S=t[i+1];i=s?hi(S):xo(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Qu(u,r))}return a}function xl(t){return t!==void 0}function pO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=xn(Ul(t)))),t}function gO(t,e){return(t.flags&(e?8:16))!==0}function mO(t,e=""){let n=se(),r=ct(),i=t+et,o=r.firstCreatePass?Kl(r,i,1,e,null):r.data[i],s=yO(r,n,o,e,t);n[i]=s,il()&&am(r,n,s,o),bo(o,!1)}var yO=(t,e,n,r,i)=>(ol(!0),cM(e[De],r));function vO(t,e,n,r=""){return Fo(t,So(),n)?e+fa(n)+r:fn}function AS(t){return Sm("",t),AS}function Sm(t,e,n){let r=se(),i=vO(r,t,e,n);return i!==fn&&_O(r,_r(),i),Sm}function _O(t,e,n){let r=Vp(e,t);uM(t[De],r,n)}function IO(t,e,n){let r=ct();if(r.firstCreatePass){let i=un(t);qg(n,r.data,r.blueprint,i,!0),qg(e,r.data,r.blueprint,i,!1)}}function qg(t,e,n,r,i){if(t=Ze(t),Array.isArray(t))for(let o=0;o<t.length;o++)qg(t[o],e,n,r,i);else{let o=ct(),s=se(),a=ze(),u=Zr(t)?t:Ze(t.provide),l=xp(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Zr(t)||!t.multi){let y=new ui(l,i,yt,null),S=pg(u,e,i?h:h+m,p);S===-1?(mg(vl(a,s),o,u),fg(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[S]=y,s[S]=y)}else{let y=pg(u,e,h+m,p),S=pg(u,e,h,h+m),N=y>=0&&n[y],R=S>=0&&n[S];if(i&&!R||!i&&!N){mg(vl(a,s),o,u);let k=TO(i?wO:EO,n.length,i,r,l,t);!i&&R&&(n[S].providerFactory=k),fg(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(k),s.push(k)}else{let k=RS(n[i?S:y],l,!i&&r);fg(o,t,y>-1?y:S,k)}!i&&r&&R&&n[S].componentProviders++}}}function fg(t,e,n,r){let i=Zr(e),o=Pw(e);if(i||o){let u=(o?Ze(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function RS(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function pg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function EO(t,e,n,r,i){return zg(this.multi,[])}function wO(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Ca(r,r[q],this.providerFactory.index,i);s=u.slice(0,a),zg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],zg(o,s);return s}function zg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function TO(t,e,n,r,i,o){let s=new ui(t,n,yt,null);return s.multi=[],s.index=e,s.componentProviders=0,RS(s,i,r&&!n),s}function bO(t,e=[]){return n=>{n.providersResolver=(r,i)=>IO(r,i?i(t):t,e)}}function SO(t,e,n){let r=Qw()+t,i=se();return i[r]===fn?Yx(i,r,n?e.call(n):e()):Jx(i,r)}var kl=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Cm=(()=>{class t{compileModuleSync(n){return new Rl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Rp(n),o=bb(i.declarations).reduce((s,a)=>{let u=gr(a);return u&&s.push(new Po(u)),s},[]);return new kl(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var CO=(()=>{class t{zone=M(_e);changeDetectionScheduler=M(kn);applicationRef=M(gi);applicationErrorHandler=M(Tt);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NS=new H("",{factory:()=>!1});function Dm({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new _e(ye(V({},Am()),{scheduleInRootZone:n})),[{provide:_e,useFactory:t},{provide:On,multi:!0,useFactory:()=>{let r=M(CO,{optional:!0});return()=>r.initialize()}},{provide:On,multi:!0,useFactory:()=>{let r=M(AO);return()=>{r.initialize()}}},e===!0?{provide:ng,useValue:!0}:[],{provide:rg,useValue:n??Rb},{provide:Tt,useFactory:()=>{let r=M(_e),i=M(Oe),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(zt),o.handleError(s))})}}}]}function DO(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=Dm({ngZoneFactory:()=>{let i=Am(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&$n("NgZone_CoalesceEvent"),new _e(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Wt([{provide:NS,useValue:!0},{provide:wa,useValue:!1},r])}function Am(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var AO=(()=>{class t{subscription=new Ce;initialized=!1;zone=M(_e);pendingTasks=M(dn);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var PS=(()=>{class t{applicationErrorHandler=M(Tt);appRef=M(gi);taskService=M(dn);ngZone=M(_e);zonelessEnabled=M(wa);tracing=M(pi,{optional:!0});disableScheduling=M(ng,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ce;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wl):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(rg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Tl||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?ET:Nb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ET(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function RO(){return typeof $localize<"u"&&$localize.locale||La}var Rm=new H("",{providedIn:"root",factory:()=>M(Rm,{optional:!0,skipSelf:!0})||RO()});function Bn(t){return fw(t)}function NO(t,e){return pu(t,e?.equal)}var MS=class{[mt];constructor(e){this[mt]=e}destroy(){this[mt].destroy()}};var kS=Symbol("InputSignalNode#UNSET"),UO=ye(V({},gu),{transformFn:void 0,applyValueToInputSignal(t,e){eo(t,e)}});function OS(t,e){let n=Object.create(UO);n.value=t,n.transformFn=e?.transform;function r(){if(Ji(n),n.value===kS){let i=null;throw new j(-950,i)}return n.value}return r[mt]=n,r}var id=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ll(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},$O=new H("");$O.__NG_ELEMENT_ID__=t=>{let e=ze();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new j(204,!1)};function xS(t,e){return OS(t,e)}function BO(t){return OS(kS,t)}var LS=(xS.required=BO,xS);var Nm=new H(""),HO=new H("");function Fa(t){return!t.moduleRef}function qO(t){let e=Fa(t)?t.r3Injector:t.moduleRef.injector,n=e.get(_e);return n.run(()=>{Fa(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Tt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Fa(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Nm);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Nm);s.add(o),t.moduleRef.onDestroy(()=>{Sa(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return WO(r,n,()=>{let o=e.get(dn),s=o.add(),a=e.get(vm);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Rm,La);if(SS(u||La),!e.get(HO,!0))return Fa(t)?e.get(gi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Fa(t)){let h=e.get(gi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return zO?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var zO;function WO(t,e,n){try{let r=n();return Oa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var rd=null;function GO(t=[],e){return Xe.create({name:e,providers:[{provide:ga,useValue:"platform"},{provide:Nm,useValue:new Set([()=>rd=null])},...t]})}function KO(t=[]){if(rd)return rd;let e=GO(t);return rd=e,_S(),QO(e),e}function QO(t){let e=t.get(Vl,null);He(t,()=>{e?.forEach(n=>n())})}function Pm(){return!1}var od=(()=>{class t{static __NG_ELEMENT_ID__=YO}return t})();function YO(t){return JO(ze(),se(),(t&16)===16)}function JO(t,e,n){if(vr(t)&&!n){let r=jt(t.index,e);return new Er(r,r)}else if(t.type&175){let r=e[Rt];return new Er(r,e)}return null}function FS(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;ve(8);try{let o=i?.injector??KO(r),s=[Dm({}),{provide:kn,useExisting:PS},cT,...n||[]],a=new Pa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return qO({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ve(9)}}function sd(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var US=null;function Hn(){return US}function Mm(t){US??=t}var Va=class{},xm=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M($S),providedIn:"platform"})}return t})();var $S=(()=>{class t extends xm{_location;_history;_doc=M(We);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hn().getBaseHref(this._doc)}onPopState(n){let r=Hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Hn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function BS(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function VS(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function br(t){return t&&t[0]!=="?"?`?${t}`:t}var Uo=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(qS),providedIn:"root"})}return t})(),HS=new H(""),qS=(()=>{class t extends Uo{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(We).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return BS(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+br(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+br(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ee(xm),ee(HS,8))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$o=(()=>{class t{_subject=new $e;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=eL(VS(jS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+br(r))}normalize(n){return t.stripTrailingSlash(XO(this._basePath,jS(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+br(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+br(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=br;static joinWithSlash=BS;static stripTrailingSlash=VS;static \u0275fac=function(r){return new(r||t)(ee(Uo))};static \u0275prov=$({token:t,factory:()=>ZO(),providedIn:"root"})}return t})();function ZO(){return new $o(ee(Uo))}function XO(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function jS(t){return t.replace(/\/index.html$/,"")}function eL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function km(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ja=class{};var zS="browser";var Ua=class{_doc;constructor(e){this._doc=e}manager},ad=(()=>{class t extends Ua{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ee(We))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),ud=new H(""),jm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof ad));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof ad);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ee(ud),ee(_e))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Om="ng-app-id";function WS(t){for(let e of t)e.remove()}function GS(t,e){let n=e.createElement("style");return n.textContent=t,n}function nL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Om}="${e}"],link[${Om}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Om),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Fm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var Um=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,nL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,GS);r?.forEach(i=>this.addUsage(i,this.external,Fm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(WS(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])WS(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,GS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Fm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ee(We),ee(Fl),ee(jl,8),ee(fi))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),Lm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$m=/%COMP%/g;var QS="%COMP%",rL=`_nghost-${QS}`,iL=`_ngcontent-${QS}`,oL=!0,sL=new H("",{providedIn:"root",factory:()=>oL});function aL(t){return iL.replace($m,t)}function cL(t){return rL.replace($m,t)}function YS(t,e){return e.map(n=>n.replace($m,t))}var Bm=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new $a(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof cd?i.applyToHost(n):i instanceof Ba&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Vn.Emulated:o=new cd(u,l,r,this.appId,h,s,a,p,m);break;case Vn.ShadowDom:return new Vm(u,l,n,r,s,a,this.nonce,p,m);default:o=new Ba(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ee(jm),ee(Um),ee(Fl),ee(sL),ee(We),ee(_e),ee(jl),ee(pi,8))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),$a=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Lm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(KS(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(KS(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=Lm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Lm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(jn.DashCase|jn.Important)?e.style.setProperty(n,r,i&jn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&jn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Hn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function KS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Vm=class extends $a{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=YS(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=Fm(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ba=class extends $a{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?YS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&li.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cd=class extends Ba{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=aL(h),this.hostAttr=cL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var ld=class t extends Va{supportsDOMEvents=!0;static makeCurrent(){Mm(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uL();return n==null?null:lL(n)}resetBaseElement(){Ha=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return km(document.cookie,e)}},Ha=null;function uL(){return Ha=Ha||document.head.querySelector("base"),Ha?Ha.getAttribute("href"):null}function lL(t){return new URL(t,document.baseURI).pathname}var dL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})(),JS=["alt","control","meta","shift"],hL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},ZS=(()=>{class t extends Ua{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),JS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=hL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JS.forEach(s=>{if(s!==i){let a=fL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ee(We))};static \u0275prov=$({token:t,factory:t.\u0275fac})}return t})();function pL(t,e,n){let r=V({rootComponent:t,platformRef:n?.platformRef},gL(e));return FS(r)}function gL(t){return{appProviders:[...IL,...t?.providers??[]],platformProviders:_L}}function mL(){ld.makeCurrent()}function yL(){return new zt}function vL(){return Kg(document),document}var _L=[{provide:fi,useValue:zS},{provide:Vl,useValue:mL,multi:!0},{provide:We,useFactory:vL}];var IL=[{provide:ga,useValue:"root"},{provide:zt,useFactory:yL},{provide:ud,useClass:ad,multi:!0,deps:[We]},{provide:ud,useClass:ZS,multi:!0,deps:[We]},Bm,Um,jm,{provide:di,useExisting:Bm},{provide:ja,useClass:dL},[]];var XS=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ee(We))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Y="primary",ic=Symbol("RouteTitle"),Gm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function vi(t){return new Gm(t)}function aC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function wL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!pn(t[n],e[n]))return!1;return!0}function pn(t,e){let n=t?Km(t):void 0,r=e?Km(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cC(t[i],e[i]))return!1;return!0}function Km(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function uC(t){return t.length>0?t[t.length-1]:null}function Wn(t){return Xf(t)?t:Oa(t)?Ne(Promise.resolve(t)):W(t)}var TL={exact:dC,subset:hC},lC={exact:bL,subset:SL,ignored:()=>!0};function eC(t,e,n){return TL[n.paths](t.root,e.root,n.matrixParams)&&lC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bL(t,e){return pn(t,e)}function dC(t,e,n){if(!mi(t.segments,e.segments)||!fd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!dC(t.children[r],e.children[r],n))return!1;return!0}function SL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cC(t[n],e[n]))}function hC(t,e,n){return fC(t,e,e.segments,n)}function fC(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!mi(i,n)||e.hasChildren()||!fd(i,n,r))}else if(t.segments.length===n.length){if(!mi(t.segments,n)||!fd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!hC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!mi(t.segments,i)||!fd(t.segments,i,r)||!t.children[Y]?!1:fC(t.children[Y],e,o,r)}}function fd(t,e,n){return e.every((r,i)=>lC[n](t[i].parameters,r.parameters))}var mn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new he([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=vi(this.queryParams),this._queryParamMap}toString(){return AL.serialize(this)}},he=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pd(this)}},Sr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=vi(this.parameters),this._parameterMap}toString(){return gC(this)}};function CL(t,e){return mi(t,e)&&t.every((n,r)=>pn(n.parameters,e[r].parameters))}function mi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function DL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Y&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(e(i,r)))}),n}var oc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>new _i,providedIn:"root"})}return t})(),_i=class{parse(e){let n=new Ym(e);return new mn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${qa(e.root,!0)}`,r=PL(e.queryParams),i=typeof e.fragment=="string"?`#${RL(e.fragment)}`:"";return`${n}${r}${i}`}},AL=new _i;function pd(t){return t.segments.map(e=>gC(e)).join("/")}function qa(t,e){if(!t.hasChildren())return pd(t);if(e){let n=t.children[Y]?qa(t.children[Y],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Y&&r.push(`${i}:${qa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=DL(t,(r,i)=>i===Y?[qa(t.children[Y],!1)]:[`${i}:${qa(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Y]!=null?`${pd(t)}/${n[0]}`:`${pd(t)}/(${n.join("//")})`}}function pC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dd(t){return pC(t).replace(/%3B/gi,";")}function RL(t){return encodeURI(t)}function Qm(t){return pC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gd(t){return decodeURIComponent(t)}function tC(t){return gd(t.replace(/\+/g,"%20"))}function gC(t){return`${Qm(t.path)}${NL(t.parameters)}`}function NL(t){return Object.entries(t).map(([e,n])=>`;${Qm(e)}=${Qm(n)}`).join("")}function PL(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${dd(n)}=${dd(i)}`).join("&"):`${dd(n)}=${dd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var ML=/^[^\/()?;#]+/;function Hm(t){let e=t.match(ML);return e?e[0]:""}var xL=/^[^\/()?;=#]+/;function kL(t){let e=t.match(xL);return e?e[0]:""}var OL=/^[^=?&#]+/;function LL(t){let e=t.match(OL);return e?e[0]:""}var FL=/^[^&#]+/;function VL(t){let e=t.match(FL);return e?e[0]:""}var Ym=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new he([],{}):new he([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new he(e,n)),r}parseSegment(){let e=Hm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Sr(gd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=kL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Hm(this.remaining);i&&(r=i,this.capture(r))}e[gd(n)]=gd(r)}parseQueryParam(e){let n=LL(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=VL(this.remaining);s&&(r=s,this.capture(r))}let i=tC(n),o=tC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Hm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Y);let s=this.parseChildren();n[o??Y]=Object.keys(s).length===1&&s[Y]?s[Y]:new he([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function mC(t){return t.segments.length>0?new he([],{[Y]:t}):t}function yC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=yC(i);if(r===Y&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new he(t.segments,e);return jL(n)}function jL(t){if(t.numberOfChildren===1&&t.children[Y]){let e=t.children[Y];return new he(t.segments.concat(e.segments),e.children)}return t}function Cr(t){return t instanceof mn}function vC(t,e,n=null,r=null){let i=_C(t);return IC(i,e,n,r)}function _C(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new he(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=mC(r);return e??i}function IC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return qm(i,i,i,n,r);let o=UL(e);if(o.toRoot())return qm(i,i,new he([],{}),n,r);let s=$L(o,i,t),a=s.processChildren?Wa(s.segmentGroup,s.index,o.commands):wC(s.segmentGroup,s.index,o.commands);return qm(i,s.segmentGroup,a,n,r)}function md(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Qa(t){return typeof t=="object"&&t!=null&&t.outlets}function qm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=EC(t,e,n);let a=mC(yC(s));return new mn(a,o,i)}function EC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=EC(o,e,n)}),new he(t.segments,r)}var yd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&md(r[0]))throw new j(4003,!1);let i=r.find(Qa);if(i&&i!==uC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function UL(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new yd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new yd(n,e,r)}var qo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function $L(t,e,n){if(t.isAbsolute)return new qo(e,!0,0);if(!n)return new qo(e,!1,NaN);if(n.parent===null)return new qo(n,!0,0);let r=md(t.commands[0])?0:1,i=n.segments.length-1+r;return BL(n,i,t.numberOfDoubleDots)}function BL(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new qo(r,!1,i-o)}function HL(t){return Qa(t[0])?t[0].outlets:{[Y]:t}}function wC(t,e,n){if(t??=new he([],{}),t.segments.length===0&&t.hasChildren())return Wa(t,e,n);let r=qL(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new he(t.segments.slice(0,r.pathIndex),{});return o.children[Y]=new he(t.segments.slice(r.pathIndex),t.children),Wa(o,0,i)}else return r.match&&i.length===0?new he(t.segments,{}):r.match&&!t.hasChildren()?Jm(t,e,n):r.match?Wa(t,0,i):Jm(t,e,n)}function Wa(t,e,n){if(n.length===0)return new he(t.segments,{});{let r=HL(n),i={};if(Object.keys(r).some(o=>o!==Y)&&t.children[Y]&&t.numberOfChildren===1&&t.children[Y].segments.length===0){let o=Wa(t.children[Y],e,n);return new he(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=wC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new he(t.segments,i)}}function qL(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Qa(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!rC(u,l,s))return o;r+=2}else{if(!rC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Qa(o)){let u=zL(o.outlets);return new he(r,u)}if(i===0&&md(n[0])){let u=t.segments[e];r.push(new Sr(u.path,nC(n[0]))),i++;continue}let s=Qa(o)?o.outlets[Y]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&md(a)?(r.push(new Sr(s,nC(a))),i+=2):(r.push(new Sr(s,{})),i++)}return new he(r,{})}function zL(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Jm(new he([],{}),0,r))}),e}function nC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function rC(t,e,n){return t==n.path&&pn(e,n.parameters)}var Ga="imperative",Ge=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(Ge||{}),Mt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Ii=class extends Mt{type=Ge.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zt=class extends Mt{urlAfterRedirects;type=Ge.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(vt||{}),Ya=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Ya||{}),gn=class extends Mt{reason;code;type=Ge.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qn=class extends Mt{reason;code;type=Ge.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Wo=class extends Mt{error;target;type=Ge.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ja=class extends Mt{urlAfterRedirects;state;type=Ge.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vd=class extends Mt{urlAfterRedirects;state;type=Ge.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_d=class extends Mt{urlAfterRedirects;state;shouldActivate;type=Ge.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Id=class extends Mt{urlAfterRedirects;state;type=Ge.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ed=class extends Mt{urlAfterRedirects;state;type=Ge.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wd=class{route;type=Ge.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Td=class{route;type=Ge.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},bd=class{snapshot;type=Ge.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sd=class{snapshot;type=Ge.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cd=class{snapshot;type=Ge.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dd=class{snapshot;type=Ge.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Za=class{},Go=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function WL(t){return!(t instanceof Za)&&!(t instanceof Go)}function GL(t,e){return t.providers&&!t._injector&&(t._injector=ka(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Jt(t){return t.outlet||Y}function KL(t,e){let n=t.filter(r=>Jt(r)===e);return n.push(...t.filter(r=>Jt(r)!==e)),n}function Yo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ad=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Yo(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Jo(this.rootInjector)}},Jo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ad(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ee(Oe))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Zm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Zm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Xm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xm(e,this._root).map(n=>n.value)}};function Zm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Zm(t,n);if(r)return r}return null}function Xm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Xm(t,n);if(r.length)return r.unshift(e),r}return[]}var Pt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ho(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Xa=class extends Rd{snapshot;constructor(e,n){super(e),this.snapshot=n,ay(this,e)}toString(){return this.snapshot.toString()}};function TC(t){let e=QL(t),n=new Je([new Sr("",{})]),r=new Je({}),i=new Je({}),o=new Je({}),s=new Je(""),a=new zn(n,r,o,s,i,Y,t,e.root);return a.snapshot=e.root,new Xa(new Pt(a,[]),e)}function QL(t){let e={},n={},r={},o=new yi([],e,r,"",n,Y,t,null,{});return new ec("",new Pt(o,[]))}var zn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ue(l=>l[ic]))??W(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ue(e=>vi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ue(e=>vi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nd(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&SC(i)&&(r.resolve[ic]=i.title),r}var yi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[ic]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=vi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=vi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ec=class extends Rd{url;constructor(e,n){super(n),this.url=e,ay(this,n)}toString(){return bC(this._root)}};function ay(t,e){e.value._routerState=t,e.children.forEach(n=>ay(t,n))}function bC(t){let e=t.children.length>0?` { ${t.children.map(bC).join(", ")} } `:"";return`${t.value}${e}`}function zm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,pn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),pn(e.params,n.params)||t.paramsSubject.next(n.params),wL(e.url,n.url)||t.urlSubject.next(n.url),pn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ey(t,e){let n=pn(t.params,e.params)&&CL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||ey(t.parent,e.parent))}function SC(t){return typeof t.title=="string"||t.title===null}var CC=new H(""),cy=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Y;activateEvents=new ut;deactivateEvents=new ut;attachEvents=new ut;detachEvents=new ut;routerOutletData=LS();parentContexts=M(Jo);location=M(Vo);changeDetector=M(od);inputBinder=M(kd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new ty(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=jo({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Oo]})}return t})(),ty=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===zn?this.route:e===Jo?this.childContexts:e===CC?this.outletData:this.parent.get(e,n)}},kd=new H("");var uy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=gm({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&td(0,"router-outlet")},dependencies:[cy],encapsulation:2})}return t})();function ly(t){let e=t.children&&t.children.map(ly),n=e?ye(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=uy),n}function YL(t,e,n){let r=tc(t,e._root,n?n._root:void 0);return new Xa(r,e)}function tc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=JL(t,e,n);return new Pt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>tc(t,a)),s}}let r=ZL(e.value),i=e.children.map(o=>tc(t,o));return new Pt(r,i)}}function JL(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return tc(t,r,i);return tc(t,r)})}function ZL(t){return new zn(new Je(t.url),new Je(t.params),new Je(t.queryParams),new Je(t.fragment),new Je(t.data),t.outlet,t.component,t)}var Ko=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},DC="ngNavigationCancelingError";function Pd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Cr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=AC(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function AC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[DC]=!0,n.cancellationCode=e,n}function XL(t){return RC(t)&&Cr(t.url)}function RC(t){return!!t&&t[DC]}var e1=(t,e,n,r)=>ue(i=>(new ny(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ny=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),zm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ho(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ho(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Ho(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ho(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Dd(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Sd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(zm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),zm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Md=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function t1(t,e,n){let r=t._root,i=e?e._root:null;return za(r,i,n,[r.value])}function n1(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Zo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!vp(t)?t:e.get(t):r}function za(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ho(e);return t.children.forEach(s=>{r1(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ka(a,n.getContext(s),i)),i}function r1(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=i1(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Md(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?za(t,e,a?a.children:null,r,i):za(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zo(a.outlet.component,s))}else s&&Ka(e,a,i),i.canActivateChecks.push(new Md(r)),o.component?za(t,null,a?a.children:null,r,i):za(t,null,n,r,i);return i}function i1(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!mi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mi(t.url,e.url)||!pn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ey(t,e)||!pn(t.queryParams,e.queryParams);case"paramsChange":default:return!ey(t,e)}}function Ka(t,e,n){let r=Ho(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ka(s,e.children.getContext(o),n):Ka(s,null,n):Ka(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zo(e.outlet.component,i)):n.canDeactivateChecks.push(new zo(null,i)):n.canDeactivateChecks.push(new zo(null,i))}function sc(t){return typeof t=="function"}function o1(t){return typeof t=="boolean"}function s1(t){return t&&sc(t.canLoad)}function a1(t){return t&&sc(t.canActivate)}function c1(t){return t&&sc(t.canActivateChild)}function u1(t){return t&&sc(t.canDeactivate)}function l1(t){return t&&sc(t.canMatch)}function NC(t){return t instanceof An||t?.name==="EmptyError"}var hd=Symbol("INITIAL_VALUE");function Qo(){return wt(t=>Vu(t.map(e=>e.pipe(Nn(1),np(hd)))).pipe(ue(e=>{for(let n of e)if(n!==!0){if(n===hd)return hd;if(n===!1||d1(n))return n}return!0}),Ct(e=>e!==hd),Nn(1)))}function d1(t){return Cr(t)||t instanceof Ko}function h1(t,e){return ke(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?W(ye(V({},n),{guardsResult:!0})):f1(s,r,i,t).pipe(ke(a=>a&&o1(a)?p1(r,o,t,e):W(a)),ue(a=>ye(V({},n),{guardsResult:a})))})}function f1(t,e,n,r){return Ne(t).pipe(ke(i=>_1(i.component,i.route,n,e,r)),Pn(i=>i!==!0,!0))}function p1(t,e,n,r){return Ne(e).pipe(Kr(i=>po(m1(i.route.parent,r),g1(i.route,r),v1(t,i.path,n),y1(t,i.route,n))),Pn(i=>i!==!0,!0))}function g1(t,e){return t!==null&&e&&e(new Cd(t)),W(!0)}function m1(t,e){return t!==null&&e&&e(new bd(t)),W(!0)}function y1(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return W(!0);let i=r.map(o=>ia(()=>{let s=Yo(e)??n,a=Zo(o,s),u=a1(a)?a.canActivate(e,t):He(s,()=>a(e,t));return Wn(u).pipe(Pn())}));return W(i).pipe(Qo())}function v1(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>n1(s)).filter(s=>s!==null).map(s=>ia(()=>{let a=s.guards.map(u=>{let l=Yo(s.node)??n,h=Zo(u,l),p=c1(h)?h.canActivateChild(r,t):He(l,()=>h(r,t));return Wn(p).pipe(Pn())});return W(a).pipe(Qo())}));return W(o).pipe(Qo())}function _1(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return W(!0);let s=o.map(a=>{let u=Yo(e)??i,l=Zo(a,u),h=u1(l)?l.canDeactivate(t,e,n,r):He(u,()=>l(t,e,n,r));return Wn(h).pipe(Pn())});return W(s).pipe(Qo())}function I1(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return W(!0);let o=i.map(s=>{let a=Zo(s,t),u=s1(a)?a.canLoad(e,n):He(t,()=>a(e,n));return Wn(u)});return W(o).pipe(Qo(),PC(r))}function PC(t){return zf(qe(e=>{if(typeof e!="boolean")throw Pd(t,e)}),ue(e=>e===!0))}function E1(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return W(!0);let o=i.map(s=>{let a=Zo(s,t),u=l1(a)?a.canMatch(e,n):He(t,()=>a(e,n));return Wn(u)});return W(o).pipe(Qo(),PC(r))}var nc=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},rc=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Bo(t){return ho(new nc(t))}function w1(t){return ho(new j(4e3,!1))}function T1(t){return ho(AC(!1,vt.GuardRejected))}var ry=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return W(r);if(i.numberOfChildren>1||!i.children[Y])return w1(`${e.redirectTo}`);i=i.children[Y]}}applyRedirectCommands(e,n,r,i,o){return b1(n,i,o).pipe(ue(s=>{if(s instanceof mn)throw new rc(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new rc(a);return a}))}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new mn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new he(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function b1(t,e,n){if(typeof t=="string")return W(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Wn(He(n,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var iy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function S1(t,e,n,r,i){let o=MC(t,e,n);return o.matched?(r=GL(e,r),E1(r,e,n,i).pipe(ue(s=>s===!0?o:V({},iy)))):W(o)}function MC(t,e,n){if(e.path==="**")return C1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},iy):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||aC)(n,t,e);if(!i)return V({},iy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function C1(t){return{matched:!0,parameters:t.length>0?uC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function iC(t,e,n,r){return n.length>0&&R1(t,n,r)?{segmentGroup:new he(e,A1(r,new he(n,t.children))),slicedSegments:[]}:n.length===0&&N1(t,n,r)?{segmentGroup:new he(t.segments,D1(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new he(t.segments,t.children),slicedSegments:n}}function D1(t,e,n,r){let i={};for(let o of n)if(Od(t,e,o)&&!r[Jt(o)]){let s=new he([],{});i[Jt(o)]=s}return V(V({},r),i)}function A1(t,e){let n={};n[Y]=e;for(let r of t)if(r.path===""&&Jt(r)!==Y){let i=new he([],{});n[Jt(r)]=i}return n}function R1(t,e,n){return n.some(r=>Od(t,e,r)&&Jt(r)!==Y)}function N1(t,e,n){return n.some(r=>Od(t,e,r))}function Od(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function P1(t,e,n){return e.length===0&&!t.children[n]}var oy=class{};function M1(t,e,n,r,i,o,s="emptyOnly"){return new sy(t,e,n,r,i,s,o).recognize()}var x1=31,sy=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ry(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=iC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ue(({children:n,rootSnapshot:r})=>{let i=new Pt(r,n),o=new ec("",i),s=vC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new yi([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Y,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Y,n).pipe(ue(r=>({children:r,rootSnapshot:n})),Rn(r=>{if(r instanceof rc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof nc?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(ue(s=>s instanceof Pt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(Kr(s=>{let a=r.children[s],u=KL(n,s);return this.processSegmentGroup(e,u,a,s,i)}),tp((s,a)=>(s.push(...a),s)),hr(null),ep(),ke(s=>{if(s===null)return Bo(r);let a=xC(s);return k1(a),W(a)}))}processSegment(e,n,r,i,o,s,a){return Ne(n).pipe(Kr(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Rn(l=>{if(l instanceof nc)return W(null);throw l}))),Pn(u=>!!u),Rn(u=>{if(NC(u))return P1(r,i,o)?W(new oy):Bo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return Jt(r)!==s&&(s===Y||!Od(i,o,r))?Bo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Bo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=MC(n,i,o);if(!u)return Bo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x1&&(this.allowRedirects=!1));let y=new yi(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,oC(i),Jt(i),i.component??i._loadedComponent??null,i,sC(i)),S=Nd(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(wt(R=>this.applyRedirects.lineralizeSegments(i,R)),ke(R=>this.processSegment(e,r,n,R.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=S1(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(wt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,S=new yi(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,oC(r),Jt(r),r.component??r._loadedComponent??null,r,sC(r)),N=Nd(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(N.params),S.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:k}=iC(n,m,y,l);if(k.length===0&&R.hasChildren())return this.processChildren(h,l,R,S).pipe(ue(G=>new Pt(S,G)));if(l.length===0&&k.length===0)return W(new Pt(S,[]));let B=Jt(r)===o;return this.processSegment(h,l,R,k,B?Y:o,!0,S).pipe(ue(G=>new Pt(S,G instanceof Pt?[G]:[])))}))):Bo(n)))}getChildConfig(e,n,r){return n.children?W({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?W({routes:n._loadedRoutes,injector:n._loadedInjector}):I1(e,n,r,this.urlSerializer).pipe(ke(i=>i?this.configLoader.loadChildren(e,n).pipe(qe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):T1(n))):W({routes:[],injector:e})}};function k1(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}function O1(t){let e=t.value.routeConfig;return e&&e.path===""}function xC(t){let e=[],n=new Set;for(let r of t){if(!O1(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=xC(r.children);e.push(new Pt(r.value,i))}return e.filter(r=>!n.has(r))}function oC(t){return t.data||{}}function sC(t){return t.resolve||{}}function L1(t,e,n,r,i,o){return ke(s=>M1(t,e,n,r,s.extractedUrl,i,o).pipe(ue(({state:a,tree:u})=>ye(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function F1(t,e){return ke(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return W(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of kC(u))s.add(l);let a=0;return Ne(s).pipe(Kr(u=>o.has(u)?V1(u,r,t,e):(u.data=Nd(u,u.parent,t).resolve,W(void 0))),qe(()=>a++),go(1),ke(u=>a===s.size?W(n):It))})}function kC(t){let e=t.children.map(n=>kC(n)).flat();return[t,...e]}function V1(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!SC(i)&&(o[ic]=i.title),ia(()=>(t.data=Nd(t,t.parent,n).resolve,j1(o,t,e,r).pipe(ue(s=>(t._resolvedData=s,t.data=V(V({},t.data),s),null)))))}function j1(t,e,n,r){let i=Km(t);if(i.length===0)return W({});let o={};return Ne(i).pipe(ke(s=>U1(t[s],e,n,r).pipe(Pn(),qe(a=>{if(a instanceof Ko)throw Pd(new _i,a);o[s]=a}))),go(1),ue(()=>o),Rn(s=>NC(s)?It:ho(s)))}function U1(t,e,n,r){let i=Yo(e)??r,o=Zo(t,i),s=o.resolve?o.resolve(e,n):He(i,()=>o(e,n));return Wn(s)}function Wm(t){return wt(e=>{let n=t(e);return n?Ne(n).pipe(ue(()=>e)):W(e)})}var dy=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Y);return r}getResolvedTitleForRoute(n){return n.data[ic]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(OC),providedIn:"root"})}return t})(),OC=(()=>{class t extends dy{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ee(XS))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Xo=new H("",{providedIn:"root",factory:()=>({})}),ac=new H(""),LC=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=M(Cm);loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return W(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Wn(He(n,()=>r.loadComponent())).pipe(ue(VC),wt(jC),qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),oa(()=>{this.componentLoaders.delete(r)})),o=new ao(i,()=>new $e).pipe(so());return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return W({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=FC(r,this.compiler,n,this.onLoadEndListener).pipe(oa(()=>{this.childrenLoaders.delete(r)})),s=new ao(o,()=>new $e).pipe(so());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function FC(t,e,n,r){return Wn(He(n,()=>t.loadChildren())).pipe(ue(VC),wt(jC),ke(i=>i instanceof Jl||Array.isArray(i)?W(i):Ne(e.compileModuleAsync(i))),ue(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(ac,[],{optional:!0,self:!0}).flat()),{routes:s.map(ly),injector:o}}))}function $1(t){return t&&typeof t=="object"&&"default"in t}function VC(t){return $1(t)?t.default:t}function jC(t){return W(t)}var Ld=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(B1),providedIn:"root"})}return t})(),B1=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),UC=new H("");var $C=new H(""),BC=(()=>{class t{currentNavigation=ai(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new $e;transitionAbortWithErrorSubject=new $e;configLoader=M(LC);environmentInjector=M(Oe);destroyRef=M(Fn);urlSerializer=M(oc);rootContexts=M(Jo);location=M($o);inputBindingEnabled=M(kd,{optional:!0})!==null;titleStrategy=M(dy);options=M(Xo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=M(Ld);createViewTransition=M(UC,{optional:!0});navigationErrorHandler=M($C,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>W(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new wd(i)),r=i=>this.events.next(new Td(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Bn(()=>{this.transitions?.next(ye(V({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(n){return this.transitions=new Je(null),this.transitions.pipe(Ct(r=>r!==null),wt(r=>{let i=!1;return W(r).pipe(wt(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),It;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new qn(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ya.IgnoredSameUrlNavigation)),o.resolve(!1),It;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return W(o).pipe(wt(u=>(this.events.next(new Ii(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?It:Promise.resolve(u))),L1(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Ja(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:m}=o,y=new Ii(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=TC(this.rootComponentType).snapshot;return this.currentTransition=r=ye(V({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:ye(V({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=l,N)),W(r)}else return this.events.next(new qn(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ya.IgnoredByUrlHandlingStrategy)),o.resolve(!1),It}),qe(o=>{let s=new vd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),ue(o=>(this.currentTransition=r=ye(V({},o),{guards:t1(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),h1(this.environmentInjector,o=>this.events.next(o)),qe(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Pd(this.urlSerializer,o.guardsResult);let s=new _d(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Ct(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",vt.GuardRejected),!1)),Wm(o=>{if(o.guards.canActivateChecks.length!==0)return W(o).pipe(qe(s=>{let a=new Id(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),wt(s=>{let a=!1;return W(s).pipe(F1(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",vt.NoDataFromResolver)}}))}),qe(s=>{let a=new Ed(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),Wm(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Yo(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(qe(h=>{a.component=h}),ue(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return Vu(s(o.targetSnapshot.root)).pipe(hr(null),Nn(1))}),Wm(()=>this.afterPreactivation()),wt(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ne(a).pipe(ue(()=>r)):W(r)}),ue(o=>{let s=YL(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=ye(V({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),qe(()=>{this.events.next(new Za)}),e1(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Nn(1),Uu(new te(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Ct(()=>!i&&!r.targetRouterState),qe(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",vt.Aborted)}))),qe({next:o=>{i=!0,this.lastSuccessfulNavigation=Bn(this.currentNavigation),this.events.next(new Zt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Uu(this.transitionAbortWithErrorSubject.pipe(qe(o=>{throw o}))),oa(()=>{i||this.cancelNavigationTransition(r,"",vt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rn(o=>{if(this.destroyed)return r.resolve(!1),It;if(i=!0,RC(o))this.events.next(new gn(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),XL(o)?this.events.next(new Go(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Wo(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=He(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ko){let{message:u,cancellationCode:l}=Pd(this.urlSerializer,a);this.events.next(new gn(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new Go(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return It}))}))}cancelNavigationTransition(n,r,i){let o=new gn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Bn(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function H1(t){return t!==Ga}var HC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(q1),providedIn:"root"})}return t})(),xd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},q1=(()=>{class t extends xd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ol(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),qC=(()=>{class t{urlSerializer=M(oc);options=M(Xo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=M($o);urlHandlingStrategy=M(Ld);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof mn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=TC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:()=>M(z1),providedIn:"root"})}return t})(),z1=(()=>{class t extends qC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Ii?this.updateStateMemento():n instanceof qn?this.commitTransition(r):n instanceof Ja?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof gn&&n.code!==vt.SupersededByNewNavigation&&n.code!==vt.Redirect?this.restoreHistory(r):n instanceof Wo?this.restoreHistory(r,!0):n instanceof Zt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=V(V({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=V(V({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ol(t)))(i||t)}})();static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hy(t,e){t.events.pipe(Ct(n=>n instanceof Zt||n instanceof gn||n instanceof Wo||n instanceof qn),ue(n=>n instanceof Zt||n instanceof qn?0:(n instanceof gn?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?2:1),Ct(n=>n!==2),Nn(1)).subscribe(()=>{e()})}var W1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},es=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=M(mm);stateManager=M(qC);options=M(Xo,{optional:!0})||{};pendingTasks=M(dn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=M(BC);urlSerializer=M(oc);location=M($o);urlHandlingStrategy=M(Ld);injector=M(Oe);_events=new $e;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=M(HC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=M(ac,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!M(kd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ce;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Bn(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gn&&r.code!==vt.Redirect&&r.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zt)this.navigated=!0;else if(r instanceof Go){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||H1(i.source)},s);this.scheduleNavigation(a,Ga,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}WL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ga,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(Tt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Bn(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(ly),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=_C(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return IC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Cr(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ga,null,r)}navigate(n,r={skipLocationChange:!1}){return K1(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(ua(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},W1):r===!1?i=V({},G1):i=r,Cr(n))return eC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return eC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return hy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function K1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}var Fd=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=ai(null);get href(){return Bn(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new $e;applicationErrorHandler=M(Tt);options=M(Xo,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(M(new id("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Zt&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Cr(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Cr(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(yt(es),yt(zn),Ll("tabindex"),yt(Yl),yt(wr),yt(Uo))};static \u0275dir=jo({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&nd("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ed("href",i.reactiveHref(),Jg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",sd],skipLocationChange:[2,"skipLocationChange","skipLocationChange",sd],replaceUrl:[2,"replaceUrl","replaceUrl",sd],routerLink:"routerLink"},features:[Oo]})}return t})(),Y1=(()=>{class t{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new ut;constructor(n,r,i,o,s){this.router=n,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=n.events.subscribe(a=>{a instanceof Zt&&this.update()})}ngAfterContentInit(){W(this.links.changes,W(null)).pipe(fo()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let n=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=Ne(n).pipe(fo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(n){let r=Array.isArray(n)?n:n.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(n){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let n=this.hasActiveLinks();this.classes.forEach(r=>{n?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),n&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==n&&(this._isActive=n,this.cdr.markForCheck(),this.isActiveChange.emit(n))})}isLinkActive(n){let r=J1(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?n.isActive(o,r):!1}}hasActiveLinks(){let n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.links.some(n)}static \u0275fac=function(r){return new(r||t)(yt(es),yt(wr),yt(Yl),yt(od),yt(Fd,8))};static \u0275dir=jo({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&wm(o,Fd,5),r&2){let s;Tm(s=bm())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[Oo]})}return t})();function J1(t){return!!t.paths}var Z1=new H("");function X1(t,...e){return Wt([{provide:ac,multi:!0,useValue:t},[],{provide:zn,useFactory:eF,deps:[es]},{provide:Xl,multi:!0,useFactory:tF},e.map(n=>n.\u0275providers)])}function eF(t){return t.routerState.root}function tF(){let t=M(Xe);return e=>{let n=t.get(gi);if(e!==n.components[0])return;let r=t.get(es),i=t.get(nF);t.get(rF)===1&&r.initialNavigation(),t.get(iF,null,{optional:!0})?.setUpPreloading(),t.get(Z1,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var nF=new H("",{factory:()=>new $e}),rF=new H("",{providedIn:"root",factory:()=>1});var iF=new H("");var zC=()=>{};var KC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oF=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Vd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new py;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},py=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},sF=function(t){let e=KC(t);return Vd.encodeByteArray(e,!0)},uc=function(t){return sF(t).replace(/\./g,"")},jd=function(t){try{return Vd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function my(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aF=()=>my().__FIREBASE_DEFAULTS__,cF=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},uF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&jd(t[1]);return e&&JSON.parse(e)},Ud=()=>{try{return zC()||aF()||cF()||uF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QC=t=>{var e,n;return(n=(e=Ud())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},YC=t=>{let e=QC(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yy=()=>{var t;return(t=Ud())===null||t===void 0?void 0:t.config},JC=t=>{var e;return(e=Ud())===null||e===void 0?void 0:e[`_${t}`]};var Ei=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function wi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}function vy(t){return D(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function ZC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uc(JSON.stringify(n)),uc(JSON.stringify(s)),""].join(".")}var cc={};function lF(){let t={prod:[],emulator:[]};for(let e of Object.keys(cc))cc[e]?t.emulator.push(e):t.prod.push(e);return t}function dF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var WC=!1;function _y(t,e){if(typeof window>"u"||typeof document>"u"||!wi(window.location.host)||cc[t]===e||cc[t]||WC)return;cc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=lF().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{WC=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=dF(r),y=n("text"),S=document.getElementById(y)||document.createElement("span"),N=n("learnmore"),R=document.getElementById(N)||document.createElement("a"),k=n("preprendIcon"),B=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let G=m.element;a(G),h(R,N);let Ie=l();u(B,k),G.append(B,S,R,Ie),document.body.appendChild(G)}o?(S.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function hF(){var t;let e=(t=Ud())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rD(){return!hF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lc(){try{return typeof indexedDB=="object"}catch{return!1}}function iD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var fF="FirebaseError",Ut=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fF,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}},Xt=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?pF(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ut(i,a,r)}};function pF(t,e){return t.replace(gF,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var gF=/\{\$([^}]+)}/g;function Ti(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(GC(o)&&GC(s)){if(!Ti(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function GC(t){return t!==null&&typeof t=="object"}function Iy(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oD(t,e){let n=new gy(t,e);return n.subscribe.bind(n)}var gy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=fy),i.error===void 0&&(i.error=fy),i.complete===void 0&&(i.complete=fy);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mF(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fy(){}var mJ=14400*1e3;function tt(t){return t&&t._delegate?t._delegate:t}var _t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var bi="[DEFAULT]";var Ey=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ei;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vF(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return D(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function yF(t){return t===bi?void 0:t}function vF(t){return t.instantiationMode==="EAGER"}var $d=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ey(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var _F=[],ie=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(ie||{}),IF={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},EF=ie.INFO,wF={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},TF=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=wF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},yn=class{constructor(e){this.name=e,this._logLevel=EF,this._logHandler=TF,this._userLogHandler=null,_F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}};var bF=(t,e)=>e.some(n=>t instanceof n),sD,aD;function SF(){return sD||(sD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CF(){return aD||(aD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var cD=new WeakMap,Ty=new WeakMap,uD=new WeakMap,wy=new WeakMap,Sy=new WeakMap;function DF(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(vn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&cD.set(n,t)}).catch(()=>{}),Sy.set(e,t),e}function AF(t){if(Ty.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Ty.set(t,e)}var by={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ty.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return vn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lD(t){by=t(by)}function RF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Bd(this),e,...n);return uD.set(r,e.sort?e.sort():[e]),vn(r)}:CF().includes(t)?function(...e){return t.apply(Bd(this),e),vn(cD.get(this))}:function(...e){return vn(t.apply(Bd(this),e))}}function NF(t){return typeof t=="function"?RF(t):(t instanceof IDBTransaction&&AF(t),bF(t,SF())?new Proxy(t,by):t)}function vn(t){if(t instanceof IDBRequest)return DF(t);if(wy.has(t))return wy.get(t);let e=NF(t);return e!==t&&(wy.set(t,e),Sy.set(e,t)),e}var Bd=t=>Sy.get(t);function hD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=vn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(vn(s.result),u.oldVersion,u.newVersion,vn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var PF=["get","getKey","getAll","getAllKeys","count"],MF=["put","add","delete","clear"],Cy=new Map;function dD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=MF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PF.includes(n)))return;let o=function(s,...a){return D(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Cy.set(e,o),o}lD(t=>ye(V({},t),{get:(e,n,r)=>dD(e,n)||t.get(e,n,r),has:(e,n)=>!!dD(e,n)||t.has(e,n)}));var Ay=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xF(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function xF(t){let e=t.getComponent();return e?.type==="VERSION"}var Ry="@firebase/app",fD="0.13.2";var Gn=new yn("@firebase/app"),kF="@firebase/app-compat",OF="@firebase/analytics-compat",LF="@firebase/analytics",FF="@firebase/app-check-compat",VF="@firebase/app-check",jF="@firebase/auth",UF="@firebase/auth-compat",$F="@firebase/database",BF="@firebase/data-connect",HF="@firebase/database-compat",qF="@firebase/functions",zF="@firebase/functions-compat",WF="@firebase/installations",GF="@firebase/installations-compat",KF="@firebase/messaging",QF="@firebase/messaging-compat",YF="@firebase/performance",JF="@firebase/performance-compat",ZF="@firebase/remote-config",XF="@firebase/remote-config-compat",eV="@firebase/storage",tV="@firebase/storage-compat",nV="@firebase/firestore",rV="@firebase/ai",iV="@firebase/firestore-compat",oV="firebase",sV="11.10.0";var Ny="[DEFAULT]",aV={[Ry]:"fire-core",[kF]:"fire-core-compat",[LF]:"fire-analytics",[OF]:"fire-analytics-compat",[VF]:"fire-app-check",[FF]:"fire-app-check-compat",[jF]:"fire-auth",[UF]:"fire-auth-compat",[$F]:"fire-rtdb",[BF]:"fire-data-connect",[HF]:"fire-rtdb-compat",[qF]:"fire-fn",[zF]:"fire-fn-compat",[WF]:"fire-iid",[GF]:"fire-iid-compat",[KF]:"fire-fcm",[QF]:"fire-fcm-compat",[YF]:"fire-perf",[JF]:"fire-perf-compat",[ZF]:"fire-rc",[XF]:"fire-rc-compat",[eV]:"fire-gcs",[tV]:"fire-gcs-compat",[nV]:"fire-fst",[iV]:"fire-fst-compat",[rV]:"fire-vertex","fire-js":"fire-js",[oV]:"fire-js-all"};var dc=new Map,cV=new Map,Py=new Map;function pD(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function en(t){let e=t.name;if(Py.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Py.set(e,t);for(let n of dc.values())pD(n,t);for(let n of cV.values())pD(n,t);return!0}function Hd(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t==null?!1:t.settings!==void 0}var uV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Xt("app","Firebase",uV);var My=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}};var ts=sV;function Oy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ny,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Dr.create("bad-app-name",{appName:String(i)});if(n||(n=yy()),!n)throw Dr.create("no-options");let o=dc.get(i);if(o){if(Ti(n,o.options)&&Ti(r,o.config))return o;throw Dr.create("duplicate-app",{appName:i})}let s=new $d(i);for(let u of Py.values())s.addComponent(u);let a=new My(n,r,s);return dc.set(i,a),a}function ns(t=Ny){let e=dc.get(t);if(!e&&t===Ny&&yy())return Oy();if(!e)throw Dr.create("no-app",{appName:t});return e}function qd(){return Array.from(dc.values())}function Me(t,e,n){var r;let i=(r=aV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}en(new _t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var lV="firebase-heartbeat-database",dV=1,hc="firebase-heartbeat-store",Dy=null;function vD(){return Dy||(Dy=hD(lV,dV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(hc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),Dy}function hV(t){return D(this,null,function*(){try{let n=(yield vD()).transaction(hc),r=yield n.objectStore(hc).get(_D(t));return yield n.done,r}catch(e){if(e instanceof Ut)Gn.warn(e.message);else{let n=Dr.create("idb-get",{originalErrorMessage:e?.message});Gn.warn(n.message)}}})}function gD(t,e){return D(this,null,function*(){try{let r=(yield vD()).transaction(hc,"readwrite");yield r.objectStore(hc).put(e,_D(t)),yield r.done}catch(n){if(n instanceof Ut)Gn.warn(n.message);else{let r=Dr.create("idb-set",{originalErrorMessage:n?.message});Gn.warn(r.message)}}})}function _D(t){return`${t.name}!${t.options.appId}`}var fV=1024,pV=30,xy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ky(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return D(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=mD();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>pV){let s=mV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gn.warn(r)}})}getHeartbeatsHeader(){return D(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=mD(),{heartbeatsToSend:r,unsentEntries:i}=gV(this._heartbeatsCache.heartbeats),o=uc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Gn.warn(n),""}})}};function mD(){return new Date().toISOString().substring(0,10)}function gV(t,e=fV){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),yD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ky=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return D(this,null,function*(){return lc()?iD().then(()=>!0).catch(()=>!1):!1})}read(){return D(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield hV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return D(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return gD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return D(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return gD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function yD(t){return uc(JSON.stringify({version:2,heartbeats:t})).length}function mV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function yV(t){en(new _t("platform-logger",e=>new Ay(e),"PRIVATE")),en(new _t("heartbeat",e=>new xy(e),"PRIVATE")),Me(Ry,fD,t),Me(Ry,fD,"esm2017"),Me("fire-js","")}yV("");var vV="firebase",_V="11.10.0";Me(vV,_V,"app");function ID(t){t===void 0&&(t=M(Xe));let e=t.get(Co);return n=>new te(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var Ci=new yo("ANGULARFIRE2_VERSION");function Wd(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var is=(t,e)=>{let n=e?[e]:qd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},rs=(function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t})(rs||{}),ED=Pm()&&typeof Zone<"u"?rs.WARN:rs.SILENT;var zd=class{zone;delegate;constructor(e,n=Jf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},Di=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=M(_e);this.outsideAngular=n.runOutsideAngular(()=>new zd(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new zd(typeof Zone>"u"?void 0:Zone.current,Yf))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),wD=!1;function IV(t,e){!wD&&(ED>rs.SILENT||Pm())&&(wD=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),ED>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function EV(t){let e=M(_e,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Si(t){let e=M(_e,{optional:!0});return e?e.run(()=>t()):t()}var wV=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),He(n,()=>Si(()=>t.apply(void 0,r)))),nt=(t,e,n)=>(n||=e?rs.WARN:rs.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=M(Di),s=M(Co),a=M(Oe)}catch{return IV(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Si(()=>s.add())),i[l]=wV(i[l],r,a));let u=EV(()=>t.apply(this,i));return e?u instanceof te?u.pipe(dr(o.outsideAngular),lr(o.insideAngular),ID(a)):u instanceof Promise?Si(()=>{let l=s.add();return new Promise((h,p)=>{u.then(m=>He(a,()=>Si(()=>h(m))),m=>He(a,()=>Si(()=>p(m)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Si(()=>u):u instanceof te?u.pipe(dr(o.outsideAngular),lr(o.insideAngular)):Si(()=>u)});var Ai=class{constructor(e){return e}},fc=class{constructor(){return qd()}};function TV(t){return t&&t.length===1?t[0]:new Ai(ns())}var Ly=new H("angularfire2._apps"),bV={provide:Ai,useFactory:TV,deps:[[new Un,Ly]]},SV={provide:fc,deps:[[new Un,Ly]]};function CV(t){return(e,n)=>{let r=n.get(fi);Me("angularfire",Ci.full,"core"),Me("angularfire",Ci.full,"app"),Me("angular",gp.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ai(i)}}function dZ(t,...e){return Wt([bV,SV,{provide:Ly,useFactory:CV(t),multi:!0,deps:[_e,Xe,Di,...e]}])}var hZ=nt(Oy,!0);var DV=new Map,AV={activated:!1,tokenObservers:[]},RV={initialized:!1,enabled:!1};function tn(t){return DV.get(t)||Object.assign({},AV)}function CD(){return RV}var NV="https://content-firebaseappcheck.googleapis.com/v1";var PV="exchangeDebugToken",TD={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},EZ=1440*60*1e3;var jy=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return D(this,null,function*(){this.stop();try{this.pending=new Ei,this.pending.promise.catch(n=>{}),yield MV(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ei,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function MV(t){return new Promise(e=>{setTimeout(e,t)})}var xV={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Ar=new Xt("appCheck","AppCheck",xV);function DD(t){if(!tn(t).activated)throw Ar.create("use-before-activation",{appName:t.name})}function AD(r,i){return D(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Ar.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Ar.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Ar.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Ar.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function RD(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${NV}/projects/${n}/apps/${r}:${PV}?key=${i}`,body:{debug_token:e}}}var kV="firebase-app-check-database",OV=1,Uy="firebase-app-check-store";var Gd=null;function LV(){return Gd||(Gd=new Promise((t,e)=>{try{let n=indexedDB.open(kV,OV);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Ar.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Uy,{keyPath:"compositeKey"})}}}catch(n){e(Ar.create("storage-open",{originalErrorMessage:n?.message}))}}),Gd)}function FV(t,e){return VV(jV(t),e)}function VV(t,e){return D(this,null,function*(){let r=(yield LV()).transaction(Uy,"readwrite"),o=r.objectStore(Uy).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Ar.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function jV(t){return`${t.options.appId}-${t.name}`}var pc=new yn("@firebase/app-check");function Fy(t,e){return lc()?FV(t,e).catch(n=>{pc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function ND(){return CD().enabled}function PD(){return D(this,null,function*(){let t=CD();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var UV={error:"UNKNOWN_ERROR"};function $V(t){return Vd.encodeString(JSON.stringify(t),!1)}function $y(t,e=!1,n=!1){return D(this,null,function*(){let r=t.app;DD(r);let i=tn(r),o=i.token,s;if(o&&!gc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(gc(l)?o=l:yield Fy(r,void 0))}if(!e&&o&&gc(o))return{token:o.token};let a=!1;if(ND())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=AD(RD(r,yield PD()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Fy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?pc.warn(l.message):n&&pc.error(l),Vy(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield tn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?pc.warn(l.message):n&&pc.error(l),s=l}let u;return o?s?gc(o)?u={token:o.token,internalError:s}:u=Vy(s):(u={token:o.token},i.token=o,yield Fy(r,o)):u=Vy(s),a&&zV(r,u),u})}function BV(t){return D(this,null,function*(){let e=t.app;DD(e);let{provider:n}=tn(e);if(ND()){let r=yield PD(),{token:i}=yield AD(RD(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function HV(t,e,n,r){let{app:i}=t,o=tn(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&gc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),bD(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>bD(t))}function MD(t,e){let n=tn(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function bD(t){let{app:e}=t,n=tn(e),r=n.tokenRefresher;r||(r=qV(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function qV(t){let{app:e}=t;return new jy(()=>D(null,null,function*(){let n=tn(e),r;if(n.token?r=yield $y(t,!0):r=yield $y(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=tn(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},TD.RETRIAL_MIN_WAIT,TD.RETRIAL_MAX_WAIT)}function zV(t,e){let n=tn(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function gc(t){return t.expireTimeMillis-Date.now()>0}function Vy(t){return{token:$V(UV),error:t}}var By=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=tn(this.app);for(let n of e)MD(this.app,n.next);return Promise.resolve()}};function WV(t,e){return new By(t,e)}function GV(t){return{getToken:e=>$y(t,e),getLimitedUseToken:()=>BV(t),addTokenListener:e=>HV(t,"INTERNAL",e),removeTokenListener:e=>MD(t.app,e)}}var KV="@firebase/app-check",QV="0.10.1";var YV="app-check",SD="app-check-internal";function JV(){en(new _t(YV,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return WV(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(SD).initialize()})),en(new _t(SD,t=>{let e=t.getProvider("app-check").getImmediate();return GV(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(KV,QV)}JV();var ZV="app-check";var Kd=class{constructor(){return is(ZV)}};var XV=["localhost","0.0.0.0","127.0.0.1"],kZ=typeof window<"u"&&XV.includes(window.location.hostname);function UD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var $D=UD,BD=new Xt("auth","Firebase",UD());var Zd=new yn("@firebase/auth");function tj(t,...e){Zd.logLevel<=ie.WARN&&Zd.warn(`Auth (${ts}): ${t}`,...e)}function Yd(t,...e){Zd.logLevel<=ie.ERROR&&Zd.error(`Auth (${ts}): ${t}`,...e)}function xD(t,...e){throw ev(t,...e)}function Xy(t,...e){return ev(t,...e)}function HD(t,e,n){let r=Object.assign(Object.assign({},$D()),{[e]:n});return new Xt("auth","Firebase",r).create(e,{appName:t.name})}function Jd(t){return HD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ev(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BD.create(t,...e)}function fe(t,e,...n){if(!t)throw ev(e,...n)}function mc(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Yd(e),new Error(e)}function Xd(t,e){t||mc(e)}function nj(){return kD()==="http:"||kD()==="https:"}function kD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nj()||tD()||"connection"in navigator)?navigator.onLine:!0}function ij(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Pi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xd(n>e,"Short delay should be less than long delay!"),this.isMobile=XC()||nD()}get(){return rj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oj(t,e){Xd(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var eh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cj=new Pi(3e4,6e4);function qD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function oh(o,s,a,u){return D(this,arguments,function*(t,e,n,r,i={}){return zD(t,i,()=>D(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Iy(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return eD()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&wi(t.emulatorConfig.host)&&(y.credentials="include"),eh.fetch()(yield WD(t,t.config.apiHost,n,p),y)}))})}function zD(t,e,n){return D(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sj),e);try{let i=new zy(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Qd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Qd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Qd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw HD(t,h,l);xD(t,h)}}catch(i){if(i instanceof Ut)throw i;xD(t,"network-request-failed",{message:String(i)})}})}function WD(t,e,n,r){return D(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?oj(t.config,i):`${t.config.apiScheme}://${i}`;return aj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var zy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xy(this.auth,"network-request-failed")),cj.get())})}};function Qd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Xy(t,e,r);return i.customData._tokenResponse=n,i}function uj(t,e){return D(this,null,function*(){return oh(t,"POST","/v1/accounts:delete",e)})}function th(t,e){return D(this,null,function*(){return oh(t,"POST","/v1/accounts:lookup",e)})}function yc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function tv(t,e=!1){return D(this,null,function*(){let n=tt(t),r=yield n.getIdToken(e),i=GD(r);fe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:yc(Hy(i.auth_time)),issuedAtTime:yc(Hy(i.iat)),expirationTime:yc(Hy(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Hy(t){return Number(t)*1e3}function GD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yd("JWT malformed, contained fewer than 3 sections"),null;try{let i=jd(n);return i?JSON.parse(i):(Yd("Failed to decode base64 JWT payload"),null)}catch(i){return Yd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function OD(t){let e=GD(t);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Wy(t,e,n=!1){return D(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ut&&lj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function lj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Gy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>D(this,null,function*(){yield this.iteration()}),n)}iteration(){return D(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _c=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yc(this.lastLoginAt),this.creationTime=yc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nh(t){return D(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Wy(t,th(n,{idToken:r}));fe(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?KD(o.providerUserInfo):[],a=dj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new _c(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function nv(t){return D(this,null,function*(){let e=tt(t);yield nh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function dj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KD(t){return t.map(e=>{var{providerId:n}=e,r=Zf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function hj(t,e){return D(this,null,function*(){let n=yield zD(t,{},()=>D(null,null,function*(){let r=Iy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield WD(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return t.emulatorConfig&&wi(t.emulatorConfig.host)&&(u.credentials="include"),eh.fetch()(s,u)}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function fj(t,e){return D(this,null,function*(){return oh(t,"POST","/v2/accounts:revokeToken",qD(t,e))})}var vc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):OD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let n=OD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return D(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return D(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield hj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(fe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(fe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return mc("not implemented")}};function Rr(t,e){fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ri=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Zf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new _c(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return D(this,null,function*(){let n=yield Wy(this,this.stsTokenManager.getToken(this.auth,e));return fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return tv(this,e)}reload(){return nv(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return D(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield nh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return D(this,null,function*(){if(Kn(this.auth.app))return Promise.reject(Jd(this.auth));let e=yield this.getIdToken();return yield Wy(this,uj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=n.photoURL)!==null&&s!==void 0?s:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,k=(l=n.createdAt)!==null&&l!==void 0?l:void 0,B=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:G,emailVerified:Ie,isAnonymous:ft,providerData:me,stsTokenManager:w}=n;fe(G&&w,e,"internal-error");let v=vc.fromJSON(this.name,w);fe(typeof G=="string",e,"internal-error"),Rr(p,e.name),Rr(m,e.name),fe(typeof Ie=="boolean",e,"internal-error"),fe(typeof ft=="boolean",e,"internal-error"),Rr(y,e.name),Rr(S,e.name),Rr(N,e.name),Rr(R,e.name),Rr(k,e.name),Rr(B,e.name);let I=new t({uid:G,auth:e,email:m,emailVerified:Ie,displayName:p,isAnonymous:ft,photoURL:S,phoneNumber:y,tenantId:N,stsTokenManager:v,createdAt:k,lastLoginAt:B});return me&&Array.isArray(me)&&(I.providerData=me.map(E=>Object.assign({},E))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,n,r=!1){return D(this,null,function*(){let i=new vc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nh(o),o})}static _fromGetAccountInfoResponse(e,n,r){return D(this,null,function*(){let i=n.users[0];fe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?KD(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new vc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _c(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var LD=new Map;function Ni(t){Xd(t instanceof Function,"Expected a class definition");let e=LD.get(t);return e?(Xd(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,LD.set(t,e),e)}var pj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return D(this,null,function*(){return!0})}_set(n,r){return D(this,null,function*(){this.storage[n]=r})}_get(n){return D(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return D(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ky=pj;function qy(t,e,n){return`firebase:${t}:${e}:${n}`}var rh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=qy(this.userKey,i.apiKey,o),this.fullPersistenceKey=qy("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return D(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield th(this.auth,{idToken:e}).catch(()=>{});return n?Ri._fromGetAccountInfoResponse(this.auth,n,e):null}return Ri._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return D(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return D(this,null,function*(){if(!n.length)return new t(Ni(Ky),e,r);let i=(yield Promise.all(n.map(l=>D(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Ni(Ky),s=qy(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield th(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Ri._fromGetAccountInfoResponse(e,m,h)}else p=Ri._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>D(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function FD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ij(e))return"Blackberry";if(Ej(e))return"Webos";if(mj(e))return"Safari";if((e.includes("chrome/")||yj(e))&&!e.includes("edge/"))return"Chrome";if(_j(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gj(t=xt()){return/firefox\//i.test(t)}function mj(t=xt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yj(t=xt()){return/crios\//i.test(t)}function vj(t=xt()){return/iemobile/i.test(t)}function _j(t=xt()){return/android/i.test(t)}function Ij(t=xt()){return/blackberry/i.test(t)}function Ej(t=xt()){return/webos/i.test(t)}function QD(t,e=[]){let n;switch(t){case"Browser":n=FD(xt());break;case"Worker":n=`${FD(xt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ts}/${r}`}var Qy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return D(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function wj(n){return D(this,arguments,function*(t,e={}){return oh(t,"GET","/v2/passwordPolicy",qD(t,e))})}var Tj=6,Yy=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:Tj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Jy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ih(this),this.idTokenSubscription=new ih(this),this.beforeStateQueue=new Qy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(()=>D(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield rh.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return D(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return D(this,null,function*(){try{let n=yield th(this,{idToken:e}),r=yield Ri._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return D(this,null,function*(){var n;if(Kn(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return D(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return D(this,null,function*(){try{yield nh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=ij()}_delete(){return D(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return D(this,null,function*(){if(Kn(this.app))return Promise.reject(Jd(this));let n=e?tt(e):null;return n&&fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return D(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>D(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return D(this,null,function*(){return Kn(this.app)?Promise.reject(Jd(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Kn(this.app)?Promise.reject(Jd(this)):this.queue(()=>D(this,null,function*(){yield this.assertedPersistence.setPersistence(Ni(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return D(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return D(this,null,function*(){let e=yield wj(this),n=new Yy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Xt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return D(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield fj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return D(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return D(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Ni(e)||this._popupRedirectResolver;fe(n,this,"argument-error"),this.redirectPersistenceManager=yield rh.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return D(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>D(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return D(this,null,function*(){if(e===this.currentUser)return this.queue(()=>D(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return D(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return D(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return D(this,null,function*(){var e;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&tj(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function bj(t){return tt(t)}var ih=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oD(n=>this.observer=n)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sj={loadJS(){return D(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cj(t){Sj=t}function Dj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Aj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ni);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var WZ=Dj("rcb"),GZ=new Pi(3e4,6e4);var KZ=new Pi(2e3,1e4);var QZ=600*1e3;var YZ=new Pi(3e4,6e4);var JZ=new Pi(5e3,15e3);var ZZ=encodeURIComponent("fac");var VD="@firebase/auth",jD="1.10.8";var Zy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return D(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nj(t){en(new _t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;fe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QD(t)},l=new Jy(r,i,o,u);return Aj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),en(new _t("auth-internal",e=>{let n=bj(e.getProvider("auth").getImmediate());return(r=>new Zy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(VD,jD,Rj(t)),Me(VD,jD,"esm2017")}var Pj=300,XZ=JC("authIdTokenMaxAge")||Pj;function Mj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Cj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=Xy("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",Mj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nj("Browser");var NU="auth";var sh=class{constructor(){return is(NU)}};var YD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JD={};var Qn,rv;(function(){var t;function e(w,v){function I(){}I.prototype=v.prototype,w.D=v.prototype,w.prototype=new I,w.prototype.constructor=w,w.C=function(E,T,C){for(var _=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)_[Sn-2]=arguments[Sn];return v.prototype[T].apply(E,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,I){I||(I=0);var E=Array(16);if(typeof v=="string")for(var T=0;16>T;++T)E[T]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(T=0;16>T;++T)E[T]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=w.g[0],I=w.g[1],T=w.g[2];var C=w.g[3],_=v+(C^I&(T^C))+E[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=C+(T^v&(I^T))+E[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=T+(I^C&(v^I))+E[2]+606105819&4294967295,T=C+(_<<17&4294967295|_>>>15),_=I+(v^T&(C^v))+E[3]+3250441966&4294967295,I=T+(_<<22&4294967295|_>>>10),_=v+(C^I&(T^C))+E[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(T^v&(I^T))+E[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=T+(I^C&(v^I))+E[6]+2821735955&4294967295,T=C+(_<<17&4294967295|_>>>15),_=I+(v^T&(C^v))+E[7]+4249261313&4294967295,I=T+(_<<22&4294967295|_>>>10),_=v+(C^I&(T^C))+E[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(T^v&(I^T))+E[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=T+(I^C&(v^I))+E[10]+4294925233&4294967295,T=C+(_<<17&4294967295|_>>>15),_=I+(v^T&(C^v))+E[11]+2304563134&4294967295,I=T+(_<<22&4294967295|_>>>10),_=v+(C^I&(T^C))+E[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=C+(T^v&(I^T))+E[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=T+(I^C&(v^I))+E[14]+2792965006&4294967295,T=C+(_<<17&4294967295|_>>>15),_=I+(v^T&(C^v))+E[15]+1236535329&4294967295,I=T+(_<<22&4294967295|_>>>10),_=v+(T^C&(I^T))+E[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^T&(v^I))+E[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=T+(v^I&(C^v))+E[11]+643717713&4294967295,T=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(T^C))+E[0]+3921069994&4294967295,I=T+(_<<20&4294967295|_>>>12),_=v+(T^C&(I^T))+E[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^T&(v^I))+E[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=T+(v^I&(C^v))+E[15]+3634488961&4294967295,T=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(T^C))+E[4]+3889429448&4294967295,I=T+(_<<20&4294967295|_>>>12),_=v+(T^C&(I^T))+E[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^T&(v^I))+E[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=T+(v^I&(C^v))+E[3]+4107603335&4294967295,T=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(T^C))+E[8]+1163531501&4294967295,I=T+(_<<20&4294967295|_>>>12),_=v+(T^C&(I^T))+E[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=C+(I^T&(v^I))+E[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=T+(v^I&(C^v))+E[7]+1735328473&4294967295,T=C+(_<<14&4294967295|_>>>18),_=I+(C^v&(T^C))+E[12]+2368359562&4294967295,I=T+(_<<20&4294967295|_>>>12),_=v+(I^T^C)+E[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^T)+E[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=T+(C^v^I)+E[11]+1839030562&4294967295,T=C+(_<<16&4294967295|_>>>16),_=I+(T^C^v)+E[14]+4259657740&4294967295,I=T+(_<<23&4294967295|_>>>9),_=v+(I^T^C)+E[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^T)+E[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=T+(C^v^I)+E[7]+4139469664&4294967295,T=C+(_<<16&4294967295|_>>>16),_=I+(T^C^v)+E[10]+3200236656&4294967295,I=T+(_<<23&4294967295|_>>>9),_=v+(I^T^C)+E[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^T)+E[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=T+(C^v^I)+E[3]+3572445317&4294967295,T=C+(_<<16&4294967295|_>>>16),_=I+(T^C^v)+E[6]+76029189&4294967295,I=T+(_<<23&4294967295|_>>>9),_=v+(I^T^C)+E[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=C+(v^I^T)+E[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=T+(C^v^I)+E[15]+530742520&4294967295,T=C+(_<<16&4294967295|_>>>16),_=I+(T^C^v)+E[2]+3299628645&4294967295,I=T+(_<<23&4294967295|_>>>9),_=v+(T^(I|~C))+E[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~T))+E[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=T+(v^(C|~I))+E[14]+2878612391&4294967295,T=C+(_<<15&4294967295|_>>>17),_=I+(C^(T|~v))+E[5]+4237533241&4294967295,I=T+(_<<21&4294967295|_>>>11),_=v+(T^(I|~C))+E[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~T))+E[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=T+(v^(C|~I))+E[10]+4293915773&4294967295,T=C+(_<<15&4294967295|_>>>17),_=I+(C^(T|~v))+E[1]+2240044497&4294967295,I=T+(_<<21&4294967295|_>>>11),_=v+(T^(I|~C))+E[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~T))+E[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=T+(v^(C|~I))+E[6]+2734768916&4294967295,T=C+(_<<15&4294967295|_>>>17),_=I+(C^(T|~v))+E[13]+1309151649&4294967295,I=T+(_<<21&4294967295|_>>>11),_=v+(T^(I|~C))+E[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=C+(I^(v|~T))+E[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=T+(v^(C|~I))+E[2]+718787259&4294967295,T=C+(_<<15&4294967295|_>>>17),_=I+(C^(T|~v))+E[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(T+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var I=v-this.blockSize,E=this.B,T=this.h,C=0;C<v;){if(T==0)for(;C<=I;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(E[T++]=w.charCodeAt(C++),T==this.blockSize){i(this,E),T=0;break}}else for(;C<v;)if(E[T++]=w[C++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var I=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=I&255,I/=256;for(this.u(w),w=Array(16),v=I=0;4>v;++v)for(var E=0;32>E;E+=8)w[I++]=this.g[v]>>>E&255;return w};function o(w,v){var I=a;return Object.prototype.hasOwnProperty.call(I,w)?I[w]:I[w]=v(w)}function s(w,v){this.h=v;for(var I=[],E=!0,T=w.length-1;0<=T;T--){var C=w[T]|0;E&&C==v||(I[T]=C,E=!1)}this.g=I}var a={};function u(w){return-128<=w&&128>w?o(w,function(v){return new s([v|0],0>v?-1:0)}):new s([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return R(l(-w));for(var v=[],I=1,E=0;w>=I;E++)v[E]=w/I|0,I*=4294967296;return new s(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return R(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),E=p,T=0;T<w.length;T+=8){var C=Math.min(8,w.length-T),_=parseInt(w.substring(T,T+C),v);8>C?(C=l(Math.pow(v,C)),E=E.j(C).add(l(_))):(E=E.j(I),E=E.add(l(_)))}return E}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(N(this))return-R(this).m();for(var w=0,v=1,I=0;I<this.g.length;I++){var E=this.i(I);w+=(0<=E?E:4294967296+E)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(N(this))return"-"+R(this).toString(w);for(var v=l(Math.pow(w,6)),I=this,E="";;){var T=Ie(I,v).g;I=k(I,T.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(w);if(I=T,S(I))return C+E;for(;6>C.length;)C="0"+C;E=C+E}},t.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function N(w){return w.h==-1}t.l=function(w){return w=k(this,w),N(w)?-1:S(w)?0:1};function R(w){for(var v=w.g.length,I=[],E=0;E<v;E++)I[E]=~w.g[E];return new s(I,~w.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0,T=0;T<=v;T++){var C=E+(this.i(T)&65535)+(w.i(T)&65535),_=(C>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);E=_>>>16,C&=65535,_&=65535,I[T]=_<<16|C}return new s(I,I[I.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(R(v))}t.j=function(w){if(S(this)||S(w))return p;if(N(this))return N(w)?R(this).j(R(w)):R(R(this).j(w));if(N(w))return R(this.j(R(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,I=[],E=0;E<2*v;E++)I[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<w.g.length;T++){var C=this.i(E)>>>16,_=this.i(E)&65535,Sn=w.i(T)>>>16,xs=w.i(T)&65535;I[2*E+2*T]+=_*xs,B(I,2*E+2*T),I[2*E+2*T+1]+=C*xs,B(I,2*E+2*T+1),I[2*E+2*T+1]+=_*Sn,B(I,2*E+2*T+1),I[2*E+2*T+2]+=C*Sn,B(I,2*E+2*T+2)}for(E=0;E<v;E++)I[E]=I[2*E+1]<<16|I[2*E];for(E=v;E<2*v;E++)I[E]=0;return new s(I,0)};function B(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function G(w,v){this.g=w,this.h=v}function Ie(w,v){if(S(v))throw Error("division by zero");if(S(w))return new G(p,p);if(N(w))return v=Ie(R(w),v),new G(R(v.g),R(v.h));if(N(v))return v=Ie(w,R(v)),new G(R(v.g),v.h);if(30<w.g.length){if(N(w)||N(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,E=v;0>=E.l(w);)I=ft(I),E=ft(E);var T=me(I,1),C=me(E,1);for(E=me(E,2),I=me(I,2);!S(E);){var _=C.add(E);0>=_.l(w)&&(T=T.add(I),C=_),E=me(E,1),I=me(I,1)}return v=k(w,T.j(v)),new G(T,v)}for(T=p;0<=w.l(v);){for(I=Math.max(1,Math.floor(w.m()/v.m())),E=Math.ceil(Math.log(I)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),C=l(I),_=C.j(v);N(_)||0<_.l(w);)I-=E,C=l(I),_=C.j(v);S(C)&&(C=m),T=T.add(C),w=k(w,_)}return new G(T,w)}t.A=function(w){return Ie(this,w).h},t.and=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)&w.i(E);return new s(I,this.h&w.h)},t.or=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)|w.i(E);return new s(I,this.h|w.h)},t.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),I=[],E=0;E<v;E++)I[E]=this.i(E)^w.i(E);return new s(I,this.h^w.h)};function ft(w){for(var v=w.g.length+1,I=[],E=0;E<v;E++)I[E]=w.i(E)<<1|w.i(E-1)>>>31;return new s(I,w.h)}function me(w,v){var I=v>>5;v%=32;for(var E=w.g.length-I,T=[],C=0;C<E;C++)T[C]=0<v?w.i(C+I)>>>v|w.i(C+I+1)<<32-v:w.i(C+I);return new s(T,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rv=JD.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Qn=JD.Integer=s}).apply(typeof YD<"u"?YD:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yn={};var iv,PU,os,ov,Ic,ch,sv,av,cv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var b=c[g];if(!(b in f))break e;f=f[b]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,b={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,g),c.apply(d,b)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,b,A){for(var O=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)O[Ee-2]=arguments[Ee];return d.prototype[b].apply(g,O)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let b=c.length||0,A=g.length||0;c.length=b+A;for(let O=0;O<A;O++)c[b+O]=g[O]}else c.push(g)}}class k{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function B(c){return/^[\s\xa0]*$/.test(c)}function G(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ie(c){return Ie[" "](c),c}Ie[" "]=function(){};var ft=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function me(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=af;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Sn{constructor(){this.h=this.g=null}add(d,f){let g=xs.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var xs=new k(()=>new MN,c=>c.reset());class MN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let ks,Os=!1,af=new Sn,MI=()=>{let c=a.Promise.resolve(void 0);ks=()=>{c.then(xN)}};var xN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=xs;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Os=!1};function or(){this.s=this.s,this.C=this.C}or.prototype.s=!1,or.prototype.ma=function(){this.s||(this.s=!0,this.N())},or.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var kN=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function Ls(c,d){if(rt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(ft){e:{try{Ie(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ON[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ls.aa.h.call(this)}}S(Ls,rt);var ON={2:"touch",3:"pen",4:"mouse"};Ls.prototype.h=function(){Ls.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Fs="closure_listenable_"+(1e6*Math.random()|0),LN=0;function FN(c,d,f,g,b){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=b,this.key=++LN,this.da=this.fa=!1}function Bc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,b){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var O=uf(c,d,g,b);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new FN(d,this.src,A,!!g,b),d.fa=f,c.push(d)),d};function cf(c,d){var f=d.type;if(f in c.g){var g=c.g[f],b=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=b)&&Array.prototype.splice.call(g,b,1),A&&(Bc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function uf(c,d,f,g){for(var b=0;b<c.length;++b){var A=c[b];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return b}return-1}var lf="closure_lm_"+(1e6*Math.random()|0),df={};function xI(c,d,f,g,b){if(g&&g.once)return OI(c,d,f,g,b);if(Array.isArray(d)){for(var A=0;A<d.length;A++)xI(c,d[A],f,g,b);return null}return f=gf(f),c&&c[Fs]?c.K(d,f,l(g)?!!g.capture:!!g,b):kI(c,d,f,!1,g,b)}function kI(c,d,f,g,b,A){if(!d)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Ee=ff(c);if(Ee||(c[lf]=Ee=new Hc(c)),f=Ee.add(d,f,g,O,A),f.proxy)return f;if(g=VN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)kN||(b=O),b===void 0&&(b=!1),c.addEventListener(d.toString(),g,b);else if(c.attachEvent)c.attachEvent(FI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function VN(){function c(f){return d.call(c.src,c.listener,f)}let d=jN;return c}function OI(c,d,f,g,b){if(Array.isArray(d)){for(var A=0;A<d.length;A++)OI(c,d[A],f,g,b);return null}return f=gf(f),c&&c[Fs]?c.L(d,f,l(g)?!!g.capture:!!g,b):kI(c,d,f,!0,g,b)}function LI(c,d,f,g,b){if(Array.isArray(d))for(var A=0;A<d.length;A++)LI(c,d[A],f,g,b);else g=l(g)?!!g.capture:!!g,f=gf(f),c&&c[Fs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=uf(A,f,g,b),-1<f&&(Bc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=ff(c))&&(d=c.g[d.toString()],c=-1,d&&(c=uf(d,f,g,b)),(f=-1<c?d[c]:null)&&hf(f))}function hf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Fs])cf(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(FI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=ff(d))?(cf(f,c),f.h==0&&(f.src=null,d[lf]=null)):Bc(c)}}}function FI(c){return c in df?df[c]:df[c]="on"+c}function jN(c,d){if(c.da)c=!0;else{d=new Ls(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&hf(c),c=f.call(g,d)}return c}function ff(c){return c=c[lf],c instanceof Hc?c:null}var pf="__closure_events_fn_"+(1e9*Math.random()>>>0);function gf(c){return typeof c=="function"?c:(c[pf]||(c[pf]=function(d){return c.handleEvent(d)}),c[pf])}function it(){or.call(this),this.i=new Hc(this),this.M=this,this.F=null}S(it,or),it.prototype[Fs]=!0,it.prototype.removeEventListener=function(c,d,f,g){LI(this,c,d,f,g)};function pt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new rt(d,c);else if(d instanceof rt)d.target=d.target||c;else{var b=d;d=new rt(g,c),E(d,b)}if(b=!0,f)for(var A=f.length-1;0<=A;A--){var O=d.g=f[A];b=qc(O,g,!0,d)&&b}if(O=d.g=c,b=qc(O,g,!0,d)&&b,b=qc(O,g,!1,d)&&b,f)for(A=0;A<f.length;A++)O=d.g=f[A],b=qc(O,g,!1,d)&&b}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Bc(f[g]);delete c.g[d],c.h--}}this.F=null},it.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},it.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function qc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,A=0;A<d.length;++A){var O=d[A];if(O&&!O.da&&O.capture==f){var Ee=O.listener,Ye=O.ha||O.src;O.fa&&cf(c.i,O),b=Ee.call(Ye,g)!==!1&&b}}return b&&!g.defaultPrevented}function VI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function jI(c){c.g=VI(()=>{c.g=null,c.i&&(c.i=!1,jI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class UN extends or{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:jI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vs(c){or.call(this),this.h=c,this.g={}}S(Vs,or);var UI=[];function $I(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&hf(d)},c),c.g={}}Vs.prototype.N=function(){Vs.aa.N.call(this),$I(this)},Vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mf=a.JSON.stringify,$N=a.JSON.parse,BN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function yf(){}yf.prototype.h=null;function BI(c){return c.h||(c.h=c.i())}function HI(){}var js={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vf(){rt.call(this,"d")}S(vf,rt);function _f(){rt.call(this,"c")}S(_f,rt);var Ur={},qI=null;function zc(){return qI=qI||new it}Ur.La="serverreachability";function zI(c){rt.call(this,Ur.La,c)}S(zI,rt);function Us(c){let d=zc();pt(d,new zI(d))}Ur.STAT_EVENT="statevent";function WI(c,d){rt.call(this,Ur.STAT_EVENT,c),this.stat=d}S(WI,rt);function gt(c){let d=zc();pt(d,new WI(d,c))}Ur.Ma="timingevent";function GI(c,d){rt.call(this,Ur.Ma,c),this.size=d}S(GI,rt);function $s(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Bs(){this.g=!0}Bs.prototype.xa=function(){this.g=!1};function HN(c,d,f,g,b,A){c.info(function(){if(c.g)if(A)for(var O="",Ee=A.split("&"),Ye=0;Ye<Ee.length;Ye++){var de=Ee[Ye].split("=");if(1<de.length){var ot=de[0];de=de[1];var st=ot.split("_");O=2<=st.length&&st[1]=="type"?O+(ot+"="+de+"&"):O+(ot+"=redacted&")}}else O=null;else O=A;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+f+`
`+O})}function qN(c,d,f,g,b,A,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+f+`
`+A+" "+O})}function zi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+WN(c,f)+(g?" "+g:"")})}function zN(c,d){c.info(function(){return"TIMEOUT: "+d})}Bs.prototype.info=function(){};function WN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var b=g[1];if(Array.isArray(b)&&!(1>b.length)){var A=b[0];if(A!="noop"&&A!="stop"&&A!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return mf(f)}catch{return d}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},KI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},If;function Gc(){}S(Gc,yf),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},If=new Gc;function sr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Vs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new QI}function QI(){this.i=null,this.g="",this.h=!1}var YI={},Ef={};function wf(c,d,f){c.L=1,c.v=Jc(Cn(d)),c.m=f,c.P=!0,JI(c,null)}function JI(c,d){c.F=Date.now(),Kc(c),c.A=Cn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),dE(f.i,"t",g),c.C=0,f=c.j.J,c.h=new QI,c.g=RE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new UN(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var b="readystatechange";Array.isArray(b)||(b&&(UI[0]=b.toString()),b=UI);for(var A=0;A<b.length;A++){var O=xI(f,b[A],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Us(),HN(c.i,c.u,c.A,c.l,c.R,c.m)}sr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Dn(c)==3?d.j():this.Y(c)},sr.prototype.Y=function(c){try{if(c==this.g)e:{let st=Dn(this.g);var d=this.g.Ba();let Ki=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||vE(this.g)))){this.J||st!=4||d==7||(d==8||0>=Ki?Us(3):Us(2)),Tf(this);var f=this.g.Z();this.X=f;t:if(ZI(this)){var g=vE(this.g);c="";var b=g.length,A=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Hs(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==b-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,qN(this.i,this.u,this.A,this.l,this.R,st,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,Ye=this.g;if((Ee=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!B(Ee)){var de=Ee;break t}}de=null}if(f=de)zi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bf(this,f);else{this.o=!1,this.s=3,gt(12),$r(this),Hs(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<O.length;)if(Ht=GN(this,O),Ht==Ef){st==4&&(this.s=4,gt(14),f=!1),zi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==YI){this.s=4,gt(15),zi(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else zi(this.i,this.l,Ht,null),bf(this,Ht);if(ZI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||O.length!=0||this.h.h||(this.s=1,gt(16),f=!1),this.o=this.o&&f,!f)zi(this.i,this.l,O,"[Invalid Chunked Response]"),$r(this),Hs(this);else if(0<O.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Nf(ot),ot.M=!0,gt(11))}}else zi(this.i,this.l,O,null),bf(this,O);st==4&&$r(this),this.o&&!this.J&&(st==4?SE(this.j,this):(this.o=!1,Kc(this)))}else lP(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),$r(this),Hs(this)}}}catch{}finally{}};function ZI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function GN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Ef:(f=Number(d.substring(f,g)),isNaN(f)?YI:(g+=1,g+f>d.length?Ef:(d=d.slice(g,g+f),c.C=g+f,d)))}sr.prototype.cancel=function(){this.J=!0,$r(this)};function Kc(c){c.S=Date.now()+c.I,XI(c,c.I)}function XI(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=$s(m(c.ba,c),d)}function Tf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}sr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(zN(this.i,this.A),this.L!=2&&(Us(),gt(17)),$r(this),this.s=2,Hs(this)):XI(this,this.S-c)};function Hs(c){c.j.G==0||c.J||SE(c.j,c)}function $r(c){Tf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,$I(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function bf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Sf(f.h,c))){if(!c.K&&Sf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nu(f),eu(f);else break e;Rf(f),gt(18)}}else f.za=b[1],0<f.za-f.T&&37500>b[2]&&f.F&&f.v==0&&!f.C&&(f.C=$s(m(f.Za,f),6e3));if(1>=nE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Hr(f,11)}else if((c.K||f.g==c)&&nu(f),!B(d))for(b=f.Da.g.parse(d),d=0;d<b.length;d++){let de=b[d];if(f.T=de[0],de=de[1],f.G==2)if(de[0]=="c"){f.K=de[1],f.ia=de[2];let ot=de[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let st=de[4];st!=null&&(f.Aa=st,f.j.info("SVER="+f.Aa));let Ki=de[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(g=1.5*Ki,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ht=c.g;if(Ht){let iu=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var A=g.h;A.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Cf(A,A.h),A.h=null))}if(g.D){let Pf=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Pf&&(g.ya=Pf,we(g.I,g.D,Pf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var O=c;if(g.qa=AE(g,g.J?g.ia:null,g.W),O.K){rE(g.h,O);var Ee=O,Ye=g.L;Ye&&(Ee.I=Ye),Ee.B&&(Tf(Ee),Kc(Ee)),g.g=O}else TE(g);0<f.i.length&&tu(f)}else de[0]!="stop"&&de[0]!="close"||Hr(f,7);else f.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Hr(f,7):Af(f):de[0]!="noop"&&f.l&&f.l.ta(de),f.v=0)}}Us(4)}catch{}}var KN=class{constructor(c,d){this.g=c,this.map=d}};function eE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function nE(c){return c.h?1:c.g?c.g.size:0}function Sf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Cf(c,d){c.g?c.g.add(d):c.h=d}function rE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}eE.prototype.cancel=function(){if(this.i=iE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function iE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function QN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function YN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function oE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=YN(c),g=QN(c),b=g.length,A=0;A<b;A++)d.call(void 0,g[A],f&&f[A],c)}var sE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),b=null;if(0<=g){var A=c[f].substring(0,g);b=c[f].substring(g+1)}else A=c[f];d(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Br(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Br){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new Ws;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),aE(this,f),this.m=c.m}else c&&(d=String(c).match(sE))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=qs(d[2]||""),this.g=qs(d[3]||"",!0),Yc(this,d[4]),this.l=qs(d[5]||"",!0),aE(this,d[6]||"",!0),this.m=qs(d[7]||"")):(this.h=!1,this.i=new Ws(null,this.h))}Br.prototype.toString=function(){var c=[],d=this.j;d&&c.push(zs(d,cE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(zs(d,cE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(zs(f,f.charAt(0)=="/"?eP:XN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",zs(f,nP)),c.join("")};function Cn(c){return new Br(c)}function Qc(c,d,f){c.j=f?qs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function aE(c,d,f){d instanceof Ws?(c.i=d,rP(c.i,c.h)):(f||(d=zs(d,tP)),c.i=new Ws(d,c.h))}function we(c,d,f){c.i.set(d,f)}function Jc(c){return we(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function qs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function zs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,ZN),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ZN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var cE=/[#\/\?@]/g,XN=/[#\?:]/g,eP=/[#\?]/g,tP=/[#\?@]/g,nP=/#/g;function Ws(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function ar(c){c.g||(c.g=new Map,c.h=0,c.i&&JN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ws.prototype,t.add=function(c,d){ar(this),this.i=null,c=Wi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function uE(c,d){ar(c),d=Wi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function lE(c,d){return ar(c),d=Wi(c,d),c.g.has(d)}t.forEach=function(c,d){ar(this),this.g.forEach(function(f,g){f.forEach(function(b){c.call(d,b,g,this)},this)},this)},t.na=function(){ar(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let b=c[g];for(let A=0;A<b.length;A++)f.push(d[g])}return f},t.V=function(c){ar(this);let d=[];if(typeof c=="string")lE(this,c)&&(d=d.concat(this.g.get(Wi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return ar(this),this.i=null,c=Wi(this,c),lE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function dE(c,d,f){uE(c,d),0<f.length&&(c.i=null,c.g.set(Wi(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var b=A;O[g]!==""&&(b+="="+encodeURIComponent(String(O[g]))),c.push(b)}}return this.i=c.join("&")};function Wi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function rP(c,d){d&&!c.j&&(ar(c),c.i=null,c.g.forEach(function(f,g){var b=g.toLowerCase();g!=b&&(uE(this,g),dE(this,b,f))},c)),c.j=d}function iP(c,d){let f=new Bs;if(a.Image){let g=new Image;g.onload=y(cr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(cr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(cr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(cr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function oP(c,d){let f=new Bs,g=new AbortController,b=setTimeout(()=>{g.abort(),cr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(b),A.ok?cr(f,"TestPingServer: ok",!0,d):cr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),cr(f,"TestPingServer: error",!1,d)})}function cr(c,d,f,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(f)}catch{}}function sP(){this.g=new BN}function aP(c,d,f){let g=f||"";try{oE(c,function(b,A){let O=b;l(b)&&(O=mf(b)),d.push(g+A+"="+encodeURIComponent(O))})}catch(b){throw d.push(g+"type="+encodeURIComponent("_badmap")),b}}function Gs(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Gs,yf),Gs.prototype.g=function(){return new Zc(this.l,this.j)},Gs.prototype.i=(function(c){return function(){return c}})({});function Zc(c,d){it.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Zc,it),t=Zc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Qs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function hE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ks(this):Qs(this),this.readyState==3&&hE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ks(this))},t.Qa=function(c){this.g&&(this.response=c,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Qs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Qs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function fE(c){let d="";return me(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Df(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=fE(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):we(c,d,f))}function Se(c){it.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Se,it);var cP=/^https?$/i,uP=["POST","PUT"];t=Se.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():If.g(),this.v=this.o?BI(this.o):BI(If),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){pE(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)f.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),b=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(uP,d,void 0))||g||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,O]of f)this.g.setRequestHeader(A,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yE(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){pE(this,A)}};function pE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,gE(c),Xc(c)}function gE(c){c.A||(c.A=!0,pt(c,"complete"),pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,pt(this,"complete"),pt(this,"abort"),Xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mE(this):this.bb())},t.bb=function(){mE(this)};function mE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Dn(c)!=4||c.Z()!=2)){if(c.u&&Dn(c)==4)VI(c.Ea,0,c);else if(pt(c,"readystatechange"),Dn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=O===0){var b=String(c.D).match(sE)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),g=!cP.test(b?b.toLowerCase():"")}f=g}if(f)pt(c,"complete"),pt(c,"success");else{c.m=6;try{var A=2<Dn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",gE(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){yE(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||pt(c,"ready");try{f.onreadystatechange=g}catch{}}}function yE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Dn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),$N(d)}};function vE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function lP(c){let d={};c=(c.g&&2<=Dn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(B(c[g]))continue;var f=T(c[g]);let b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[b]||[];d[b]=A,A.push(f)}w(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function _E(c){this.Aa=0,this.i=[],this.j=new Bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ys("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ys("baseRetryDelayMs",5e3,c),this.cb=Ys("retryDelaySeedMs",1e4,c),this.Wa=Ys("forwardChannelMaxRetries",2,c),this.wa=Ys("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new eE(c&&c.concurrentRequestLimit),this.Da=new sP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_E.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){gt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=AE(this,null,this.W),tu(this)};function Af(c){if(IE(c),c.G==3){var d=c.U++,f=Cn(c.I);if(we(f,"SID",c.K),we(f,"RID",d),we(f,"TYPE","terminate"),Js(c,f),d=new sr(c,c.j,d),d.L=2,d.v=Jc(Cn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=RE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}DE(c)}function eu(c){c.g&&(Nf(c),c.g.cancel(),c.g=null)}function IE(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!tE(c.h)&&!c.s){c.s=!0;var d=c.Ga;ks||MI(),Os||(ks(),Os=!0),af.add(d,c),c.B=0}}function dP(c,d){return nE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=$s(m(c.Ga,c,d),CE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let b=new sr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(b.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=wE(this,b,d),f=Cn(this.I),we(f,"RID",c),we(f,"CVER",22),this.D&&we(f,"X-HTTP-Session-Id",this.D),Js(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(fE(A)))+"&"+d:this.m&&Df(f,this.m,A)),Cf(this.h,b),this.Ua&&we(f,"TYPE","init"),this.P?(we(f,"$req",d),we(f,"SID","null"),b.T=!0,wf(b,f,null)):wf(b,f,d),this.G=2}}else this.G==3&&(c?EE(this,c):this.i.length==0||tE(this.h)||EE(this))};function EE(c,d){var f;d?f=d.l:f=c.U++;let g=Cn(c.I);we(g,"SID",c.K),we(g,"RID",f),we(g,"AID",c.T),Js(c,g),c.m&&c.o&&Df(g,c.m,c.o),f=new sr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=wE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Cf(c.h,f),wf(f,g,d)}function Js(c,d){c.H&&me(c.H,function(f,g){we(d,g,f)}),c.l&&oE({},function(f,g){we(d,g,f)})}function wE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var b=c.i;let A=-1;for(;;){let O=["count="+f];A==-1?0<f?(A=b[0].g,O.push("ofs="+A)):A=0:O.push("ofs="+A);let Ee=!0;for(let Ye=0;Ye<f;Ye++){let de=b[Ye].g,ot=b[Ye].map;if(de-=A,0>de)A=Math.max(0,b[Ye].g-100),Ee=!1;else try{aP(ot,O,"req"+de+"_")}catch{g&&g(ot)}}if(Ee){g=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function TE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;ks||MI(),Os||(ks(),Os=!0),af.add(d,c),c.v=0}}function Rf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=$s(m(c.Fa,c),CE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$s(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),eu(this),bE(this))};function Nf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bE(c){c.g=new sr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Cn(c.qa);we(d,"RID","rpc"),we(d,"SID",c.K),we(d,"AID",c.T),we(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&we(d,"TO",c.ja),we(d,"TYPE","xmlhttp"),Js(c,d),c.m&&c.o&&Df(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Jc(Cn(d)),f.m=null,f.P=!0,JI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),Rf(this),gt(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function SE(c,d){var f=null;if(c.g==d){nu(c),Nf(c),c.g=null;var g=2}else if(Sf(c.h,d))f=d.D,rE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var b=c.B;g=zc(),pt(g,new GI(g,f)),tu(c)}else TE(c);else if(b=d.s,b==3||b==0&&0<d.X||!(g==1&&dP(c,d)||g==2&&Rf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),b){case 1:Hr(c,5);break;case 4:Hr(c,10);break;case 3:Hr(c,6);break;default:Hr(c,2)}}}function CE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Hr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let b=!g;g=new Br(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Jc(g),b?iP(g.toString(),f):oP(g.toString(),f)}else gt(2);c.G=0,c.l&&c.l.sa(d),DE(c),IE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function DE(c){if(c.G=0,c.ka=[],c.l){let d=iE(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function AE(c,d,f){var g=f instanceof Br?Cn(f):new Br(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var b=a.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var A=new Br(null);g&&Qc(A,g),d&&(A.g=d),b&&Yc(A,b),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&we(g,f,d),we(g,"VER",c.la),Js(c,g),g}function RE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Se(new Gs({eb:f})):new Se(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function NE(){}t=NE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,d){return new bt(c,d)};function bt(c,d){it.call(this),this.g=new _E(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!B(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!B(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Gi(this)}S(bt,it),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){Af(this.g)},bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=mf(c),c=f);d.i.push(new KN(d.Ya++,c)),d.G==3&&tu(d)},bt.prototype.N=function(){this.g.l=null,delete this.j,Af(this.g),delete this.g,bt.aa.N.call(this)};function PE(c){vf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(PE,vf);function ME(){_f.call(this),this.status=1}S(ME,_f);function Gi(c){this.g=c}S(Gi,NE),Gi.prototype.ua=function(){pt(this.g,"a")},Gi.prototype.ta=function(c){pt(this.g,new PE(c))},Gi.prototype.sa=function(c){pt(this.g,new ME)},Gi.prototype.ra=function(){pt(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,cv=Yn.createWebChannelTransport=function(){return new ru},av=Yn.getStatEventTarget=function(){return zc()},sv=Yn.Event=Ur,ch=Yn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,Ic=Yn.ErrorCode=Wc,KI.COMPLETE="complete",ov=Yn.EventType=KI,HI.EventType=js,js.OPEN="a",js.CLOSE="b",js.ERROR="c",js.MESSAGE="d",it.prototype.listen=it.prototype.K,os=Yn.WebChannel=HI,PU=Yn.FetchXmlHttpFactory=Gs,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,iv=Yn.XhrIo=Se}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});var ZD="@firebase/firestore",XD="4.8.0";var Ke=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ke.UNAUTHENTICATED=new Ke(null),Ke.GOOGLE_CREDENTIALS=new Ke("google-credentials-uid"),Ke.FIRST_PARTY=new Ke("first-party-uid"),Ke.MOCK_USER=new Ke("mock-user");var Rs="11.10.0";var ki=new yn("@firebase/firestore");function ss(){return ki.logLevel}function F(t,...e){if(ki.logLevel<=ie.DEBUG){let n=e.map(eI);ki.debug(`Firestore (${Rs}): ${t}`,...n)}}function Zn(t,...e){if(ki.logLevel<=ie.ERROR){let n=e.map(eI);ki.error(`Firestore (${Rs}): ${t}`,...n)}}function kr(t,...e){if(ki.logLevel<=ie.WARN){let n=e.map(eI);ki.warn(`Firestore (${Rs}): ${t}`,...n)}}function eI(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HA(t,r,n)}function HA(t,e,n){let r=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zn(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||HA(e,i,r)}function J(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ut{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _n=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ke.UNAUTHENTICATED))}shutdown(){}},pv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},gv=class{constructor(e){this.t=e,this.currentUser=Ke.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new _n,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>D(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new _n)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new gh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ke(e)}},mv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ke.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},yv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new mv(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ke.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vv=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new mh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function MU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function qA(){return new TextEncoder}var Sc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=MU(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ne(t,e){return t<e?-1:t>e?1:0}function _v(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ne(r,i);{let o=qA(),s=xU(o.encode(eA(t,n)),o.encode(eA(e,n)));return s!==0?s:ne(r,i)}}n+=r>65535?2:1}return ne(t.length,e.length)}function eA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function xU(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ne(t[n],e[n]);return ne(t.length,e.length)}function ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var tA="__name__",yh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ne(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):_v(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Qn.fromString(e.substring(4,e.length-2))}},Te=class t extends yh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},kU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ot=class t extends yh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return kU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tA}static keyField(){return new t([tA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var U=class t{constructor(e){this.path=e}static fromPath(e){return new t(Te.fromString(e))}static fromName(e){return new t(Te.fromString(e).popFirst(5))}static empty(){return new t(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Te.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Te(e.slice()))}};function zA(t,e,n){if(!n)throw new L(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function OU(t,e,n,r){if(e===!0&&r===!0)throw new L(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function nA(t){if(!U.isDocumentKey(t))throw new L(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rA(t){if(U.isDocumentKey(t))throw new L(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Kh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function Oi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Kh(t);throw new L(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LU(t,e){if(e<=0)throw new L(P.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}function je(t,e){let n={typeString:t};return e&&(n.value=e),n}function Vc(t,e){if(!WA(t))throw new L(P.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(P.INVALID_ARGUMENT,n);return!0}var iA=-62135596800,oA=1e6,Ue=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*oA);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<iA)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oA}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-iA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ue._jsonSchemaVersion="firestore/timestamp/1.0",Ue._jsonSchema={type:je("string",Ue._jsonSchemaVersion),seconds:je("number"),nanoseconds:je("number")};var X=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Ue(0,0))}static max(){return new t(new Ue(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Cc=-1,Iv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Iv.UNKNOWN_ID=-1;function FU(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(r===1e9?new Ue(n+1,0):new Ue(n,r));return new Li(i,U.empty(),e)}function VU(t){return new Li(t.readTime,t.key,Cc)}var Li=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(X.min(),U.empty(),Cc)}static max(){return new t(X.max(),U.empty(),Cc)}};function jU(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=U.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}var UU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ev=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ns(t){return D(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==UU)throw t;F("LocalStore","Unexpectedly lost primary lease")})}var x=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function $U(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ps(t){return t.name==="IndexedDbTransactionError"}var tI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ae&&this.ae(n),n}}t.ue=-1;return t})(),nI=-1;function Qh(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function BU(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var GA="";function HU(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=sA(e)),e=qU(t.get(n),e);return sA(e)}function qU(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case GA:n+="";break;default:n+=o}}return n}function sA(t){return t+GA+""}var zU="remoteDocuments",KA="owner";var QA="mutationQueues";var YA="mutations";var JA="documentMutations",WU="remoteDocumentsV14";var ZA="remoteDocumentGlobal";var XA="targets";var eR="targetDocuments";var tR="targetGlobal",nR="collectionParents";var rR="clientMetadata";var iR="bundles";var oR="namedQueries";var GU="indexConfiguration";var KU="indexState";var QU="indexEntries";var sR="documentOverlays";var YU="globals";var JU=[QA,YA,JA,zU,XA,KA,tR,eR,rR,ZA,nR,iR,oR],ree=[...JU,sR],ZU=[QA,YA,JA,WU,XA,KA,tR,eR,rR,ZA,nR,iR,oR,sR],XU=ZU,e2=[...XU,GU,KU,QU];var iee=[...e2,YU];function aA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function jr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function aR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Re=class t{constructor(e,n){this.comparator=e,this.root=n||In.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,In.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,In.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}},ls=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},In=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};In.EMPTY=null,In.RED=!0,In.BLACK=!1;In.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new In(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class t{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vh(this.data.getIterator())}getIteratorFrom(e){return new vh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},vh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bt=class t{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new t([])}unionWith(e){let n=new Qe(Ot.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var _h=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ht=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _h("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var t2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=t2.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function er(t){return typeof t=="string"?ht.fromBase64String(t):ht.fromUint8Array(t)}var cR="server_timestamp",uR="__type__",lR="__previous_value__",dR="__local_write_time__";function Yh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[uR])===null||n===void 0?void 0:n.stringValue)===cR}function Jh(t){let e=t.mapValue.fields[lR];return Yh(e)?Jh(e):e}function Ac(t){let e=Xn(t.mapValue.fields[dR].timestampValue);return new Ue(e.seconds,e.nanos)}var wv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Ih="(default)",Eh=class t{constructor(e,n){this.projectId=e,this.database=n||Ih}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var rI="__type__",hR="__max__",uh={mapValue:{fields:{__type__:{stringValue:hR}}}},iI="__vector__",vs="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yh(t)?4:pR(t)?9007199254740991:fR(t)?10:11:z(28295,{value:t})}function Tn(t,e){if(t===e)return!0;let n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Xn(i.timestampValue),a=Xn(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return er(i.bytesValue).isEqual(er(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return be(i.geoPointValue.latitude)===be(o.geoPointValue.latitude)&&be(i.geoPointValue.longitude)===be(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return be(i.integerValue)===be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=be(i.doubleValue),a=be(o.doubleValue);return s===a?Dc(s)===Dc(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return ys(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(aA(s)!==aA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Tn(s[u],a[u])))return!1;return!0})(t,e);default:return z(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function _s(t,e){if(t===e)return 0;let n=Or(t),r=Or(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=be(o.integerValue||o.doubleValue),u=be(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(t,e);case 3:return cA(t.timestampValue,e.timestampValue);case 4:return cA(Ac(t),Ac(e));case 5:return _v(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=er(o),u=er(s);return a.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ne(a[l],u[l]);if(h!==0)return h}return ne(a.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ne(be(o.latitude),be(s.latitude));return a!==0?a:ne(be(o.longitude),be(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return uA(t.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[vs])===null||a===void 0?void 0:a.arrayValue,S=(u=m[vs])===null||u===void 0?void 0:u.arrayValue,N=ne(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:uA(y,S)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===uh.mapValue&&s===uh.mapValue)return 0;if(o===uh.mapValue)return 1;if(s===uh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=_v(u[p],h[p]);if(m!==0)return m;let y=_s(a[u[p]],l[h[p]]);if(y!==0)return y}return ne(u.length,h.length)})(t.mapValue,e.mapValue);default:throw z(23264,{le:n})}}function cA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);let n=Xn(t),r=Xn(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function uA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=_s(n[i],r[i]);if(o)return o}return ne(n.length,r.length)}function Is(t){return Tv(t)}function Tv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Xn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return er(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return U.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Tv(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Tv(n.fields[s])}`;return i+"}"})(t.mapValue):z(61005,{value:t})}function hh(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Jh(t);return e?16+hh(e):16;case 5:return 2*t.stringValue.length;case 6:return er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+hh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return jr(r.fields,(o,s)=>{i+=o.length+hh(s)}),i})(t.mapValue);default:throw z(13486,{value:t})}}function wh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bv(t){return!!t&&"integerValue"in t}function oI(t){return!!t&&"arrayValue"in t}function lA(t){return!!t&&"nullValue"in t}function dA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fh(t){return!!t&&"mapValue"in t}function fR(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[rI])===null||n===void 0?void 0:n.stringValue)===iI}function wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function pR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hR}var see={mapValue:{fields:{[rI]:{stringValue:iI},[vs]:{arrayValue:{}}}}};var kt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Ot.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=wc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());fh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){jr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(wc(this.value))}};function gR(t){let e=[];return jr(t.fields,(n,r)=>{let i=new Ot([n]);if(fh(r)){let o=gR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Bt(e)}var nn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,X.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Lr=class{constructor(e,n){this.position=e,this.inclusive=n}};function hA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=U.comparator(U.fromName(s.referenceValue),n.key):r=_s(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}var Fi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function n2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Th=class{},Ve=class t extends Th{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cv(e,n,r):n==="array-contains"?new Rv(e,r):n==="in"?new Nv(e,r):n==="not-in"?new Pv(e,r):n==="array-contains-any"?new Mv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Dv(e,r):new Av(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_s(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(_s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},rn=class t extends Th{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new t(e,n)}matches(e){return mR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function mR(t){return t.op==="and"}function yR(t){return r2(t)&&mR(t)}function r2(t){for(let e of t.filters)if(e instanceof rn)return!1;return!0}function Sv(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+Is(t.value);if(yR(t))return t.filters.map(e=>Sv(e)).join(",");{let e=t.filters.map(n=>Sv(n)).join(",");return`${t.op}(${e})`}}function vR(t,e){return t instanceof Ve?(function(r,i){return i instanceof Ve&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)})(t,e):t instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&vR(s,i.filters[a]),!0):!1})(t,e):void z(19439)}function _R(t){return t instanceof Ve?(function(n){return`${n.field.canonicalString()} ${n.op} ${Is(n.value)}`})(t):t instanceof rn?(function(n){return n.op.toString()+" {"+n.getFilters().map(_R).join(" ,")+"}"})(t):"Filter"}var Cv=class extends Ve{constructor(e,n,r){super(e,n,r),this.key=U.fromName(r.referenceValue)}matches(e){let n=U.comparator(e.key,this.key);return this.matchesComparison(n)}},Dv=class extends Ve{constructor(e,n){super(e,"in",n),this.keys=IR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Av=class extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=IR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function IR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>U.fromName(r.referenceValue))}var Rv=class extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return oI(n)&&Rc(n.arrayValue,this.value)}},Nv=class extends Ve{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}},Pv=class extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}},Mv=class extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!oI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var xv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function pA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new xv(t,e,n,r,i,o,s)}function sI(t){let e=J(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Is(r)).join(",")),e.Pe=n}return e.Pe}function aI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!n2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fA(t.startAt,e.startAt)&&fA(t.endAt,e.endAt)}function kv(t){return U.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var tr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function i2(t,e,n,r,i,o,s,a){return new tr(t,e,n,r,i,o,s,a)}function ER(t){return new tr(t)}function gA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cI(t){return t.collectionGroup!==null}function hs(t){let e=J(t);if(e.Te===null){e.Te=[];let n=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qe(Ot.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Fi(o,r))}),n.has(Ot.keyField().canonicalString())||e.Te.push(new Fi(Ot.keyField(),r))}return e.Te}function En(t){let e=J(t);return e.Ie||(e.Ie=o2(e,hs(t))),e.Ie}function o2(t,e){if(t.limitType==="F")return pA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Fi(i.field,o)});let n=t.endAt?new Lr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lr(t.startAt.position,t.startAt.inclusive):null;return pA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ov(t,e){let n=t.filters.concat([e]);return new tr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bh(t,e,n){return new tr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zh(t,e){return aI(En(t),En(e))&&t.limitType===e.limitType}function wR(t){return`${sI(En(t))}|lt:${t.limitType}`}function as(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>_R(i)).join(", ")}]`),Qh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`})(En(t))}; limitType=${t.limitType})`}function Xh(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):U.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of hs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=hA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,hs(r),i)||r.endAt&&!(function(s,a,u){let l=hA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,hs(r),i))})(t,e)}function s2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function TR(t){return(e,n)=>{let r=!1;for(let i of hs(t)){let o=a2(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function a2(t,e,n){let r=t.field.isKeyField()?U.comparator(e.key,n.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?_s(u,l):z(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var nr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return aR(this.inner)}size(){return this.innerSize}};var c2=new Re(U.comparator);function rr(){return c2}var bR=new Re(U.comparator);function Ec(...t){let e=bR;for(let n of t)e=e.insert(n.key,n);return e}function SR(t){let e=bR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mi(){return Tc()}function CR(){return Tc()}function Tc(){return new nr(t=>t.toString(),(t,e)=>t.isEqual(e))}var u2=new Re(U.comparator),l2=new Qe(U.comparator);function ae(...t){let e=l2;for(let n of t)e=e.add(n);return e}var d2=new Qe(ne);function h2(){return d2}function uI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function DR(t){return{integerValue:""+t}}function f2(t,e){return BU(e)?DR(e):uI(t,e)}var Es=class{constructor(){this._=void 0}};function p2(t,e,n){return t instanceof ws?(function(i,o){let s={fields:{[uR]:{stringValue:cR},[dR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Yh(o)&&(o=Jh(o)),o&&(s.fields[lR]=o),{mapValue:s}})(n,e):t instanceof Vi?RR(t,e):t instanceof ji?NR(t,e):(function(i,o){let s=AR(i,o),a=mA(s)+mA(i.Ee);return bv(s)&&bv(i.Ee)?DR(a):uI(i.serializer,a)})(t,e)}function g2(t,e,n){return t instanceof Vi?RR(t,e):t instanceof ji?NR(t,e):n}function AR(t,e){return t instanceof Ts?(function(r){return bv(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ws=class extends Es{},Vi=class extends Es{constructor(e){super(),this.elements=e}};function RR(t,e){let n=PR(e);for(let r of t.elements)n.some(i=>Tn(i,r))||n.push(r);return{arrayValue:{values:n}}}var ji=class extends Es{constructor(e){super(),this.elements=e}};function NR(t,e){let n=PR(e);for(let r of t.elements)n=n.filter(i=>!Tn(i,r));return{arrayValue:{values:n}}}var Ts=class extends Es{constructor(e,n){super(),this.serializer=e,this.Ee=n}};function mA(t){return be(t.integerValue||t.doubleValue)}function PR(t){return oI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m2(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Vi&&i instanceof Vi||r instanceof ji&&i instanceof ji?ys(r.elements,i.elements,Tn):r instanceof Ts&&i instanceof Ts?Tn(r.Ee,i.Ee):r instanceof ws&&i instanceof ws})(t.transform,e.transform)}var Lv=class{constructor(e,n){this.version=e,this.transformResults=n}},Jn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ph(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var bs=class{};function MR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nc(t.key,Jn.none()):new Ui(t.key,t.data,Jn.none());{let n=t.data,r=kt.empty(),i=new Qe(Ot.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new bn(t.key,r,new Bt(i.toArray()),Jn.none())}}function y2(t,e,n){t instanceof Ui?(function(i,o,s){let a=i.value.clone(),u=vA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof bn?(function(i,o,s){if(!ph(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=vA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(xR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function bc(t,e,n,r){return t instanceof Ui?(function(o,s,a,u){if(!ph(o.precondition,s))return a;let l=o.value.clone(),h=_A(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof bn?(function(o,s,a,u){if(!ph(o.precondition,s))return a;let l=_A(o.fieldTransforms,u,s),h=s.data;return h.setAll(xR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return ph(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function v2(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=AR(r.transform,i||null);o!=null&&(n===null&&(n=kt.empty()),n.set(r.field,o))}return n||null}function yA(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ys(r,i,(o,s)=>m2(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ui=class extends bs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},bn=class extends bs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function vA(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,g2(s,a,n[i]))}return r}function _A(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,p2(o,s,e))}return r}var Nc=class extends bs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Fv=class extends bs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Vv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&y2(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=CR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=MR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&ys(this.mutations,e.mutations,(n,r)=>yA(n,r))&&ys(this.baseMutations,e.baseMutations,(n,r)=>yA(n,r))}},jv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return u2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Uv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $v=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Le,le;function _2(t){switch(t){case P.OK:return z(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function kR(t){if(t===void 0)return Zn("GRPC error has no .code"),P.UNKNOWN;switch(t){case Le.OK:return P.OK;case Le.CANCELLED:return P.CANCELLED;case Le.UNKNOWN:return P.UNKNOWN;case Le.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Le.INTERNAL:return P.INTERNAL;case Le.UNAVAILABLE:return P.UNAVAILABLE;case Le.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Le.NOT_FOUND:return P.NOT_FOUND;case Le.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Le.ABORTED:return P.ABORTED;case Le.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Le.DATA_LOSS:return P.DATA_LOSS;default:return z(39323,{code:t})}}(le=Le||(Le={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var IA=null;var I2=new Qn([4294967295,4294967295],0);function EA(t){let e=qA().encode(t),n=new rv;return n.update(e),new Uint8Array(n.digest())}function wA(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qn([n,r],0),new Qn([i,o],0)]}var Bv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new xi(`Invalid padding: ${n}`);if(r<0)throw new xi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new xi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new xi(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Qn.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Qn.fromNumber(r)));return i.compare(I2)===1&&(i=new Qn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let n=EA(e),[r,i]=wA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let n=EA(e),[r,i]=wA(n);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},xi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Sh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(X.min(),i,new Re(ne),rr(),ae())}},Pc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ae(),ae(),ae())}};var fs=class{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}},Ch=class{constructor(e,n){this.targetId=e,this.De=n}},Dh=class{constructor(e,n,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Ah=class{constructor(){this.ve=0,this.Ce=TA(),this.Fe=ht.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),n=ae(),r=ae();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Pc(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=TA()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ge(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},Hv=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=rr(),this.je=lh(),this.Je=lh(),this.He=new Re(ne)}Ye(e){for(let n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(let n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{let r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){let n=e.targetId,r=e.De.count,i=this.st(n);if(i){let o=i.target;if(kv(o))if(r===0){let s=new U(o.path);this.Xe(n,s,nn.newNoDocument(s,X.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this.ot(n);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,l)}IA?.ct((function(h,p,m,y,S){var N,R,k,B,G,Ie;let ft={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},me=p.unchangedNames;return me&&(ft.bloomFilter={applied:S===0,hashCount:(N=me?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(B=(k=(R=me?.bits)===null||R===void 0?void 0:R.bitmap)===null||k===void 0?void 0:k.length)!==null&&B!==void 0?B:0,padding:(Ie=(G=me?.bits)===null||G===void 0?void 0:G.padding)!==null&&Ie!==void 0?Ie:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),ft})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let n=e.De.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=er(r).toUint8Array()}catch(u){if(u instanceof _h)return kr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Bv(s,i,o)}catch(u){return kr(u instanceof xi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){let r=this.We.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){let n=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&kv(a.target)){let u=new U(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,nn.newNoDocument(u,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=ae();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new Sh(e,n,this.He,this.ze,r);return this.ze=rr(),this.je=lh(),this.Je=lh(),this.He=new Re(ne),i}Ze(e,n){if(!this.nt(e))return;let r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Ah,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qe(ne),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qe(ne),this.je=this.je.insert(e,n)),n}nt(e){let n=this.st(e)!==null;return n||F("WatchChangeAggregator","Detected inactive target",e),n}st(e){let n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Ah),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}};function lh(){return new Re(U.comparator)}function TA(){return new Re(U.comparator)}var E2={asc:"ASCENDING",desc:"DESCENDING"},w2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T2={and:"AND",or:"OR"},qv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function zv(t,e){return t.useProto3Json||Qh(e)?e:{value:e}}function Rh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function b2(t,e){return Rh(t,e.toTimestamp())}function wn(t){return ge(!!t,49232),X.fromTimestamp((function(n){let r=Xn(n);return new Ue(r.seconds,r.nanos)})(t))}function lI(t,e){return Wv(t,e).canonicalString()}function Wv(t,e){let n=(function(i){return new Te(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function LR(t){let e=Te.fromString(t);return ge($R(e),10190,{key:e.toString()}),e}function Gv(t,e){return lI(t.databaseId,e.path)}function uv(t,e){let n=LR(e);if(n.get(1)!==t.databaseId.projectId)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new U(VR(n))}function FR(t,e){return lI(t.databaseId,e)}function S2(t){let e=LR(t);return e.length===4?Te.emptyPath():VR(e)}function Kv(t){return new Te(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VR(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function bA(t,e,n){return{name:Gv(t,e),fields:n.value.mapValue.fields}}function C2(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:kR(l.code);return new L(h,l.message||"")})(s);n=new Dh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=uv(t,r.document.name),o=wn(r.document.updateTime),s=r.document.createTime?wn(r.document.createTime):X.min(),a=new kt({mapValue:{fields:r.document.fields}}),u=nn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new fs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=uv(t,r.document),o=r.readTime?wn(r.readTime):X.min(),s=nn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new fs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=uv(t,r.document),o=r.removedTargetIds||[];n=new fs([],o,i,null)}else{if(!("filter"in e))return z(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new $v(i,o),a=r.targetId;n=new Ch(a,s)}}return n}function D2(t,e){let n;if(e instanceof Ui)n={update:bA(t,e.key,e.value)};else if(e instanceof Nc)n={delete:Gv(t,e.key)};else if(e instanceof bn)n={update:bA(t,e.key,e.data),updateMask:L2(e.fieldMask)};else{if(!(e instanceof Fv))return z(16599,{Rt:e.type});n={verify:Gv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof ws)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vi)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ji)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ts)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw z(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:b2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)})(t,e.precondition)),n}function A2(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?wn(i.updateTime):wn(o);return s.isEqual(X.min())&&(s=wn(o)),new Lv(s,i.transformResults||[])})(n,e))):[]}function R2(t,e){return{documents:[FR(t,e.path)]}}function N2(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=FR(t,i);let o=(function(l){if(l.length!==0)return UR(rn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:cs(m.field),direction:x2(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=zv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:n,parent:i}}function P2(t){let e=S2(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=jR(p);return m instanceof rn&&yR(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new Fi(us(S.field),(function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Qh(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Lr(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Lr(y,m)})(n.endAt)),i2(e,i,s,o,a,"F",u,l)}function M2(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jR(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=us(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=us(n.unaryFilter.field);return Ve.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=us(n.unaryFilter.field);return Ve.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=us(n.unaryFilter.field);return Ve.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Ve.create(us(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return rn.create(n.compositeFilter.filters.map(r=>jR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(n.compositeFilter.op))})(t):z(30097,{filter:t})}function x2(t){return E2[t]}function k2(t){return w2[t]}function O2(t){return T2[t]}function cs(t){return{fieldPath:t.canonicalString()}}function us(t){return Ot.fromServerFormat(t.fieldPath)}function UR(t){return t instanceof Ve?(function(n){if(n.op==="=="){if(dA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NAN"}};if(lA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NAN"}};if(lA(n.value))return{unaryFilter:{field:cs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cs(n.field),op:k2(n.op),value:n.value}}})(t):t instanceof rn?(function(n){let r=n.getFilters().map(i=>UR(i));return r.length===1?r[0]:{compositeFilter:{op:O2(n.op),filters:r}}})(t):z(54877,{filter:t})}function L2(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $R(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Mc=class t{constructor(e,n,r,i,o=X.min(),s=X.min(),a=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Qv=class{constructor(e){this.gt=e}};function F2(t){let e=P2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bh(e,e.limit,"L"):e}var Nh=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(be(e.integerValue));else if("doubleValue"in e){let r=be(e.doubleValue);isNaN(r)?this.Ct(n,13):(this.Ct(n,15),Dc(r)?n.Ft(0):n.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(n,20),typeof r=="string"&&(r=Xn(r)),n.Mt(`${r.seconds||""}`),n.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(er(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(n,45),n.Ft(r.latitude||0),n.Ft(r.longitude||0)}else"mapValue"in e?pR(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):fR(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):z(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let r=e.fields||{};this.Ct(n,55);for(let i of Object.keys(r))this.xt(i,n),this.Dt(r[i],n)}Lt(e,n){var r,i;let o=e.fields||{};this.Ct(n,53);let s=vs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(n,15),n.Ft(be(a)),this.xt(s,n),this.Dt(o[s],n)}qt(e,n){let r=e.values||[];this.Ct(n,50);for(let i of r)this.Dt(i,n)}Bt(e,n){this.Ct(n,37),U.fromName(e).path.forEach(r=>{this.Ct(n,60),this.$t(r,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Nh.Ut=new Nh;var Yv=class{constructor(){this.Dn=new Jv}addToCollectionParentIndex(e,n){return this.Dn.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Li.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}},Jv=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(Te.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}};var aee=new Uint8Array(0);var SA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},BR=41943040,$t=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(BR,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);var xc=class t{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new t(0)}static ur(){return new t(-1)}};var CA="LruGarbageCollector",V2=1048576;function DA([t,e],[n,r]){let i=ne(t,n);return i===0?ne(e,r):i}var Zv=class{constructor(e){this.Tr=e,this.buffer=new Qe(DA),this.Ir=0}dr(){return++this.Ir}Er(e){let n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();DA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},Xv=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){F(CA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>D(this,null,function*(){this.Ar=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ps(n)?F(CA,"Ignoring IndexedDB error during garbage collection: ",n):yield Ns(n)}yield this.Rr(3e5)}))}},e_=class{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(tI.ue);let r=new Zv(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(SA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SA):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),ss()<=ie.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function j2(t,e){return new e_(t,e)}var t_=class{constructor(){this.changes=new nr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var n_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var r_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bc(r.mutation,i,Bt.empty(),Ue.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){let i=Mi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ec();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=rr(),s=Tc(),a=(function(){return Tc()})();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof bn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),bc(h.mutation,l,h.mutation.getFieldMask(),Ue.now())):s.set(l.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new n_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Tc(),i=new Re((s,a)=>s-a),o=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Bt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=CR();h.forEach(m=>{if(!o.has(m)){let y=MR(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return x.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return U.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):x.resolve(Mi()),a=Cc,u=o;return s.next(l=>x.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?x.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:SR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new U(n)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ec();return this.indexManager.getCollectionParents(e,o).next(a=>x.forEach(a,u=>{let l=(function(p,m){return new tr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,nn.newInvalidDocument(h)))});let a=Ec();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&bc(h.mutation,l,Bt.empty(),Ue.now()),Xh(n,l)&&(a=a.insert(u,l))}),a})}};var i_=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:wn(i.createTime)}})(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(i){return{name:i.name,query:F2(i.bundledQuery),readTime:wn(i.readTime)}})(n)),x.resolve()}};var o_=class{constructor(){this.overlays=new Re(U.comparator),this.kr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mi();return x.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),x.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){let i=Mi(),o=n.length+1,s=new U(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return x.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Re((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Mi(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Mi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return x.resolve(a)}wt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Uv(n,r));let o=this.kr.get(n);o===void 0&&(o=ae(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}};var s_=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return x.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,x.resolve()}};var kc=class{constructor(){this.qr=new Qe(Fe.Qr),this.$r=new Qe(Fe.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){let r=new Fe(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Fe(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){let n=new U(new Te([])),r=new Fe(n,e),i=new Fe(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let n=new U(new Te([])),r=new Fe(n,e),i=new Fe(n,e+1),o=ae();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new Fe(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Fe=class{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return U.comparator(e.key,n.key)||ne(e.Hr,n.Hr)}static Ur(e,n){return ne(e.Hr,n.Hr)||U.comparator(e.key,n.key)}};var a_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qe(Fe.Qr)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Vv(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new Fe(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(s)}lookupMutationBatch(e,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Xr(r),o=i<0?0:i;return x.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?nI:this.er-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Fe(n,0),i=new Fe(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),x.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ne);return n.forEach(i=>{let o=new Fe(i,0),s=new Fe(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;U.isDocumentKey(o)||(o=o.child(""));let s=new Fe(new U(o),0),a=new Qe(ne);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),x.resolve(this.ei(a))}ei(e){let n=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,i=>{let o=new Fe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){let r=new Fe(n,0),i=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var c_=class{constructor(e){this.ni=e,this.docs=(function(){return new Re(U.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=rr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():nn.newInvalidDocument(i))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=rr(),s=n.path,a=new U(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||jU(VU(h),r)<=0||(i.has(h.key)||Xh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return x.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}ri(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new u_(this)}getSize(e){return x.resolve(this.size)}},u_=class extends t_{constructor(e){super(),this.Or=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}};var l_=class{constructor(e){this.persistence=e,this.ii=new nr(n=>sI(n),aI),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.si=0,this.oi=new kc,this.targetCount=0,this._i=xc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(e){this.ii.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this._i=new xc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.hr(n),x.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),x.waitFor(o).next(()=>i)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){let r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),x.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(e,n){let r=this.oi.Jr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.oi.containsKey(n))}};var Ph=class{constructor(e,n){this.ai={},this.overlays={},this.ui=new tI(0),this.ci=!1,this.ci=!0,this.li=new s_,this.referenceDelegate=e(this),this.hi=new l_(this),this.indexManager=new Yv,this.remoteDocumentCache=(function(i){return new c_(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new Qv(n),this.Ti=new i_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new o_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new a_(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){F("MemoryPersistence","Starting transaction:",e);let i=new d_(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return x.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}},d_=class extends Ev{constructor(e){super(),this.currentSequenceNumber=e}},h_=class t{constructor(e){this.persistence=e,this.Ai=new kc,this.Ri=null}static Vi(e){return new t(e)}get mi(){if(this.Ri)return this.Ri;throw z(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,r=>{let i=U.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,X.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}},Mh=class t{constructor(e,n){this.persistence=e,this.gi=new nr(r=>HU(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=j2(this,n)}static Vi(e,n){return new t(e,n)}Ii(){}di(e){return x.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){let n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return x.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?x.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,X.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),x.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),x.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=hh(e.data.value)),n}Sr(e,n,r){return x.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.gi.get(n);return x.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var f_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=ae(),i=ae();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var p_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var g_=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return rD()?8:$U(xt())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new p_;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ss()<=ie.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",as(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(ss()<=ie.DEBUG&&F("QueryEngine","Query:",as(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ss()<=ie.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",as(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):x.resolve())}ps(e,n){if(gA(n))return x.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bh(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ae(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(n,a);return this.Ds(n,l,s,u.readTime)?this.ps(e,bh(n,null,"F")):this.vs(e,l,n,u)}))})))}ys(e,n,r,i){return gA(n)||i.isEqual(X.min())?x.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(n,o);return this.Ds(n,s,r,i)?x.resolve(null):(ss()<=ie.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),as(n)),this.vs(e,s,n,FU(i,Cc)).next(a=>a))})}bs(e,n){let r=new Qe(TR(e));return n.forEach((i,o)=>{Xh(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return ss()<=ie.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",as(n)),this.gs.getDocumentsMatchingQuery(e,n,Li.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var dI="LocalStore",U2=3e8,m_=class{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new Re(ne),this.Ms=new nr(o=>sI(o),aI),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r_(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}};function $2(t,e,n,r){return new m_(t,e,n,r)}function HR(t,e){return D(this,null,function*(){let n=J(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ae();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function B2(t,e){let n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=x.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(N=>{let R=l.docVersions.get(S);ge(R!==null,48541),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function qR(t){let e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function H2(t,e){let n=J(t),r=e.snapshotVersion,i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ht.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(N,R,k){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=U2?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,y,h)&&a.push(n.hi.updateTargetData(o,y))});let u=rr(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(q2(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(X.min())){let h=n.hi.getLastRemoteSnapshotVersion(o).next(p=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return x.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Fs=i,o))}function q2(t,e,n){let r=ae(),i=ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=rr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):F(dI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function z2(t,e){let n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function W2(t,e){let n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,x.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Mc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}function y_(t,e,n){return D(this,null,function*(){let r=J(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ps(s))throw s;F(dI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)})}function AA(t,e,n){let r=J(t),i=X.min(),o=ae();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=J(u),m=p.Ms.get(h);return m!==void 0?x.resolve(p.Fs.get(m)):p.hi.getTargetData(l,h)})(r,s,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:X.min(),n?o:ae())).next(a=>(G2(r,s2(e),a),{documents:a,qs:o})))}function G2(t,e,n){let r=t.xs.get(e)||X.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}var xh=class{constructor(){this.activeTargetIds=h2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var v_=class{constructor(){this.Fo=new xh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new xh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var __=class{xo(e){}shutdown(){}};var RA="ConnectivityMonitor",kh=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){F(RA,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){F(RA,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var dh=null;function I_(){return dh===null?dh=(function(){return 268435456+Math.round(2147483648*Math.random())})():dh++,"0x"+dh.toString(16)}var lv="RestConnection",K2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},E_=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Ih?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){let s=I_(),a=this.Go(e,n.toUriEncodedString());F(lv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=wi(l);return this.jo(e,a,u,r,h).then(p=>(F(lv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw kr(lv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Rs})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){let r=K2[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}};var w_=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var lt="WebChannelConnection",T_=class extends E_{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){let s=I_();return new Promise((a,u)=>{let l=new iv;l.setWithCredentials(!0),l.listenOnce(ov.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ic.NO_ERROR:let p=l.getResponseJson();F(lt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ic.TIMEOUT:F(lt,`RPC '${e}' ${s} timed out`),u(new L(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:let m=l.getStatus();if(F(lt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let N=(function(k){let B=k.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(B)>=0?B:P.UNKNOWN})(S.status);u(new L(N,S.message))}else u(new L(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(P.UNAVAILABLE,"Connection failed."));break;default:z(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{F(lt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);F(lt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}P_(e,n,r){let i=I_(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cv(),a=av(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");F(lt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let m=!1,y=!1,S=new w_({Ho:R=>{y?F(lt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(F(lt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(lt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Yo:()=>p.close()}),N=(R,k,B)=>{R.listen(k,G=>{try{B(G)}catch(Ie){setTimeout(()=>{throw Ie},0)}})};return N(p,os.EventType.OPEN,()=>{y||(F(lt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),N(p,os.EventType.CLOSE,()=>{y||(y=!0,F(lt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),N(p,os.EventType.ERROR,R=>{y||(y=!0,kr(lt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),S.__(new L(P.UNAVAILABLE,"The operation could not be completed")))}),N(p,os.EventType.MESSAGE,R=>{var k;if(!y){let B=R.data[0];ge(!!B,16349);let G=B,Ie=G?.error||((k=G[0])===null||k===void 0?void 0:k.error);if(Ie){F(lt,`RPC '${e}' stream ${i} received error:`,Ie);let ft=Ie.status,me=(function(I){let E=Le[I];if(E!==void 0)return kR(E)})(ft),w=Ie.message;me===void 0&&(me=P.INTERNAL,w="Unknown error status: "+ft+" with message "+Ie.message),y=!0,S.__(new L(me,w)),p.close()}else F(lt,`RPC '${e}' stream ${i} received:`,B),S.a_(B)}}),N(a,sv.STAT_EVENT,R=>{R.stat===ch.PROXY?F(lt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===ch.NOPROXY&&F(lt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}};function dv(){return typeof document<"u"?document:null}function ef(t){return new qv(t,!0)}var Oh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var NA="PersistentStream",Lh=class{constructor(e,n,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Oh(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}stop(){return D(this,null,function*(){this.M_()&&(yield this.close(0))})}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}L_(){return D(this,null,function*(){if(this.x_())return this.close(0)})}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,n){return D(this,null,function*(){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Zn(n.toString()),Zn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.n_(n)})}U_(){}auth(){this.state=1;let e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{let i=new L(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){let r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(()=>D(this,null,function*(){this.state=0,this.start()}))}G_(e){return F(NA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(F(NA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},b_=class extends Lh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let n=C2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return X.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?X.min():s.readTime?wn(s.readTime):X.min()})(e);return this.listener.J_(n,r)}H_(e){let n={};n.database=Kv(this.serializer),n.addTarget=(function(o,s){let a,u=s.target;if(a=kv(u)?{documents:R2(o,u)}:{query:N2(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=OR(o,s.resumeToken);let l=zv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(X.min())>0){a.readTime=Rh(o,s.snapshotVersion.toTimestamp());let l=zv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=M2(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){let n={};n.database=Kv(this.serializer),n.removeTarget=e,this.k_(n)}},S_=class extends Lh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let n=A2(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.ta(r,n)}na(){let e={};e.database=Kv(this.serializer),this.k_(e)}X_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>D2(this.serializer,r))};this.k_(n)}};var C_=class{},D_=class extends C_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,Wv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(P.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,Wv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},A_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Zn(n),this._a=!1):F("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var $i="RemoteStore",R_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(()=>D(this,null,function*(){Hi(this)&&(F($i,"Restarting streams for network reachability change."),yield(function(u){return D(this,null,function*(){let l=J(u);l.Ia.add(4),yield jc(l),l.Aa.set("Unknown"),l.Ia.delete(4),yield tf(l)})})(this))}))}),this.Aa=new A_(r,i)}};function tf(t){return D(this,null,function*(){if(Hi(t))for(let e of t.da)yield e(!0)})}function jc(t){return D(this,null,function*(){for(let e of t.da)yield e(!1)})}function zR(t,e){let n=J(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),gI(n)?pI(n):Ms(n).x_()&&fI(n,e))}function hI(t,e){let n=J(t),r=Ms(n);n.Ta.delete(e),r.x_()&&WR(n,e),n.Ta.size===0&&(r.x_()?r.B_():Hi(n)&&n.Aa.set("Unknown"))}function fI(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ms(t).H_(e)}function WR(t,e){t.Ra.$e(e),Ms(t).Y_(e)}function pI(t){t.Ra=new Hv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ms(t).start(),t.Aa.aa()}function gI(t){return Hi(t)&&!Ms(t).M_()&&t.Ta.size>0}function Hi(t){return J(t).Ia.size===0}function GR(t){t.Ra=void 0}function Q2(t){return D(this,null,function*(){t.Aa.set("Online")})}function Y2(t){return D(this,null,function*(){t.Ta.forEach((e,n)=>{fI(t,e)})})}function J2(t,e){return D(this,null,function*(){GR(t),gI(t)?(t.Aa.la(e),pI(t)):t.Aa.set("Unknown")})}function Z2(t,e,n){return D(this,null,function*(){if(t.Aa.set("Online"),e instanceof Dh&&e.state===2&&e.cause)try{yield(function(i,o){return D(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})})(t,e)}catch(r){F($i,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Fh(t,r)}else if(e instanceof fs?t.Ra.Ye(e):e instanceof Ch?t.Ra.it(e):t.Ra.et(e),!n.isEqual(X.min()))try{let r=yield qR(t.localStore);n.compareTo(r)>=0&&(yield(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),WR(o,u);let p=new Mc(h.target,u,l,h.sequenceNumber);fI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n))}catch(r){F($i,"Failed to raise snapshot:",r),yield Fh(t,r)}})}function Fh(t,e,n){return D(this,null,function*(){if(!Ps(e))throw e;t.Ia.add(1),yield jc(t),t.Aa.set("Offline"),n||(n=()=>qR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>D(null,null,function*(){F($i,"Retrying IndexedDB access"),yield n(),t.Ia.delete(1),yield tf(t)}))})}function KR(t,e){return e().catch(n=>Fh(t,n,e))}function nf(t){return D(this,null,function*(){let e=J(t),n=Fr(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:nI;for(;X2(e);)try{let i=yield z2(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,e$(e,i)}catch(i){yield Fh(e,i)}QR(e)&&YR(e)})}function X2(t){return Hi(t)&&t.Pa.length<10}function e$(t,e){t.Pa.push(e);let n=Fr(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function QR(t){return Hi(t)&&!Fr(t).M_()&&t.Pa.length>0}function YR(t){Fr(t).start()}function t$(t){return D(this,null,function*(){Fr(t).na()})}function n$(t){return D(this,null,function*(){let e=Fr(t);for(let n of t.Pa)e.X_(n.mutations)})}function r$(t,e,n){return D(this,null,function*(){let r=t.Pa.shift(),i=jv.from(r,e,n);yield KR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield nf(t)})}function i$(t,e){return D(this,null,function*(){e&&Fr(t).Z_&&(yield(function(r,i){return D(this,null,function*(){if((function(s){return _2(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();Fr(r).N_(),yield KR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield nf(r)}})})(t,e)),QR(t)&&YR(t)})}function PA(t,e){return D(this,null,function*(){let n=J(t);n.asyncQueue.verifyOperationInProgress(),F($i,"RemoteStore received new credentials");let r=Hi(n);n.Ia.add(3),yield jc(n),r&&n.Aa.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),yield tf(n)})}function o$(t,e){return D(this,null,function*(){let n=J(t);e?(n.Ia.delete(2),yield tf(n)):e||(n.Ia.add(2),yield jc(n),n.Aa.set("Unknown"))})}function Ms(t){return t.Va||(t.Va=(function(n,r,i){let o=J(n);return o.ia(),new b_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:Q2.bind(null,t),e_:Y2.bind(null,t),n_:J2.bind(null,t),J_:Z2.bind(null,t)}),t.da.push(e=>D(null,null,function*(){e?(t.Va.N_(),gI(t)?pI(t):t.Aa.set("Unknown")):(yield t.Va.stop(),GR(t))}))),t.Va}function Fr(t){return t.ma||(t.ma=(function(n,r,i){let o=J(n);return o.ia(),new S_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:t$.bind(null,t),n_:i$.bind(null,t),ea:n$.bind(null,t),ta:r$.bind(null,t)}),t.da.push(e=>D(null,null,function*(){e?(t.ma.N_(),yield nf(t)):(yield t.ma.stop(),t.Pa.length>0&&(F($i,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}var N_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mI(t,e){if(Zn("AsyncQueue",`${e}: ${t}`),Ps(t))return new L(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Vh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||U.comparator(n.key,r.key):(n,r)=>U.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Re(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var jh=class{constructor(){this.fa=new Re(U.comparator)}track(e){let n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):z(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){let e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}},Ss=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Vh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var P_=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},M_=class{constructor(){this.queries=MA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){let i=J(n),o=i.queries;i.queries=MA(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new L(P.ABORTED,"Firestore shutting down"))}};function MA(){return new nr(t=>wR(t),Zh)}function s$(t,e){return D(this,null,function*(){let n=J(t),r=3,i=e.query,o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new P_,r=e.ba()?0:1);try{switch(r){case 0:o.ya=yield n.onListen(i,!0);break;case 1:o.ya=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=mI(s,`Initialization of query '${as(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&yI(n)})}function a$(t,e){return D(this,null,function*(){let n=J(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function c$(t,e){let n=J(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&yI(n)}function u$(t,e,n){let r=J(t),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(n);r.queries.delete(e)}function yI(t){t.Da.forEach(e=>{e.next()})}var x_,xA;(xA=x_||(x_={})).Fa="default",xA.Cache="cache";var k_=class{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;let r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==x_.Cache}};var Uh=class{constructor(e){this.key=e}},$h=class{constructor(e){this.key=e}},O_=class{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=TR(e),this.eu=new Vh(this.Xa)}get tu(){return this.Ha}nu(e,n){let r=n?n.ru:new jh,i=n?n.eu:this.eu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Xh(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),N=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),R=!1;m&&y?m.data.isEqual(y.data)?S!==N&&(r.track({type:3,doc:y}),R=!0):this.iu(m,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),R=!0):m&&!y&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(y?(s=s.add(y),o=N?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{At:R})}};return N(y)-N(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=n&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Ss(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new jh,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new $h(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new Uh(r))}),n}uu(e){this.Ha=e.qs,this.Za=ae();let n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Ss.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},vI="SyncEngine",L_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},F_=class{constructor(e){this.key=e,this.lu=!1}},V_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new nr(a=>wR(a),Zh),this.Tu=new Map,this.Iu=new Set,this.du=new Re(U.comparator),this.Eu=new Map,this.Au=new kc,this.Ru={},this.Vu=new Map,this.mu=xc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};function l$(t,e,n=!0){return D(this,null,function*(){let r=nN(t),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=yield JR(r,e,n,!0),i})}function d$(t,e){return D(this,null,function*(){let n=nN(t);yield JR(n,e,!0,!1)})}function JR(t,e,n,r){return D(this,null,function*(){let i=yield W2(t.localStore,En(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield h$(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&zR(t.remoteStore,i),a})}function h$(t,e,n,r,i){return D(this,null,function*(){t.gu=(p,m,y)=>(function(N,R,k,B){return D(this,null,function*(){let G=R.view.nu(k);G.Ds&&(G=yield AA(N.localStore,R.query,!1).then(({documents:w})=>R.view.nu(w,G)));let Ie=B&&B.targetChanges.get(R.targetId),ft=B&&B.targetMismatches.get(R.targetId)!=null,me=R.view.applyChanges(G,N.isPrimaryClient,Ie,ft);return OA(N,R.targetId,me._u),me.snapshot})})(t,p,m,y);let o=yield AA(t.localStore,e,!0),s=new O_(e,o.qs),a=s.nu(o.documents),u=Pc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);OA(t,n,l._u);let h=new L_(e,n,s);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),l.snapshot})}function f$(t,e,n){return D(this,null,function*(){let r=J(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Zh(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield y_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hI(r.remoteStore,i.targetId),j_(r,i.targetId)}).catch(Ns))):(j_(r,i.targetId),yield y_(r.localStore,i.targetId,!0))})}function p$(t,e){return D(this,null,function*(){let n=J(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hI(n.remoteStore,r.targetId))})}function g$(t,e,n){return D(this,null,function*(){let r=w$(t);try{let i=yield(function(s,a){let u=J(s),l=Ue.now(),h=a.reduce((y,S)=>y.add(S.key),ae()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=rr(),N=ae();return u.Os.getEntries(y,h).next(R=>{S=R,S.forEach((k,B)=>{B.isValidDocument()||(N=N.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(R=>{p=R;let k=[];for(let B of a){let G=v2(B,p.get(B.key).overlayedDocument);G!=null&&k.push(new bn(B.key,G,gR(G.value.mapValue),Jn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,a)}).next(R=>{m=R;let k=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(y,R.batchId,k)})}).then(()=>({batchId:m.batchId,changes:SR(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new Re(ne)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,n),yield Uc(r,i.changes),yield nf(r.remoteStore)}catch(i){let o=mI(i,"Failed to persist write");n.reject(o)}})}function ZR(t,e){return D(this,null,function*(){let n=J(t);try{let r=yield H2(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Eu.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?ge(s.lu,14607):i.removedDocuments.size>0&&(ge(s.lu,42227),s.lu=!1))}),yield Uc(n,r,e)}catch(r){yield Ns(r)}})}function kA(t,e,n){let r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=J(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.wa)m.va(a)&&(l=!0)}),l&&yI(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function m$(t,e,n){return D(this,null,function*(){let r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new Re(U.comparator);s=s.insert(o,nn.newNoDocument(o,X.min()));let a=ae().add(o),u=new Sh(X.min(),new Map,new Re(ne),s,a);yield ZR(r,u),r.du=r.du.remove(o),r.Eu.delete(e),_I(r)}else yield y_(r.localStore,e,!1).then(()=>j_(r,e,n)).catch(Ns)})}function y$(t,e){return D(this,null,function*(){let n=J(t),r=e.batch.batchId;try{let i=yield B2(n.localStore,e);eN(n,r,null),XR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Uc(n,i)}catch(i){yield Ns(i)}})}function v$(t,e,n){return D(this,null,function*(){let r=J(t);try{let i=yield(function(s,a){let u=J(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);eN(r,e,n),XR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Uc(r,i)}catch(i){yield Ns(i)}})}function XR(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function eN(t,e,n){let r=J(t),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function j_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||tN(t,r)})}function tN(t,e){t.Iu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(hI(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),_I(t))}function OA(t,e,n){for(let r of n)r instanceof Uh?(t.Au.addReference(r.key,e),_$(t,r)):r instanceof $h?(F(vI,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||tN(t,r.key)):z(19791,{yu:r})}function _$(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(F(vI,"New document in limbo: "+n),t.Iu.add(r),_I(t))}function _I(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Iu.values().next().value;t.Iu.delete(e);let n=new U(Te.fromString(e)),r=t.mu.next();t.Eu.set(r,new F_(n)),t.du=t.du.insert(n,r),zR(t.remoteStore,new Mc(En(ER(n.path)),r,"TargetPurposeLimboResolution",tI.ue))}}function Uc(t,e,n){return D(this,null,function*(){let r=J(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=f_.Es(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.hu.J_(i),yield(function(u,l){return D(this,null,function*(){let h=J(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>x.forEach(l,m=>x.forEach(m.Is,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>x.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ps(p))throw p;F(dI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Fs.get(m),S=y.snapshotVersion,N=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(m,N)}}})})(r.localStore,o))})}function I$(t,e){return D(this,null,function*(){let n=J(t);if(!n.currentUser.isEqual(e)){F(vI,"User change. New user:",e.toKey());let r=yield HR(n.localStore,e);n.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new L(P.CANCELLED,s))})}),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uc(n,r.Bs)}})}function E$(t,e){let n=J(t),r=n.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),o=n.Tu.get(e);if(!o)return i;for(let s of o){let a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function nN(t){let e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m$.bind(null,e),e.hu.J_=c$.bind(null,e.eventManager),e.hu.pu=u$.bind(null,e.eventManager),e}function w$(t){let e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=v$.bind(null,e),e}var rN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return D(this,null,function*(){this.serializer=ef(n.databaseInfo.databaseId),this.sharedClientState=this.bu(n),this.persistence=this.Du(n),yield this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Cu(n,this.localStore),this.indexBackfillerScheduler=this.Fu(n,this.localStore)})}Cu(n,r){return null}Fu(n,r){return null}vu(n){return $2(this.persistence,new g_,n.initialUser,this.serializer)}Du(n){return new Ph(h_.Vi,this.serializer)}bu(n){return new v_}terminate(){return D(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),U_=class extends rN{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){ge(this.persistence.referenceDelegate instanceof Mh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Xv(r,e.asyncQueue,n)}Du(e){let n=this.cacheSizeBytes!==void 0?$t.withCacheSize(this.cacheSizeBytes):$t.DEFAULT;return new Ph(r=>Mh.Vi(r,n),this.serializer)}};var T$=(()=>{class t{initialize(n,r){return D(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=I$.bind(null,this.syncEngine),yield o$(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return(function(){return new M_})()}createDatastore(n){let r=ef(n.databaseInfo.databaseId),i=(function(s){return new T_(s)})(n.databaseInfo);return(function(s,a,u,l){return new D_(s,a,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,u){return new R_(i,o,s,a,u)})(this.localStore,this.datastore,n.asyncQueue,r=>kA(this.syncEngine,r,0),(function(){return kh.C()?new kh:new __})())}createSyncEngine(n,r){return(function(o,s,a,u,l,h,p){let m=new V_(o,s,a,u,l,h);return p&&(m.fu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return D(this,null,function*(){var n,r;yield(function(o){return D(this,null,function*(){let s=J(o);F($i,"RemoteStore shutting down."),s.Ia.add(5),yield jc(s),s.Ea.shutdown(),s.Aa.set("Unknown")})})(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var $_=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Zn("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Vr="FirestoreClient",B_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ke.UNAUTHENTICATED,this.clientId=Sc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>D(this,null,function*(){F(Vr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(F(Vr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>D(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=mI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function hv(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),F(Vr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>D(null,null,function*(){r.isEqual(i)||(yield HR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>{kr("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{F("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{kr("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e})}function LA(t,e){return D(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield b$(t);F(Vr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>PA(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>PA(e.remoteStore,i)),t._onlineComponents=e})}function b$(t){return D(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){F(Vr,"Using user provided OfflineComponentProvider");try{yield hv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),yield hv(t,new rN)}}else F(Vr,"Using default OfflineComponentProvider"),yield hv(t,new U_(void 0));return t._offlineComponents})}function iN(t){return D(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(F(Vr,"Using user provided OnlineComponentProvider"),yield LA(t,t._uninitializedComponentsProvider._online)):(F(Vr,"Using default OnlineComponentProvider"),yield LA(t,new T$))),t._onlineComponents})}function S$(t){return iN(t).then(e=>e.syncEngine)}function C$(t){return D(this,null,function*(){let e=yield iN(t),n=e.eventManager;return n.onListen=l$.bind(null,e.syncEngine),n.onUnlisten=f$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p$.bind(null,e.syncEngine),n})}function D$(t,e,n={}){let r=new _n;return t.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return(function(o,s,a,u,l){let h=new $_({next:m=>{h.Ou(),s.enqueueAndForget(()=>a$(o,p)),m.fromCache&&u.source==="server"?l.reject(new L(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new k_(a,h,{includeMetadataChanges:!0,ka:!0});return s$(o,p)})(yield C$(t),t.asyncQueue,e,n,r)})),r.promise}function oN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var FA=new Map;var sN="firestore.googleapis.com",VA=!0,Bh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sN,this.ssl=VA}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:VA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=BR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<V2)throw new L(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}OU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Cs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fv;switch(r.type){case"firstParty":return new yv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return D(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=FA.get(n);r&&(F("ComponentProvider","Removing Datastore"),FA.delete(n),r.terminate())})(this),Promise.resolve()}};function aN(t,e,n,r={}){var i;t=Oi(t,Cs);let o=wi(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(vy(`https://${u}`),_y("Firestore",!0)),s.host!==sN&&s.host!==u&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Ti(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ke.MOCK_USER;else{h=ZC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ke(m)}t._authCredentials=new pv(new gh(h,p))}}var ir=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},dt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Vc(n,t._jsonSchema))return new t(e,r||null,new U(Te.fromString(n.referencePath)))}};dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:je("string",dt._jsonSchemaVersion),referencePath:je("string")};var Nr=class t extends ir{constructor(e,n,r){super(e,n,ER(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new U(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function cN(t,e,...n){if(t=tt(t),zA("collection","path",e),t instanceof Cs){let r=Te.fromString(e,...n);return rA(r),new Nr(t,null,r)}{if(!(t instanceof dt||t instanceof Nr))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return rA(r),new Nr(t.firestore,null,r)}}function II(t,e,...n){if(t=tt(t),arguments.length===1&&(e=Sc.newId()),zA("doc","path",e),t instanceof Cs){let r=Te.fromString(e,...n);return nA(r),new dt(t,null,new U(r))}{if(!(t instanceof dt||t instanceof Nr))throw new L(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Te.fromString(e,...n));return nA(r),new dt(t.firestore,t instanceof Nr?t.converter:null,new U(r))}}var jA="AsyncQueue",Hh=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Oh(this,"async_queue_retry"),this.oc=()=>{let r=dv();r&&F(jA,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let n=dv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=dv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new _n;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}cc(){return D(this,null,function*(){if(this.Zu.length!==0){try{yield this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ps(e))throw e;F(jA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}})}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Zn("INTERNAL UNHANDLED ERROR: ",UA(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let i=N_.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&z(47125,{hc:UA(this.tc)})}verifyOperationInProgress(){}Pc(){return D(this,null,function*(){let e;do e=this._c,yield e;while(e!==this._c)})}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function UA(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var Bi=class extends Cs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Hh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return D(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Hh(e),this._firestoreClient=void 0,yield e}})}};function uN(t,e){let n=typeof t=="object"?t:ns(),r=typeof t=="string"?t:e||Ih,i=Hd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=YC("firestore");o&&aN(i,...o)}return i}function lN(t){if(t._terminated)throw new L(P.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||A$(t),t._firestoreClient}function A$(t){var e,n,r;let i=t._freezeSettings(),o=(function(a,u,l,h){return new wv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,oN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new B_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(t._componentsProvider))}var Pr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(ht.fromBase64String(e))}catch(n){throw new L(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Pr._jsonSchemaVersion="firestore/bytes/1.0",Pr._jsonSchema={type:je("string",Pr._jsonSchemaVersion),bytes:je("string")};var Ds=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Oc=class{constructor(e){this._methodName=e}};var Mr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Vc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Mr._jsonSchemaVersion="firestore/geoPoint/1.0",Mr._jsonSchema={type:je("string",Mr._jsonSchemaVersion),latitude:je("number"),longitude:je("number")};var xr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new L(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};xr._jsonSchemaVersion="firestore/vectorValue/1.0",xr._jsonSchema={type:je("string",xr._jsonSchemaVersion),vectorValues:je("object")};var R$=/^__.*__$/,H_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new bn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ui(e,this.data,n,this.fieldTransforms)}},qh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new bn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function dN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ec:t})}}var q_=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wh(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(dN(this.Ec)&&R$.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},z_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ef(e)}Dc(e,n,r,i=!1){return new q_({Ec:e,methodName:n,bc:r,path:Ot.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rf(t){let e=t._freezeSettings(),n=ef(t._databaseId);return new z_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function N$(t,e,n,r,i,o={}){let s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);EI("Data must be an object, but it was:",s,r);let a=fN(r,s),u,l;if(o.merge)u=new Bt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=W_(e,p,n);if(!s.contains(m))throw new L(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);gN(h,m)||h.push(m)}u=new Bt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new H_(new kt(a),u,l)}var zh=class t extends Oc{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function P$(t,e,n,r){let i=t.Dc(1,e,n);EI("Data must be an object, but it was:",i,r);let o=[],s=kt.empty();jr(r,(u,l)=>{let h=wI(e,u,n);l=tt(l);let p=i.gc(h);if(l instanceof zh)o.push(h);else{let m=$c(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Bt(o);return new qh(s,a,i.fieldTransforms)}function M$(t,e,n,r,i,o){let s=t.Dc(1,e,n),a=[W_(e,r,n)],u=[i];if(o.length%2!=0)throw new L(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(W_(e,o[m])),u.push(o[m+1]);let l=[],h=kt.empty();for(let m=a.length-1;m>=0;--m)if(!gN(l,a[m])){let y=a[m],S=u[m];S=tt(S);let N=s.gc(y);if(S instanceof zh)l.push(y);else{let R=$c(S,N);R!=null&&(l.push(y),h.set(y,R))}}let p=new Bt(l);return new qh(h,p,s.fieldTransforms)}function hN(t,e,n,r=!1){return $c(n,t.Dc(r?4:3,e))}function $c(t,e){if(pN(t=tt(t)))return EI("Unsupported field value:",e,t),fN(t,e);if(t instanceof Oc)return(function(r,i){if(!dN(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=$c(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=tt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return f2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ue.fromDate(r);return{timestampValue:Rh(i.serializer,o)}}if(r instanceof Ue){let o=new Ue(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rh(i.serializer,o)}}if(r instanceof Mr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pr)return{bytesValue:OR(i.serializer,r._byteString)};if(r instanceof dt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof xr)return(function(s,a){return{mapValue:{fields:{[rI]:{stringValue:iI},[vs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return uI(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Kh(r)}`)})(t,e)}function fN(t,e){let n={};return aR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(t,(r,i)=>{let o=$c(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function pN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ue||t instanceof Mr||t instanceof Pr||t instanceof dt||t instanceof Oc||t instanceof xr)}function EI(t,e,n){if(!pN(n)||!WA(n)){let r=Kh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function W_(t,e,n){if((e=tt(e))instanceof Ds)return e._internalPath;if(typeof e=="string")return wI(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,n)}var x$=new RegExp("[~\\*/\\[\\]]");function wI(t,e,n){if(e.search(x$)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ds(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(P.INVALID_ARGUMENT,a+t+u)}function gN(t,e){return t.some(n=>n.isEqual(e))}var Lc=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new G_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(of("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},G_=class extends Lc{data(){return super.data()}};function of(t,e){return typeof e=="string"?wI(t,e):e instanceof Ds?e._internalPath:e._delegate._internalPath}function k$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fc=class{},As=class extends Fc{};function mN(t,e,...n){let r=[];e instanceof Fc&&r.push(e),r=r.concat(n),(function(o){let s=o.filter(u=>u instanceof K_).length,a=o.filter(u=>u instanceof Gh).length;if(s>1||s>0&&a>0)throw new L(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)t=i._apply(t);return t}var Gh=class t extends As{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return EN(e._query,n),new ir(e.firestore,e.converter,Ov(e._query,n))}_parse(e){let n=rf(e.firestore);return(function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){BA(p,h);let S=[];for(let N of p)S.push($A(u,o,N));m={arrayValue:{values:S}}}else m=$A(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||BA(p,h),m=hN(a,s,p,h==="in"||h==="not-in");return Ve.create(l,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function yN(t,e,n){let r=e,i=of("where",t);return Gh._create(i,r,n)}var K_=class t extends Fc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)EN(s,u),s=Ov(s,u)})(e._query,n),new ir(e.firestore,e.converter,Ov(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Q_=class t extends As{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=(function(i,o,s){if(i.startAt!==null)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fi(o,s)})(e._query,this._field,this._direction);return new ir(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new tr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,n))}};function vN(t,e="asc"){let n=e,r=of("orderBy",t);return Q_._create(r,n)}var Y_=class t extends As{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ir(e.firestore,e.converter,bh(e._query,this._limit,this._limitType))}};function _N(t){return LU("limit",t),Y_._create("limit",t,"F")}var J_=class t extends As{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=O$(e,this.type,this._docOrFields,this._inclusive);return new ir(e.firestore,e.converter,(function(i,o){return new tr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)})(e._query,n))}};function IN(...t){return J_._create("startAfter",t,!1)}function O$(t,e,n,r){if(n[0]=tt(n[0]),n[0]instanceof Lc)return(function(o,s,a,u,l){if(!u)throw new L(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of hs(o))if(p.field.isKeyField())h.push(wh(s,u.key));else{let m=u.data.field(p.field);if(Yh(m))throw new L(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new L(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Lr(h,l)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=rf(t.firestore);return(function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new L(P.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let S=0;S<h.length;S++){let N=h[S];if(m[S].field.isKeyField()){if(typeof N!="string")throw new L(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof N}`);if(!cI(s)&&N.indexOf("/")!==-1)throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${N}' contains a slash.`);let R=s.path.child(Te.fromString(N));if(!U.isDocumentKey(R))throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${R}' is not because it contains an odd number of segments.`);let k=new U(R);y.push(wh(a,k))}else{let R=hN(u,l,N);y.push(R)}}return new Lr(y,p)})(t._query,t.firestore._databaseId,i,e,n,r)}}function $A(t,e,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new L(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cI(e)&&n.indexOf("/")!==-1)throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Te.fromString(n));if(!U.isDocumentKey(r))throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wh(t,new U(r))}if(n instanceof dt)return wh(t,n._key);throw new L(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function BA(t,e){if(!Array.isArray(t)||t.length===0)throw new L(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function EN(t,e){let n=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new L(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Z_=class{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return jr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[vs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>be(s.doubleValue));return new xr(o)}convertGeoPoint(e){return new Mr(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let n=Xn(e);return new Ue(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Te.fromString(e);ge($R(r),9688,{name:e});let i=new Eh(r.get(1),r.get(3)),o=new U(r.popFirst(5));return i.isEqual(n)||Zn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function L$(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ds=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ps=class t extends Lc{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(of("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",ps._jsonSchema={type:je("string",ps._jsonSchemaVersion),bundleSource:je("string","DocumentSnapshot"),bundleName:je("string"),bundle:je("string")};var gs=class extends ps{data(e={}){return super.data(e)}},ms=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gs(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new gs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:F$(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function F$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}ms._jsonSchemaVersion="firestore/querySnapshot/1.0",ms._jsonSchema={type:je("string",ms._jsonSchemaVersion),bundleSource:je("string","QuerySnapshot"),bundleName:je("string"),bundle:je("string")};var X_=class extends Z_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}};function wN(t){t=Oi(t,ir);let e=Oi(t.firestore,Bi),n=lN(e),r=new X_(e);return k$(t._query),D$(n,t._query).then(i=>new ms(e,r,t,i))}function TN(t,e,n,...r){t=Oi(t,dt);let i=Oi(t.firestore,Bi),o=rf(i),s;return s=typeof(e=tt(e))=="string"||e instanceof Ds?M$(o,"updateDoc",t._key,e,n,r):P$(o,"updateDoc",t._key,e),TI(i,[s.toMutation(t._key,Jn.exists(!0))])}function bN(t){return TI(Oi(t.firestore,Bi),[new Nc(t._key,Jn.none())])}function SN(t,e){let n=Oi(t.firestore,Bi),r=II(t),i=L$(t.converter,e);return TI(n,[N$(rf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}function TI(t,e){return(function(r,i){let o=new _n;return r.asyncQueue.enqueueAndForget(()=>D(null,null,function*(){return g$(yield S$(r),i,o)})),o.promise})(lN(t),e)}(function(e,n=!0){(function(i){Rs=i})(ts),en(new _t("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Bi(new gv(r.getProvider("auth-internal")),new vv(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eh(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me(ZD,XD,e),Me(ZD,XD,"esm2017")})();var qi=class{constructor(e){return e}},CN="firestore",bI=class{constructor(){return is(CN)}};var SI=new H("angularfire2.firestore-instances");function V$(t,e){let n=Wd(CN,t,e);return n&&new qi(n)}function j$(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new qi(r)}}var U$={provide:bI,deps:[[new Un,SI]]},$$={provide:qi,useFactory:V$,deps:[[new Un,SI],Ai]};function dte(t,...e){return Me("angularfire",Ci.full,"fst"),Wt([$$,U$,{provide:SI,useFactory:j$(t),multi:!0,deps:[_e,Xe,Di,fc,[new Un,sh],[new Un,Kd],...e]}])}var DN=nt(SN,!0,2);var sf=nt(cN,!0,2);var AN=nt(bN,!0,2);var CI=nt(II,!0,2);var DI=nt(wN,!0);var hte=nt(uN,!0);var AI=nt(_N,!0,2);var RI=nt(vN,!0,2),NI=nt(mN,!0,2);var RN=nt(IN,!0,2);var NN=nt(TN,!0,2);var PI=nt(yN,!0,2);var PN=class t{constructor(e){this.firestore=e}getReelsFirstPage(e,n){let r=sf(this.firestore,"reels"),i=[...n!=="All"?[PI("status","==",n)]:[],RI("createdAt","desc"),AI(e)],o=NI(r,...i);return DI(o)}getReelsNextPage(e,n,r){let i=sf(this.firestore,"reels");if(!e)return this.getReelsFirstPage(n,r);let o=[...r!=="All"?[PI("status","==",r)]:[],RI("createdAt","desc"),RN(e),AI(n)],s=NI(i,...o);return DI(s)}addReel(e){e.createdAt=new Date;let n=sf(this.firestore,"reels");return DN(n,e)}modifyReel(e,n){let r=CI(this.firestore,`reels/${e}`);return NN(r,n)}deleteReel(e){let n=CI(this.firestore,`reels/${e}`);return AN(n)}static \u0275fac=function(n){return new(n||t)(ee(qi))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};export{V as a,ye as b,$e as c,Ne as d,ue as e,qP as f,j as g,zu as h,da as i,H as j,M as k,zw as l,Ww as m,Fn as n,g0 as o,ai as p,Oo as q,Ol as r,wr as s,DM as t,ut as u,kb as v,Yl as w,yt as x,gm as y,Zl as z,jo as A,mS as B,Oa as C,gi as D,Bk as E,Hk as F,qk as G,zk as H,ES as I,Im as J,Em as K,td as L,wS as M,TS as N,Yk as O,nd as P,CS as Q,Xk as R,DS as S,mO as T,AS as U,bO as V,SO as W,DO as X,Bn as Y,NO as Z,od as _,Hn as $,pL as aa,zn as ba,cy as ca,es as da,Fd as ea,Y1 as fa,X1 as ga,dZ as ha,hZ as ia,dte as ja,hte as ka,PN as la};
